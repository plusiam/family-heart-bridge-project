<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’ ë””ì§€í„¸ ê°ì • ì¹´ë“œ - ë‹¤ì–‘í•œ ê°ì • ì•Œì•„ë³´ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .title-font {
            font-family: 'Jua', sans-serif;
        }
        
        .emotion-card {
            perspective: 1000px;
            height: 280px;
            cursor: pointer;
        }
        
        .emotion-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .emotion-card.flipped .emotion-card-inner {
            transform: rotateY(180deg);
        }
        
        .emotion-card-front, .emotion-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .emotion-card-front {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .emotion-card-back {
            background: white;
            transform: rotateY(180deg);
            color: #333;
        }
        
        .card-collected {
            animation: collect 0.5s ease;
        }
        
        @keyframes collect {
            0% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.2) rotate(10deg); }
            100% { transform: scale(1) rotate(0deg); }
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .game-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        
        .game-card.selected {
            border: 3px solid #10b981;
            transform: scale(0.95);
        }
        
        .game-card.matched {
            background: #10b981 !important;
            animation: matchPulse 0.5s ease;
        }
        
        @keyframes matchPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .star-animation {
            animation: starSpin 2s linear infinite;
        }
        
        @keyframes starSpin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .badge-new {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        
        .badge-collected {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
        }
        
        .emotion-category-happy { background: linear-gradient(135deg, #FFD93D 0%, #FFB347 100%); }
        .emotion-category-sad { background: linear-gradient(135deg, #4682B4 0%, #1E90FF 100%); }
        .emotion-category-angry { background: linear-gradient(135deg, #FF6B6B 0%, #FF4757 100%); }
        .emotion-category-fear { background: linear-gradient(135deg, #6C5CE7 0%, #A29BFE 100%); }
        .emotion-category-surprise { background: linear-gradient(135deg, #FFA502 0%, #FF6348 100%); }
        .emotion-category-love { background: linear-gradient(135deg, #FD79A8 0%, #FDCB6E 100%); }
        
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f0f;
            animation: confetti-fall 3s linear;
            z-index: 1000;
        }
        
        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .progress-bar {
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981 0%, #34d399 100%);
            transition: width 0.5s ease;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50">
    <!-- í—¤ë” -->
    <header class="glass-effect shadow-lg sticky top-0 z-40">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <span class="text-4xl float-animation">ğŸ’</span>
                    <div>
                        <h1 class="title-font text-2xl md:text-3xl text-gray-800">ë””ì§€í„¸ ê°ì • ì¹´ë“œ</h1>
                        <p class="text-sm text-gray-600">ë‹¤ì–‘í•œ ê°ì •ì„ ë°°ìš°ê³  ì´í•´í•´ìš”</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="bg-purple-100 px-4 py-2 rounded-full">
                        <span class="text-purple-700 font-bold">
                            ğŸ† <span id="totalPoints">0</span>ì 
                        </span>
                    </div>
                    <button onclick="window.location.href='../../'" class="px-4 py-2 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition">
                        ğŸ  ë©”ì¸ìœ¼ë¡œ
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="flex justify-center mb-8">
            <div class="glass-effect rounded-full p-1 inline-flex">
                <button onclick="showTab('gallery')" id="galleryTab" class="tab-btn px-6 py-2 rounded-full bg-purple-500 text-white transition">
                    ğŸ“š ê°ì • ê°¤ëŸ¬ë¦¬
                </button>
                <button onclick="showTab('game')" id="gameTab" class="tab-btn px-6 py-2 rounded-full hover:bg-purple-100 transition">
                    ğŸ® ê°ì • ê²Œì„
                </button>
                <button onclick="showTab('create')" id="createTab" class="tab-btn px-6 py-2 rounded-full hover:bg-purple-100 transition">
                    âœï¸ ì¹´ë“œ ë§Œë“¤ê¸°
                </button>
                <button onclick="showTab('collection')" id="collectionTab" class="tab-btn px-6 py-2 rounded-full hover:bg-purple-100 transition">
                    ğŸ† ë‚˜ì˜ ì»¬ë ‰ì…˜
                </button>
            </div>
        </div>

        <!-- ê°ì • ê°¤ëŸ¬ë¦¬ íƒ­ -->
        <div id="galleryContent" class="tab-content">
            <!-- ì¹´í…Œê³ ë¦¬ í•„í„° -->
            <div class="glass-effect rounded-3xl p-6 mb-8">
                <h3 class="font-bold text-lg mb-4 text-gray-800">ğŸ¨ ê°ì • ì¹´í…Œê³ ë¦¬</h3>
                <div class="flex flex-wrap gap-3 justify-center">
                    <button onclick="filterCategory('all')" class="category-btn px-4 py-2 bg-purple-500 text-white rounded-full">
                        ì „ì²´
                    </button>
                    <button onclick="filterCategory('happy')" class="category-btn px-4 py-2 bg-yellow-400 text-white rounded-full">
                        ğŸ˜Š ê¸°ì¨
                    </button>
                    <button onclick="filterCategory('sad')" class="category-btn px-4 py-2 bg-blue-400 text-white rounded-full">
                        ğŸ˜¢ ìŠ¬í””
                    </button>
                    <button onclick="filterCategory('angry')" class="category-btn px-4 py-2 bg-red-400 text-white rounded-full">
                        ğŸ˜  í™”ë‚¨
                    </button>
                    <button onclick="filterCategory('fear')" class="category-btn px-4 py-2 bg-purple-400 text-white rounded-full">
                        ğŸ˜¨ ë‘ë ¤ì›€
                    </button>
                    <button onclick="filterCategory('surprise')" class="category-btn px-4 py-2 bg-orange-400 text-white rounded-full">
                        ğŸ˜² ë†€ëŒ
                    </button>
                    <button onclick="filterCategory('love')" class="category-btn px-4 py-2 bg-pink-400 text-white rounded-full">
                        ğŸ¥° ì‚¬ë‘
                    </button>
                </div>
            </div>

            <!-- ê°ì • ì¹´ë“œ ê·¸ë¦¬ë“œ -->
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" id="emotionCardsGrid">
                <!-- ì¹´ë“œë“¤ì´ JavaScriptë¡œ ë™ì  ìƒì„±ë¨ -->
            </div>
        </div>

        <!-- ê°ì • ê²Œì„ íƒ­ -->
        <div id="gameContent" class="tab-content hidden">
            <div class="glass-effect rounded-3xl p-8">
                <h2 class="title-font text-2xl text-center mb-6 text-gray-800">ğŸ® ê°ì • ë§ì¶”ê¸° ê²Œì„</h2>
                
                <!-- ê²Œì„ ì„ íƒ -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                    <div class="bg-gradient-to-r from-purple-400 to-pink-400 rounded-2xl p-6 text-white text-center cursor-pointer hover:scale-105 transition" onclick="startGame('match')">
                        <div class="text-4xl mb-2">ğŸ¯</div>
                        <h3 class="font-bold text-lg">ê°ì • ë§¤ì¹­</h3>
                        <p class="text-sm mt-2">ì´ëª¨ì§€ì™€ ê°ì • ë‹¨ì–´ ì—°ê²°í•˜ê¸°</p>
                    </div>
                    <div class="bg-gradient-to-r from-blue-400 to-cyan-400 rounded-2xl p-6 text-white text-center cursor-pointer hover:scale-105 transition" onclick="startGame('quiz')">
                        <div class="text-4xl mb-2">â“</div>
                        <h3 class="font-bold text-lg">ê°ì • í€´ì¦ˆ</h3>
                        <p class="text-sm mt-2">ìƒí™© ë³´ê³  ê°ì • ë§ì¶”ê¸°</p>
                    </div>
                    <div class="bg-gradient-to-r from-yellow-400 to-orange-400 rounded-2xl p-6 text-white text-center cursor-pointer hover:scale-105 transition" onclick="startGame('memory')">
                        <div class="text-4xl mb-2">ğŸ§©</div>
                        <h3 class="font-bold text-lg">ê°ì • ë©”ëª¨ë¦¬</h3>
                        <p class="text-sm mt-2">ê°™ì€ ê°ì • ì¹´ë“œ ì°¾ê¸°</p>
                    </div>
                </div>

                <!-- ê²Œì„ ì˜ì—­ -->
                <div id="gameArea" class="hidden">
                    <!-- ê²Œì„ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ë¡œë“œë¨ -->
                </div>
            </div>
        </div>

        <!-- ì¹´ë“œ ë§Œë“¤ê¸° íƒ­ -->
        <div id="createContent" class="tab-content hidden">
            <div class="glass-effect rounded-3xl p-8">
                <h2 class="title-font text-2xl text-center mb-6 text-gray-800">âœï¸ ë‚˜ë§Œì˜ ê°ì • ì¹´ë“œ ë§Œë“¤ê¸°</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- ì…ë ¥ í¼ -->
                    <div>
                        <div class="mb-4">
                            <label class="block text-gray-700 font-bold mb-2">ê°ì • ì´ë¦„</label>
                            <input type="text" id="customEmotionName" class="w-full px-4 py-2 rounded-lg border-2 border-purple-200 focus:border-purple-400 focus:outline-none" placeholder="ì˜ˆ: ì„¤ë ˜">
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-gray-700 font-bold mb-2">ì´ëª¨ì§€ ì„ íƒ</label>
                            <div class="grid grid-cols-6 gap-2">
                                <button onclick="selectEmoji('ğŸ˜Š')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ˜Š</button>
                                <button onclick="selectEmoji('ğŸ˜ƒ')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ˜ƒ</button>
                                <button onclick="selectEmoji('ğŸ˜')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ˜</button>
                                <button onclick="selectEmoji('ğŸ¤—')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ¤—</button>
                                <button onclick="selectEmoji('ğŸ˜')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ˜</button>
                                <button onclick="selectEmoji('ğŸ˜´')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ˜´</button>
                                <button onclick="selectEmoji('ğŸ˜®')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ˜®</button>
                                <button onclick="selectEmoji('ğŸ˜¯')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ˜¯</button>
                                <button onclick="selectEmoji('ğŸ˜¢')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ˜¢</button>
                                <button onclick="selectEmoji('ğŸ˜­')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ˜­</button>
                                <button onclick="selectEmoji('ğŸ˜¡')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ˜¡</button>
                                <button onclick="selectEmoji('ğŸ¤¯')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ¤¯</button>
                            </div>
                            <div class="mt-2">
                                <span class="text-sm text-gray-600">ì„ íƒëœ ì´ëª¨ì§€: </span>
                                <span id="selectedEmoji" class="text-3xl">â“</span>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-gray-700 font-bold mb-2">ìƒ‰ìƒ ì„ íƒ</label>
                            <div class="flex gap-2">
                                <button onclick="selectColor('#FFD93D')" class="w-10 h-10 rounded" style="background: #FFD93D"></button>
                                <button onclick="selectColor('#FF6B6B')" class="w-10 h-10 rounded" style="background: #FF6B6B"></button>
                                <button onclick="selectColor('#4ECDC4')" class="w-10 h-10 rounded" style="background: #4ECDC4"></button>
                                <button onclick="selectColor('#A29BFE')" class="w-10 h-10 rounded" style="background: #A29BFE"></button>
                                <button onclick="selectColor('#FD79A8')" class="w-10 h-10 rounded" style="background: #FD79A8"></button>
                                <button onclick="selectColor('#6C5CE7')" class="w-10 h-10 rounded" style="background: #6C5CE7"></button>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-gray-700 font-bold mb-2">ì„¤ëª…</label>
                            <textarea id="customEmotionDesc" class="w-full px-4 py-2 rounded-lg border-2 border-purple-200 focus:border-purple-400 focus:outline-none resize-none" rows="3" placeholder="ì´ ê°ì •ì€ ì–¸ì œ ëŠë¼ë‚˜ìš”?"></textarea>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-gray-700 font-bold mb-2">ì˜ˆì‹œ ìƒí™©</label>
                            <input type="text" id="customEmotionExample" class="w-full px-4 py-2 rounded-lg border-2 border-purple-200 focus:border-purple-400 focus:outline-none" placeholder="ì˜ˆ: ì„ ë¬¼ì„ ë°›ì•˜ì„ ë•Œ">
                        </div>
                        
                        <button onclick="saveCustomCard()" class="w-full px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold rounded-full hover:scale-105 transition">
                            ğŸ’¾ ì¹´ë“œ ì €ì¥í•˜ê¸°
                        </button>
                    </div>
                    
                    <!-- ë¯¸ë¦¬ë³´ê¸° -->
                    <div>
                        <h3 class="font-bold text-lg mb-4 text-gray-700">ë¯¸ë¦¬ë³´ê¸°</h3>
                        <div class="emotion-card">
                            <div class="emotion-card-inner">
                                <div class="emotion-card-front" id="previewCardFront">
                                    <div class="text-6xl mb-4" id="previewEmoji">â“</div>
                                    <h3 class="text-2xl font-bold" id="previewName">ê°ì • ì´ë¦„</h3>
                                </div>
                                <div class="emotion-card-back">
                                    <h3 class="text-xl font-bold mb-3" id="previewNameBack">ê°ì • ì´ë¦„</h3>
                                    <p class="text-sm mb-3" id="previewDesc">ì„¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
                                    <p class="text-sm text-gray-600" id="previewExample">ì˜ˆì‹œ: -</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ë‚˜ì˜ ì»¬ë ‰ì…˜ íƒ­ -->
        <div id="collectionContent" class="tab-content hidden">
            <div class="glass-effect rounded-3xl p-8">
                <h2 class="title-font text-2xl text-center mb-6 text-gray-800">ğŸ† ë‚˜ì˜ ê°ì • ì¹´ë“œ ì»¬ë ‰ì…˜</h2>
                
                <!-- í†µê³„ -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                    <div class="bg-gradient-to-r from-purple-400 to-pink-400 rounded-2xl p-4 text-white text-center">
                        <div class="text-3xl mb-1">ğŸ“š</div>
                        <div class="text-2xl font-bold" id="totalCards">0</div>
                        <div class="text-sm">ì „ì²´ ì¹´ë“œ</div>
                    </div>
                    <div class="bg-gradient-to-r from-blue-400 to-cyan-400 rounded-2xl p-4 text-white text-center">
                        <div class="text-3xl mb-1">âœ…</div>
                        <div class="text-2xl font-bold" id="collectedCards">0</div>
                        <div class="text-sm">ìˆ˜ì§‘í•œ ì¹´ë“œ</div>
                    </div>
                    <div class="bg-gradient-to-r from-yellow-400 to-orange-400 rounded-2xl p-4 text-white text-center">
                        <div class="text-3xl mb-1">ğŸ¯</div>
                        <div class="text-2xl font-bold" id="completionRate">0%</div>
                        <div class="text-sm">ì™„ì„±ë„</div>
                    </div>
                    <div class="bg-gradient-to-r from-green-400 to-emerald-400 rounded-2xl p-4 text-white text-center">
                        <div class="text-3xl mb-1">âœï¸</div>
                        <div class="text-2xl font-bold" id="customCards">0</div>
                        <div class="text-sm">ë‚´ê°€ ë§Œë“  ì¹´ë“œ</div>
                    </div>
                </div>
                
                <!-- ì§„í–‰ë¥  ë°” -->
                <div class="mb-8">
                    <div class="flex justify-between mb-2">
                        <span class="text-gray-700 font-medium">ì»¬ë ‰ì…˜ ì§„í–‰ë¥ </span>
                        <span class="text-gray-700 font-medium" id="progressText">0/30</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressBar" style="width: 0%"></div>
                    </div>
                </div>
                
                <!-- ìˆ˜ì§‘í•œ ì¹´ë“œ ëª©ë¡ -->
                <div>
                    <h3 class="font-bold text-lg mb-4 text-gray-700">ğŸ“‚ ìˆ˜ì§‘í•œ ì¹´ë“œ</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4" id="collectionGrid">
                        <!-- ìˆ˜ì§‘í•œ ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë¨ -->
                    </div>
                </div>
                
                <!-- ë‚´ê°€ ë§Œë“  ì¹´ë“œ ëª©ë¡ -->
                <div class="mt-8">
                    <h3 class="font-bold text-lg mb-4 text-gray-700">âœ¨ ë‚´ê°€ ë§Œë“  ì¹´ë“œ</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4" id="customCardsGrid">
                        <!-- ì»¤ìŠ¤í…€ ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë¨ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ì„±ê³µ ëª¨ë‹¬ -->
    <div id="successModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-3xl p-8 max-w-sm mx-4 transform scale-0 transition-transform" id="successModalContent">
            <div class="text-center">
                <div class="text-6xl mb-4" id="modalIcon">ğŸ‰</div>
                <h3 class="text-2xl font-bold mb-2" id="modalTitle">ì„±ê³µ!</h3>
                <p class="text-gray-600 mb-4" id="modalMessage">ì˜í–ˆì–´ìš”!</p>
                <button onclick="closeModal()" class="px-6 py-2 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition">
                    í™•ì¸
                </button>
            </div>
        </div>
    </div>

    <script>
        // ê°ì • ì¹´ë“œ ë°ì´í„°
        const emotionCards = [
            // ê¸°ì¨ ì¹´í…Œê³ ë¦¬
            { id: 1, name: 'ê¸°ì¨', emoji: 'ğŸ˜Š', category: 'happy', color: '#FFD93D', desc: 'ë§ˆìŒì´ ì¦ê²ê³  í–‰ë³µí•œ ëŠë‚Œ', example: 'ì¹œêµ¬ì™€ ë†€ ë•Œ' },
            { id: 2, name: 'ì‹ ë‚¨', emoji: 'ğŸ¤—', category: 'happy', color: '#FFD93D', desc: 'ì—ë„ˆì§€ê°€ ë„˜ì¹˜ê³  ë“¤ëœ¬ ê¸°ë¶„', example: 'ì†Œí’ ê°€ëŠ” ë‚ ' },
            { id: 3, name: 'ë§Œì¡±', emoji: 'ğŸ˜Œ', category: 'happy', color: '#FFD93D', desc: 'ë§ˆìŒì´ í¸ì•ˆí•˜ê³  ì¶©ë¶„í•œ ëŠë‚Œ', example: 'ë§›ìˆëŠ” ê±¸ ë¨¹ì—ˆì„ ë•Œ' },
            { id: 4, name: 'ìë‘ìŠ¤ëŸ¬ì›€', emoji: 'ğŸ˜', category: 'happy', color: '#FFD93D', desc: 'ìŠ¤ìŠ¤ë¡œê°€ ëŒ€ê²¬í•œ ëŠë‚Œ', example: 'ì‹œí—˜ì„ ì˜ ë´¤ì„ ë•Œ' },
            { id: 5, name: 'ê°ì‚¬', emoji: 'ğŸ™', category: 'happy', color: '#FFD93D', desc: 'ê³ ë§ˆìš´ ë§ˆìŒ', example: 'ë„ì›€ì„ ë°›ì•˜ì„ ë•Œ' },
            
            // ìŠ¬í”” ì¹´í…Œê³ ë¦¬
            { id: 6, name: 'ìŠ¬í””', emoji: 'ğŸ˜¢', category: 'sad', color: '#4682B4', desc: 'ë§ˆìŒì´ ì•„í”„ê³  ëˆˆë¬¼ì´ ë‚˜ëŠ” ëŠë‚Œ', example: 'ì¹œêµ¬ì™€ í—¤ì–´ì§ˆ ë•Œ' },
            { id: 7, name: 'ì™¸ë¡œì›€', emoji: 'ğŸ˜”', category: 'sad', color: '#4682B4', desc: 'í˜¼ìì¸ ê²ƒ ê°™ì€ ëŠë‚Œ', example: 'ì¹œêµ¬ë“¤ì´ ì—†ì„ ë•Œ' },
            { id: 8, name: 'ì‹¤ë§', emoji: 'ğŸ˜', category: 'sad', color: '#4682B4', desc: 'ê¸°ëŒ€ì™€ ë‹¬ë¼ì„œ ì†ìƒí•œ ëŠë‚Œ', example: 'ì•½ì†ì´ ì·¨ì†Œëì„ ë•Œ' },
            { id: 9, name: 'ê·¸ë¦¬ì›€', emoji: 'ğŸ¥º', category: 'sad', color: '#4682B4', desc: 'ë³´ê³  ì‹¶ì€ ë§ˆìŒ', example: 'ê°€ì¡±ì´ ë³´ê³  ì‹¶ì„ ë•Œ' },
            { id: 10, name: 'í›„íšŒ', emoji: 'ğŸ˜“', category: 'sad', color: '#4682B4', desc: 'ë˜ëŒë¦¬ê³  ì‹¶ì€ ë§ˆìŒ', example: 'ì‹¤ìˆ˜í–ˆì„ ë•Œ' },
            
            // í™”ë‚¨ ì¹´í…Œê³ ë¦¬
            { id: 11, name: 'í™”ë‚¨', emoji: 'ğŸ˜ ', category: 'angry', color: '#FF6B6B', desc: 'ì†ì´ ë¶€ê¸€ë¶€ê¸€ ë“ëŠ” ëŠë‚Œ', example: 'ë¶ˆê³µí‰í•  ë•Œ' },
            { id: 12, name: 'ì§œì¦', emoji: 'ğŸ˜¤', category: 'angry', color: '#FF6B6B', desc: 'ì‹ ê²½ì´ ê±°ìŠ¬ë¦¬ëŠ” ëŠë‚Œ', example: 'ë°©í•´ë°›ì„ ë•Œ' },
            { id: 13, name: 'ë‹µë‹µí•¨', emoji: 'ğŸ˜£', category: 'angry', color: '#FF6B6B', desc: 'ë§‰íŒ ê²ƒ ê°™ì€ ëŠë‚Œ', example: 'ì´í•´ë°›ì§€ ëª»í•  ë•Œ' },
            { id: 14, name: 'ì–µìš¸í•¨', emoji: 'ğŸ˜–', category: 'angry', color: '#FF6B6B', desc: 'ê³µí‰í•˜ì§€ ì•Šë‹¤ê³  ëŠë¼ëŠ” ë§ˆìŒ', example: 'ì˜¤í•´ë°›ì„ ë•Œ' },
            { id: 15, name: 'ë¶„ë…¸', emoji: 'ğŸ¤¬', category: 'angry', color: '#FF6B6B', desc: 'ë§¤ìš° í™”ê°€ ë‚œ ìƒíƒœ', example: 'ê´´ë¡­í˜ì„ ë‹¹í•  ë•Œ' },
            
            // ë‘ë ¤ì›€ ì¹´í…Œê³ ë¦¬
            { id: 16, name: 'ë‘ë ¤ì›€', emoji: 'ğŸ˜¨', category: 'fear', color: '#6C5CE7', desc: 'ë¬´ì„œìš´ ëŠë‚Œ', example: 'ì–´ë‘  ì†ì— ìˆì„ ë•Œ' },
            { id: 17, name: 'ê±±ì •', emoji: 'ğŸ˜Ÿ', category: 'fear', color: '#6C5CE7', desc: 'ë‚˜ìœ ì¼ì´ ìƒê¸¸ê¹Œë´ ë¶ˆì•ˆí•œ ë§ˆìŒ', example: 'ì‹œí—˜ ë³´ê¸° ì „' },
            { id: 18, name: 'ê¸´ì¥', emoji: 'ğŸ˜°', category: 'fear', color: '#6C5CE7', desc: 'ë§ˆìŒì´ ì¡°ë§ˆì¡°ë§ˆí•œ ëŠë‚Œ', example: 'ë°œí‘œí•  ë•Œ' },
            { id: 19, name: 'ë¶ˆì•ˆ', emoji: 'ğŸ˜¥', category: 'fear', color: '#6C5CE7', desc: 'ë§ˆìŒì´ í¸í•˜ì§€ ì•Šì€ ìƒíƒœ', example: 'ìƒˆë¡œìš´ ê³³ì— ê°ˆ ë•Œ' },
            { id: 20, name: 'ì´ˆì¡°í•¨', emoji: 'ğŸ˜¬', category: 'fear', color: '#6C5CE7', desc: 'ë¹¨ë¦¬ í•´ì•¼ í•  ê²ƒ ê°™ì€ ëŠë‚Œ', example: 'ì‹œê°„ì´ ë¶€ì¡±í•  ë•Œ' },
            
            // ë†€ëŒ ì¹´í…Œê³ ë¦¬
            { id: 21, name: 'ë†€ëŒ', emoji: 'ğŸ˜²', category: 'surprise', color: '#FFA502', desc: 'ì˜ˆìƒí•˜ì§€ ëª»í•œ ì¼ì— ê¹œì§ ë†€ë€ ëŠë‚Œ', example: 'ê¹œì§ ì„ ë¬¼ ë°›ì„ ë•Œ' },
            { id: 22, name: 'ì‹ ê¸°í•¨', emoji: 'ğŸ¤”', category: 'surprise', color: '#FFA502', desc: 'ì²˜ìŒ ë³´ëŠ” ê²ƒì— ëŒ€í•œ í˜¸ê¸°ì‹¬', example: 'ìƒˆë¡œìš´ ê²ƒì„ ë°œê²¬í•  ë•Œ' },
            { id: 23, name: 'ë‹¹í™©', emoji: 'ğŸ˜³', category: 'surprise', color: '#FFA502', desc: 'ì–´ë–»ê²Œ í•´ì•¼ í• ì§€ ëª¨ë¥´ëŠ” ëŠë‚Œ', example: 'ê°‘ì‘ìŠ¤ëŸ° ì§ˆë¬¸ì„ ë°›ì„ ë•Œ' },
            { id: 24, name: 'ì¶©ê²©', emoji: 'ğŸ¤¯', category: 'surprise', color: '#FFA502', desc: 'ë§¤ìš° ë†€ë€ ìƒíƒœ', example: 'ë¯¿ê¸° í˜ë“  ì†Œì‹ì„ ë“¤ì„ ë•Œ' },
            { id: 25, name: 'ê°íƒ„', emoji: 'ğŸ˜', category: 'surprise', color: '#FFA502', desc: 'ë§¤ìš° ì¢‹ì•„ì„œ ë†€ë€ ëŠë‚Œ', example: 'ë©‹ì§„ ê²ƒì„ ë³¼ ë•Œ' },
            
            // ì‚¬ë‘ ì¹´í…Œê³ ë¦¬
            { id: 26, name: 'ì‚¬ë‘', emoji: 'ğŸ¥°', category: 'love', color: '#FD79A8', desc: 'ëˆ„êµ°ê°€ë¥¼ ì•„ë¼ëŠ” ë”°ëœ»í•œ ë§ˆìŒ', example: 'ê°€ì¡±ê³¼ í•¨ê»˜ ìˆì„ ë•Œ' },
            { id: 27, name: 'ì„¤ë ˜', emoji: 'ğŸ’•', category: 'love', color: '#FD79A8', desc: 'ë‘ê·¼ë‘ê·¼ ê¸°ëŒ€ë˜ëŠ” ë§ˆìŒ', example: 'ì¢‹ì•„í•˜ëŠ” ì¹œêµ¬ë¥¼ ë§Œë‚  ë•Œ' },
            { id: 28, name: 'ì• ì •', emoji: 'ğŸ’–', category: 'love', color: '#FD79A8', desc: 'ì†Œì¤‘íˆ ì—¬ê¸°ëŠ” ë§ˆìŒ', example: 'ë°˜ë ¤ë™ë¬¼ê³¼ ë†€ ë•Œ' },
            { id: 29, name: 'ì¹œë°€í•¨', emoji: 'ğŸ¤', category: 'love', color: '#FD79A8', desc: 'ê°€ê¹ê³  í¸ì•ˆí•œ ëŠë‚Œ', example: 'ë² ìŠ¤íŠ¸ í”„ë Œë“œì™€ ìˆì„ ë•Œ' },
            { id: 30, name: 'í¬ê·¼í•¨', emoji: 'ğŸ¤—', category: 'love', color: '#FD79A8', desc: 'ë”°ëœ»í•˜ê³  í¸ì•ˆí•œ ëŠë‚Œ', example: 'ì—„ë§ˆ í’ˆì— ì•ˆê¸¸ ë•Œ' }
        ];

        // ì „ì—­ ë³€ìˆ˜
        let collectedCards = JSON.parse(localStorage.getItem('collectedEmotionCards') || '[]');
        let customCards = JSON.parse(localStorage.getItem('customEmotionCards') || '[]');
        let totalPoints = parseInt(localStorage.getItem('emotionCardPoints') || '0');
        let currentCategory = 'all';
        let selectedCustomEmoji = 'â“';
        let selectedCustomColor = '#A29BFE';
        let currentGame = null;

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            renderGallery();
            updateStats();
            updatePointsDisplay();
        });

        // í¬ì¸íŠ¸ í‘œì‹œ ì—…ë°ì´íŠ¸
        function updatePointsDisplay() {
            document.getElementById('totalPoints').textContent = totalPoints;
        }

        // íƒ­ ì „í™˜
        function showTab(tab) {
            // ëª¨ë“  íƒ­ ì»¨í…ì¸  ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // ëª¨ë“  íƒ­ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('bg-purple-500', 'text-white');
                btn.classList.add('hover:bg-purple-100');
            });
            
            // ì„ íƒëœ íƒ­ í‘œì‹œ
            document.getElementById(tab + 'Content').classList.remove('hidden');
            document.getElementById(tab + 'Tab').classList.add('bg-purple-500', 'text-white');
            document.getElementById(tab + 'Tab').classList.remove('hover:bg-purple-100');
            
            // íƒ­ë³„ ì´ˆê¸°í™”
            if (tab === 'collection') {
                renderCollection();
            }
        }

        // ê°¤ëŸ¬ë¦¬ ë Œë”ë§
        function renderGallery() {
            const grid = document.getElementById('emotionCardsGrid');
            const filteredCards = currentCategory === 'all' 
                ? emotionCards 
                : emotionCards.filter(card => card.category === currentCategory);
            
            grid.innerHTML = filteredCards.map(card => {
                const isCollected = collectedCards.includes(card.id);
                return `
                    <div class="emotion-card" onclick="flipCard(this, ${card.id})">
                        <div class="emotion-card-inner">
                            <div class="emotion-card-front" style="background: linear-gradient(135deg, ${card.color} 0%, ${card.color}dd 100%)">
                                <div class="text-5xl mb-3">${card.emoji}</div>
                                <h3 class="text-xl font-bold">${card.name}</h3>
                                ${isCollected ? '<span class="badge badge-collected mt-2">ìˆ˜ì§‘ì™„ë£Œ</span>' : '<span class="badge badge-new mt-2">NEW</span>'}
                            </div>
                            <div class="emotion-card-back">
                                <h3 class="text-xl font-bold mb-3 text-gray-800">${card.name}</h3>
                                <p class="text-sm mb-3 text-gray-600">${card.desc}</p>
                                <p class="text-sm text-gray-500">
                                    <strong>ì˜ˆì‹œ:</strong> ${card.example}
                                </p>
                                ${!isCollected ? '<button onclick="collectCard(event, ' + card.id + ')" class="mt-3 px-4 py-2 bg-purple-500 text-white rounded-full text-sm hover:bg-purple-600">ìˆ˜ì§‘í•˜ê¸°</button>' : ''}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ì¹´ë“œ ë’¤ì§‘ê¸°
        function flipCard(element, cardId) {
            element.classList.toggle('flipped');
        }

        // ì¹´ë“œ ìˆ˜ì§‘
        function collectCard(event, cardId) {
            event.stopPropagation();
            
            if (!collectedCards.includes(cardId)) {
                collectedCards.push(cardId);
                localStorage.setItem('collectedEmotionCards', JSON.stringify(collectedCards));
                
                // í¬ì¸íŠ¸ ì¶”ê°€
                totalPoints += 10;
                localStorage.setItem('emotionCardPoints', totalPoints);
                updatePointsDisplay();
                
                // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
                const card = event.target.closest('.emotion-card');
                card.classList.add('card-collected');
                
                // ì„±ê³µ ë©”ì‹œì§€
                showModal('ğŸ‰', 'ì¹´ë“œ ìˆ˜ì§‘ ì™„ë£Œ!', 'ìƒˆë¡œìš´ ê°ì • ì¹´ë“œë¥¼ ìˆ˜ì§‘í–ˆì–´ìš”! +10ì ');
                createConfetti();
                
                // ê°¤ëŸ¬ë¦¬ ì—…ë°ì´íŠ¸
                setTimeout(() => {
                    renderGallery();
                    updateStats();
                }, 1000);
            }
        }

        // ì¹´í…Œê³ ë¦¬ í•„í„°
        function filterCategory(category) {
            currentCategory = category;
            renderGallery();
            
            // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('ring-4', 'ring-white', 'ring-opacity-50');
            });
            event.target.classList.add('ring-4', 'ring-white', 'ring-opacity-50');
        }

        // ê²Œì„ ì‹œì‘
        function startGame(gameType) {
            const gameArea = document.getElementById('gameArea');
            gameArea.classList.remove('hidden');
            
            if (gameType === 'match') {
                startMatchGame();
            } else if (gameType === 'quiz') {
                startQuizGame();
            } else if (gameType === 'memory') {
                startMemoryGame();
            }
        }

        // ë§¤ì¹­ ê²Œì„
        function startMatchGame() {
            const gameArea = document.getElementById('gameArea');
            const shuffledCards = [...emotionCards].sort(() => Math.random() - 0.5).slice(0, 6);
            
            gameArea.innerHTML = `
                <h3 class="text-xl font-bold mb-4 text-gray-800">ì´ëª¨ì§€ì™€ ê°ì • ë‹¨ì–´ë¥¼ ì—°ê²°í•˜ì„¸ìš”!</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <h4 class="font-bold mb-2">ì´ëª¨ì§€</h4>
                        <div class="space-y-2" id="emojiList">
                            ${shuffledCards.map(card => `
                                <div class="game-card bg-white p-4 rounded-lg text-center text-3xl" data-id="${card.id}">
                                    ${card.emoji}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    <div>
                        <h4 class="font-bold mb-2">ê°ì • ë‹¨ì–´</h4>
                        <div class="space-y-2" id="wordList">
                            ${shuffledCards.sort(() => Math.random() - 0.5).map(card => `
                                <div class="game-card bg-white p-4 rounded-lg text-center font-bold" data-id="${card.id}">
                                    ${card.name}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
                <div class="mt-4 text-center">
                    <span class="text-gray-600">ë§¤ì¹­: <span id="matchCount">0</span>/6</span>
                </div>
            `;
            
            let selectedEmoji = null;
            let selectedWord = null;
            let matches = 0;
            
            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            document.querySelectorAll('#emojiList .game-card').forEach(card => {
                card.addEventListener('click', function() {
                    if (selectedEmoji) selectedEmoji.classList.remove('selected');
                    selectedEmoji = this;
                    this.classList.add('selected');
                    checkMatch();
                });
            });
            
            document.querySelectorAll('#wordList .game-card').forEach(card => {
                card.addEventListener('click', function() {
                    if (selectedWord) selectedWord.classList.remove('selected');
                    selectedWord = this;
                    this.classList.add('selected');
                    checkMatch();
                });
            });
            
            function checkMatch() {
                if (selectedEmoji && selectedWord) {
                    if (selectedEmoji.dataset.id === selectedWord.dataset.id) {
                        selectedEmoji.classList.add('matched');
                        selectedWord.classList.add('matched');
                        matches++;
                        document.getElementById('matchCount').textContent = matches;
                        
                        if (matches === 6) {
                            totalPoints += 30;
                            localStorage.setItem('emotionCardPoints', totalPoints);
                            updatePointsDisplay();
                            showModal('ğŸ†', 'ê²Œì„ ì™„ë£Œ!', 'ëª¨ë“  ì¹´ë“œë¥¼ ë§¤ì¹­í–ˆì–´ìš”! +30ì ');
                        }
                        
                        selectedEmoji = null;
                        selectedWord = null;
                    } else {
                        setTimeout(() => {
                            selectedEmoji.classList.remove('selected');
                            selectedWord.classList.remove('selected');
                            selectedEmoji = null;
                            selectedWord = null;
                        }, 1000);
                    }
                }
            }
        }

        // í€´ì¦ˆ ê²Œì„
        function startQuizGame() {
            const gameArea = document.getElementById('gameArea');
            const questions = [
                { 
                    question: 'ì¹œêµ¬ê°€ ìƒì¼ ì„ ë¬¼ì„ ì¤¬ì„ ë•Œ ëŠë¼ëŠ” ê°ì •ì€?',
                    options: ['ê¸°ì¨', 'ìŠ¬í””', 'í™”ë‚¨', 'ë‘ë ¤ì›€'],
                    answer: 'ê¸°ì¨'
                },
                {
                    question: 'ì‹œí—˜ì„ ë§ì³¤ì„ ë•Œ ëŠë¼ëŠ” ê°ì •ì€?',
                    options: ['ì‹ ë‚¨', 'ì‹¤ë§', 'ê°ì‚¬', 'ì„¤ë ˜'],
                    answer: 'ì‹¤ë§'
                },
                {
                    question: 'ì–´ë‘ìš´ ë°©ì— í˜¼ì ìˆì„ ë•Œ ëŠë¼ëŠ” ê°ì •ì€?',
                    options: ['ë§Œì¡±', 'ìë‘ìŠ¤ëŸ¬ì›€', 'ë‘ë ¤ì›€', 'ì• ì •'],
                    answer: 'ë‘ë ¤ì›€'
                }
            ];
            
            let currentQuestion = 0;
            let score = 0;
            
            function showQuestion() {
                const q = questions[currentQuestion];
                gameArea.innerHTML = `
                    <h3 class="text-xl font-bold mb-4 text-gray-800">ê°ì • í€´ì¦ˆ (${currentQuestion + 1}/${questions.length})</h3>
                    <div class="bg-white rounded-2xl p-6">
                        <p class="text-lg mb-4">${q.question}</p>
                        <div class="grid grid-cols-2 gap-3">
                            ${q.options.map(option => `
                                <button onclick="checkAnswer('${option}')" class="px-4 py-3 bg-purple-100 hover:bg-purple-200 rounded-lg font-medium transition">
                                    ${option}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                    <div class="mt-4 text-center">
                        <span class="text-gray-600">ì ìˆ˜: ${score}ì </span>
                    </div>
                `;
            }
            
            window.checkAnswer = function(answer) {
                if (answer === questions[currentQuestion].answer) {
                    score += 10;
                    showModal('âœ…', 'ì •ë‹µ!', 'ì˜í–ˆì–´ìš”! +10ì ');
                } else {
                    showModal('âŒ', 'í‹€ë ¸ì–´ìš”', `ì •ë‹µì€ "${questions[currentQuestion].answer}"ì…ë‹ˆë‹¤`);
                }
                
                currentQuestion++;
                if (currentQuestion < questions.length) {
                    setTimeout(showQuestion, 2000);
                } else {
                    totalPoints += score;
                    localStorage.setItem('emotionCardPoints', totalPoints);
                    updatePointsDisplay();
                    showModal('ğŸŠ', 'í€´ì¦ˆ ì™„ë£Œ!', `ì´ ${score}ì ì„ íšë“í–ˆì–´ìš”!`);
                }
            };
            
            showQuestion();
        }

        // ë©”ëª¨ë¦¬ ê²Œì„
        function startMemoryGame() {
            const gameArea = document.getElementById('gameArea');
            const memoryCards = emotionCards.slice(0, 6);
            const gameCards = [...memoryCards, ...memoryCards].sort(() => Math.random() - 0.5);
            
            gameArea.innerHTML = `
                <h3 class="text-xl font-bold mb-4 text-gray-800">ê°™ì€ ê°ì • ì¹´ë“œë¥¼ ì°¾ì•„ì£¼ì„¸ìš”!</h3>
                <div class="grid grid-cols-4 gap-3">
                    ${gameCards.map((card, index) => `
                        <div class="memory-card bg-purple-500 rounded-lg p-8 text-center cursor-pointer" data-id="${card.id}" data-index="${index}" onclick="flipMemoryCard(this)">
                            <div class="card-content hidden">
                                <div class="text-3xl">${card.emoji}</div>
                                <div class="text-sm font-bold text-white mt-1">${card.name}</div>
                            </div>
                            <div class="card-back text-3xl text-white">?</div>
                        </div>
                    `).join('')}
                </div>
                <div class="mt-4 text-center">
                    <span class="text-gray-600">ì°¾ì€ ìŒ: <span id="pairCount">0</span>/6</span>
                </div>
            `;
            
            let flippedCards = [];
            let matchedPairs = 0;
            
            window.flipMemoryCard = function(card) {
                if (flippedCards.length < 2 && !card.classList.contains('matched')) {
                    card.querySelector('.card-content').classList.remove('hidden');
                    card.querySelector('.card-back').classList.add('hidden');
                    flippedCards.push(card);
                    
                    if (flippedCards.length === 2) {
                        if (flippedCards[0].dataset.id === flippedCards[1].dataset.id) {
                            flippedCards.forEach(c => c.classList.add('matched'));
                            matchedPairs++;
                            document.getElementById('pairCount').textContent = matchedPairs;
                            
                            if (matchedPairs === 6) {
                                totalPoints += 50;
                                localStorage.setItem('emotionCardPoints', totalPoints);
                                updatePointsDisplay();
                                showModal('ğŸ†', 'ê²Œì„ ì™„ë£Œ!', 'ëª¨ë“  ìŒì„ ì°¾ì•˜ì–´ìš”! +50ì ');
                            }
                            
                            flippedCards = [];
                        } else {
                            setTimeout(() => {
                                flippedCards.forEach(c => {
                                    c.querySelector('.card-content').classList.add('hidden');
                                    c.querySelector('.card-back').classList.remove('hidden');
                                });
                                flippedCards = [];
                            }, 1000);
                        }
                    }
                }
            };
        }

        // ì»¤ìŠ¤í…€ ì¹´ë“œ ê´€ë ¨ í•¨ìˆ˜
        function selectEmoji(emoji) {
            selectedCustomEmoji = emoji;
            document.getElementById('selectedEmoji').textContent = emoji;
            document.getElementById('previewEmoji').textContent = emoji;
        }

        function selectColor(color) {
            selectedCustomColor = color;
            document.getElementById('previewCardFront').style.background = `linear-gradient(135deg, ${color} 0%, ${color}dd 100%)`;
        }

        // ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
        document.getElementById('customEmotionName').addEventListener('input', function() {
            document.getElementById('previewName').textContent = this.value || 'ê°ì • ì´ë¦„';
            document.getElementById('previewNameBack').textContent = this.value || 'ê°ì • ì´ë¦„';
        });

        document.getElementById('customEmotionDesc').addEventListener('input', function() {
            document.getElementById('previewDesc').textContent = this.value || 'ì„¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”';
        });

        document.getElementById('customEmotionExample').addEventListener('input', function() {
            document.getElementById('previewExample').textContent = 'ì˜ˆì‹œ: ' + (this.value || '-');
        });

        // ì»¤ìŠ¤í…€ ì¹´ë“œ ì €ì¥
        function saveCustomCard() {
            const name = document.getElementById('customEmotionName').value.trim();
            const desc = document.getElementById('customEmotionDesc').value.trim();
            const example = document.getElementById('customEmotionExample').value.trim();
            
            if (!name) {
                alert('ê°ì • ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            if (!desc) {
                alert('ì„¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            const newCard = {
                id: 'custom_' + Date.now(),
                name: name,
                emoji: selectedCustomEmoji,
                color: selectedCustomColor,
                desc: desc,
                example: example || 'ì§ì ‘ ê²½í—˜í•´ë³´ì„¸ìš”',
                createdAt: new Date().toISOString()
            };
            
            customCards.push(newCard);
            localStorage.setItem('customEmotionCards', JSON.stringify(customCards));
            
            // í¬ì¸íŠ¸ ì¶”ê°€
            totalPoints += 20;
            localStorage.setItem('emotionCardPoints', totalPoints);
            updatePointsDisplay();
            
            // ì„±ê³µ ë©”ì‹œì§€
            showModal('âœ¨', 'ì¹´ë“œ ìƒì„± ì™„ë£Œ!', `"${name}" ì¹´ë“œë¥¼ ë§Œë“¤ì—ˆì–´ìš”! +20ì `);
            createConfetti();
            
            // í¼ ì´ˆê¸°í™”
            document.getElementById('customEmotionName').value = '';
            document.getElementById('customEmotionDesc').value = '';
            document.getElementById('customEmotionExample').value = '';
            selectedCustomEmoji = 'â“';
            selectedCustomColor = '#A29BFE';
            document.getElementById('selectedEmoji').textContent = 'â“';
            document.getElementById('previewEmoji').textContent = 'â“';
            document.getElementById('previewName').textContent = 'ê°ì • ì´ë¦„';
            document.getElementById('previewNameBack').textContent = 'ê°ì • ì´ë¦„';
            document.getElementById('previewDesc').textContent = 'ì„¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”';
            document.getElementById('previewExample').textContent = 'ì˜ˆì‹œ: -';
            document.getElementById('previewCardFront').style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            
            updateStats();
        }

        // ì»¬ë ‰ì…˜ ë Œë”ë§
        function renderCollection() {
            // ìˆ˜ì§‘í•œ ì¹´ë“œ
            const collectionGrid = document.getElementById('collectionGrid');
            if (collectedCards.length > 0) {
                collectionGrid.innerHTML = collectedCards.map(cardId => {
                    const card = emotionCards.find(c => c.id === cardId);
                    return `
                        <div class="bg-white rounded-xl p-4 text-center shadow-lg">
                            <div class="text-3xl mb-2">${card.emoji}</div>
                            <div class="font-bold text-sm">${card.name}</div>
                        </div>
                    `;
                }).join('');
            } else {
                collectionGrid.innerHTML = '<p class="text-gray-500 col-span-4">ì•„ì§ ìˆ˜ì§‘í•œ ì¹´ë“œê°€ ì—†ì–´ìš”</p>';
            }
            
            // ì»¤ìŠ¤í…€ ì¹´ë“œ
            const customGrid = document.getElementById('customCardsGrid');
            if (customCards.length > 0) {
                customGrid.innerHTML = customCards.map(card => `
                    <div class="bg-white rounded-xl p-4 text-center shadow-lg" style="background: linear-gradient(135deg, ${card.color}22 0%, ${card.color}44 100%)">
                        <div class="text-3xl mb-2">${card.emoji}</div>
                        <div class="font-bold text-sm">${card.name}</div>
                    </div>
                `).join('');
            } else {
                customGrid.innerHTML = '<p class="text-gray-500 col-span-4">ì•„ì§ ë§Œë“  ì¹´ë“œê°€ ì—†ì–´ìš”</p>';
            }
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            const total = emotionCards.length;
            const collected = collectedCards.length;
            const completion = Math.round((collected / total) * 100);
            
            document.getElementById('totalCards').textContent = total;
            document.getElementById('collectedCards').textContent = collected;
            document.getElementById('completionRate').textContent = completion + '%';
            document.getElementById('customCards').textContent = customCards.length;
            document.getElementById('progressText').textContent = `${collected}/${total}`;
            document.getElementById('progressBar').style.width = completion + '%';
        }

        // ëª¨ë‹¬ í‘œì‹œ
        function showModal(icon, title, message) {
            const modal = document.getElementById('successModal');
            const content = document.getElementById('successModalContent');
            
            document.getElementById('modalIcon').textContent = icon;
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalMessage').textContent = message;
            
            modal.classList.remove('hidden');
            setTimeout(() => {
                content.style.transform = 'scale(1)';
            }, 100);
            
            setTimeout(() => {
                closeModal();
            }, 2000);
        }

        // ëª¨ë‹¬ ë‹«ê¸°
        function closeModal() {
            const modal = document.getElementById('successModal');
            const content = document.getElementById('successModalContent');
            content.style.transform = 'scale(0)';
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        // ìƒ‰ì¢…ì´ íš¨ê³¼
        function createConfetti() {
            const colors = ['#FFD93D', '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4'];
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    document.body.appendChild(confetti);
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 50);
            }
        }
    </script>
</body>
</html>