<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’ ë””ì§€í„¸ ê°ì • ì¹´ë“œ - ë‹¤ì–‘í•œ ê°ì • ì•Œì•„ë³´ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .title-font {
            font-family: 'Jua', sans-serif;
        }
        
        .emotion-card {
            perspective: 1000px;
            height: 280px;
            cursor: pointer;
        }
        
        .emotion-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .emotion-card.flipped .emotion-card-inner {
            transform: rotateY(180deg);
        }
        
        .emotion-card-front, .emotion-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .emotion-card-front {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .emotion-card-back {
            background: white;
            transform: rotateY(180deg);
            color: #333;
        }
        
        .card-collected {
            animation: collect 0.5s ease;
        }
        
        @keyframes collect {
            0% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.2) rotate(10deg); }
            100% { transform: scale(1) rotate(0deg); }
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        /* ê°œì„ ëœ ê²Œì„ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .game-card {
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .game-card:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            z-index: 10;
        }
        
        .game-card.selected {
            border: 3px solid #10b981;
            background: #10b981 !important;
            color: white;
            transform: scale(0.95);
        }
        
        .game-card.matched {
            background: #10b981 !important;
            color: white;
            animation: matchPulse 0.5s ease;
        }
        
        .game-card.incorrect {
            animation: shake 0.5s ease;
            background: #ef4444 !important;
            color: white;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        @keyframes matchPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        /* ìƒí™© ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .situation-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 30px;
            color: white;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }
        
        .emotion-choice-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .emotion-choice-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            border-color: #9333ea;
        }
        
        .emotion-choice-card.selected {
            background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            color: white;
            transform: scale(0.95);
        }
        
        /* ë¹™ê³  ìŠ¤íƒ€ì¼ */
        .bingo-cell {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 10px;
        }
        
        .bingo-cell:hover:not(.checked) {
            background: #f3f4f6;
            transform: scale(1.05);
        }
        
        .bingo-cell.checked {
            background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            color: white;
            animation: checkAnimation 0.5s ease;
        }
        
        .bingo-cell.center {
            background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
            color: white;
            cursor: default;
        }
        
        @keyframes checkAnimation {
            0% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.2) rotate(10deg); }
            100% { transform: scale(1) rotate(0deg); }
        }
        
        .star-animation {
            animation: starSpin 2s linear infinite;
        }
        
        @keyframes starSpin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .badge-new {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        
        .badge-collected {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
        }
        
        .emotion-category-happy { background: linear-gradient(135deg, #FFD93D 0%, #FFB347 100%); }
        .emotion-category-sad { background: linear-gradient(135deg, #4682B4 0%, #1E90FF 100%); }
        .emotion-category-angry { background: linear-gradient(135deg, #FF6B6B 0%, #FF4757 100%); }
        .emotion-category-fear { background: linear-gradient(135deg, #6C5CE7 0%, #A29BFE 100%); }
        .emotion-category-surprise { background: linear-gradient(135deg, #FFA502 0%, #FF6348 100%); }
        .emotion-category-love { background: linear-gradient(135deg, #FD79A8 0%, #FDCB6E 100%); }
        
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f0f;
            animation: confetti-fall 3s linear;
            z-index: 1000;
        }
        
        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .progress-bar {
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981 0%, #34d399 100%);
            transition: width 0.5s ease;
        }
        
        .user-profile {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            color: white;
        }
        
        .avatar-selector {
            display: inline-block;
            padding: 8px;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s;
        }
        
        .avatar-selector:hover {
            background: rgba(147, 51, 234, 0.1);
            transform: scale(1.1);
        }
        
        .avatar-selector.selected {
            background: rgba(147, 51, 234, 0.2);
            border: 2px solid #9333ea;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50">
    <!-- í—¤ë” -->
    <header class="glass-effect shadow-lg sticky top-0 z-40">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <span class="text-4xl float-animation">ğŸ’</span>
                    <div>
                        <h1 class="title-font text-2xl md:text-3xl text-gray-800">ë””ì§€í„¸ ê°ì • ì¹´ë“œ</h1>
                        <p class="text-sm text-gray-600">ë‹¤ì–‘í•œ ê°ì •ì„ ë°°ìš°ê³  ì´í•´í•´ìš”</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <!-- ì‚¬ìš©ì í”„ë¡œí•„ í‘œì‹œ -->
                    <div id="userProfile" class="hidden user-profile">
                        <span id="userAvatar" class="text-2xl">ğŸ¦</span>
                        <span id="userName" class="font-bold">í•™ìƒ</span>
                    </div>
                    <div class="bg-purple-100 px-4 py-2 rounded-full">
                        <span class="text-purple-700 font-bold">
                            ğŸ† <span id="totalPoints">0</span>ì 
                        </span>
                    </div>
                    <button onclick="showDataMenu()" class="px-4 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition">
                        ğŸ’¾ ë°ì´í„°
                    </button>
                    <button onclick="window.location.href='../../'" class="px-4 py-2 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition">
                        ğŸ  ë©”ì¸ìœ¼ë¡œ
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="flex justify-center mb-8">
            <div class="glass-effect rounded-full p-1 inline-flex">
                <button onclick="showTab('gallery')" id="galleryTab" class="tab-btn px-6 py-2 rounded-full bg-purple-500 text-white transition">
                    ğŸ“š ê°ì • ê°¤ëŸ¬ë¦¬
                </button>
                <button onclick="showTab('game')" id="gameTab" class="tab-btn px-6 py-2 rounded-full hover:bg-purple-100 transition">
                    ğŸ® ê°ì • ê²Œì„
                </button>
                <button onclick="showTab('create')" id="createTab" class="tab-btn px-6 py-2 rounded-full hover:bg-purple-100 transition">
                    âœï¸ ì¹´ë“œ ë§Œë“¤ê¸°
                </button>
                <button onclick="showTab('collection')" id="collectionTab" class="tab-btn px-6 py-2 rounded-full hover:bg-purple-100 transition">
                    ğŸ† ë‚˜ì˜ ì»¬ë ‰ì…˜
                </button>
            </div>
        </div>

        <!-- ê°ì • ê°¤ëŸ¬ë¦¬ íƒ­ -->
        <div id="galleryContent" class="tab-content">
            <!-- ì¹´í…Œê³ ë¦¬ í•„í„° -->
            <div class="glass-effect rounded-3xl p-6 mb-8">
                <h3 class="font-bold text-lg mb-4 text-gray-800">ğŸ¨ ê°ì • ì¹´í…Œê³ ë¦¬</h3>
                <div class="flex flex-wrap gap-3 justify-center">
                    <button onclick="filterCategory('all')" class="category-btn px-4 py-2 bg-purple-500 text-white rounded-full">
                        ì „ì²´
                    </button>
                    <button onclick="filterCategory('happy')" class="category-btn px-4 py-2 bg-yellow-400 text-white rounded-full">
                        ğŸ˜Š ê¸°ì¨
                    </button>
                    <button onclick="filterCategory('sad')" class="category-btn px-4 py-2 bg-blue-400 text-white rounded-full">
                        ğŸ˜¢ ìŠ¬í””
                    </button>
                    <button onclick="filterCategory('angry')" class="category-btn px-4 py-2 bg-red-400 text-white rounded-full">
                        ğŸ˜  í™”ë‚¨
                    </button>
                    <button onclick="filterCategory('fear')" class="category-btn px-4 py-2 bg-purple-400 text-white rounded-full">
                        ğŸ˜¨ ë‘ë ¤ì›€
                    </button>
                    <button onclick="filterCategory('surprise')" class="category-btn px-4 py-2 bg-orange-400 text-white rounded-full">
                        ğŸ˜² ë†€ëŒ
                    </button>
                    <button onclick="filterCategory('love')" class="category-btn px-4 py-2 bg-pink-400 text-white rounded-full">
                        ğŸ¥° ì‚¬ë‘
                    </button>
                </div>
            </div>

            <!-- ê°ì • ì¹´ë“œ ê·¸ë¦¬ë“œ -->
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" id="emotionCardsGrid">
                <!-- ì¹´ë“œë“¤ì´ JavaScriptë¡œ ë™ì  ìƒì„±ë¨ -->
            </div>
        </div>

        <!-- ê°ì • ê²Œì„ íƒ­ -->
        <div id="gameContent" class="tab-content hidden">
            <div class="glass-effect rounded-3xl p-8">
                <h2 class="title-font text-2xl text-center mb-6 text-gray-800">ğŸ® ê°ì • ë§ì¶”ê¸° ê²Œì„</h2>
                
                <!-- ê²Œì„ ì„ íƒ -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                    <div class="bg-gradient-to-r from-purple-400 to-pink-400 rounded-2xl p-6 text-white text-center cursor-pointer hover:scale-105 transition" onclick="startGame('situation')">
                        <div class="text-4xl mb-2">ğŸ“–</div>
                        <h3 class="font-bold text-lg">ìƒí™© ê°ì • ì°¾ê¸°</h3>
                        <p class="text-sm mt-2">ìƒí™©ì„ ë³´ê³  ê°ì • ë§ì¶”ê¸°</p>
                    </div>
                    <div class="bg-gradient-to-r from-blue-400 to-cyan-400 rounded-2xl p-6 text-white text-center cursor-pointer hover:scale-105 transition" onclick="startGame('detective')">
                        <div class="text-4xl mb-2">ğŸ”</div>
                        <h3 class="font-bold text-lg">ê°ì • íƒì •</h3>
                        <p class="text-sm mt-2">ë‹¨ì„œë¥¼ ë³´ê³  ê°ì • ì¶”ë¦¬</p>
                    </div>
                    <div class="bg-gradient-to-r from-yellow-400 to-orange-400 rounded-2xl p-6 text-white text-center cursor-pointer hover:scale-105 transition" onclick="startGame('bingo')">
                        <div class="text-4xl mb-2">ğŸ¯</div>
                        <h3 class="font-bold text-lg">ê°ì • ë¹™ê³ </h3>
                        <p class="text-sm mt-2">ì˜¤ëŠ˜ ëŠë‚€ ê°ì •ìœ¼ë¡œ ë¹™ê³ </p>
                    </div>
                    <div class="bg-gradient-to-r from-green-400 to-emerald-400 rounded-2xl p-6 text-white text-center cursor-pointer hover:scale-105 transition" onclick="startGame('memory')">
                        <div class="text-4xl mb-2">ğŸ§©</div>
                        <h3 class="font-bold text-lg">ê°ì • ë©”ëª¨ë¦¬</h3>
                        <p class="text-sm mt-2">ê°™ì€ ê°ì • ì¹´ë“œ ì°¾ê¸°</p>
                    </div>
                </div>

                <!-- ê²Œì„ ì˜ì—­ -->
                <div id="gameArea" class="hidden">
                    <!-- ê²Œì„ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ë¡œë“œë¨ -->
                </div>
            </div>
        </div>

        <!-- ì¹´ë“œ ë§Œë“¤ê¸° íƒ­ -->
        <div id="createContent" class="tab-content hidden">
            <div class="glass-effect rounded-3xl p-8">
                <h2 class="title-font text-2xl text-center mb-6 text-gray-800">âœï¸ ë‚˜ë§Œì˜ ê°ì • ì¹´ë“œ ë§Œë“¤ê¸°</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- ì…ë ¥ í¼ -->
                    <div>
                        <div class="mb-4">
                            <label class="block text-gray-700 font-bold mb-2">ê°ì • ì´ë¦„</label>
                            <input type="text" id="customEmotionName" class="w-full px-4 py-2 rounded-lg border-2 border-purple-200 focus:border-purple-400 focus:outline-none" placeholder="ì˜ˆ: ì„¤ë ˜">
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-gray-700 font-bold mb-2">ì´ëª¨ì§€ ì„ íƒ</label>
                            <div class="grid grid-cols-6 gap-2">
                                <button onclick="selectEmoji('ğŸ˜Š')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ˜Š</button>
                                <button onclick="selectEmoji('ğŸ˜ƒ')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ˜ƒ</button>
                                <button onclick="selectEmoji('ğŸ˜')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ˜</button>
                                <button onclick="selectEmoji('ğŸ¤—')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ¤—</button>
                                <button onclick="selectEmoji('ğŸ˜')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ˜</button>
                                <button onclick="selectEmoji('ğŸ˜´')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ˜´</button>
                                <button onclick="selectEmoji('ğŸ˜®')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ˜®</button>
                                <button onclick="selectEmoji('ğŸ˜¯')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ˜¯</button>
                                <button onclick="selectEmoji('ğŸ˜¢')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ˜¢</button>
                                <button onclick="selectEmoji('ğŸ˜­')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ˜­</button>
                                <button onclick="selectEmoji('ğŸ˜¡')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ˜¡</button>
                                <button onclick="selectEmoji('ğŸ¤¯')" class="emoji-btn text-3xl p-2 hover:bg-purple-100 rounded">ğŸ¤¯</button>
                            </div>
                            <div class="mt-2">
                                <span class="text-sm text-gray-600">ì„ íƒëœ ì´ëª¨ì§€: </span>
                                <span id="selectedEmoji" class="text-3xl">â“</span>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-gray-700 font-bold mb-2">ìƒ‰ìƒ ì„ íƒ</label>
                            <div class="flex gap-2">
                                <button onclick="selectColor('#FFD93D')" class="w-10 h-10 rounded" style="background: #FFD93D"></button>
                                <button onclick="selectColor('#FF6B6B')" class="w-10 h-10 rounded" style="background: #FF6B6B"></button>
                                <button onclick="selectColor('#4ECDC4')" class="w-10 h-10 rounded" style="background: #4ECDC4"></button>
                                <button onclick="selectColor('#A29BFE')" class="w-10 h-10 rounded" style="background: #A29BFE"></button>
                                <button onclick="selectColor('#FD79A8')" class="w-10 h-10 rounded" style="background: #FD79A8"></button>
                                <button onclick="selectColor('#6C5CE7')" class="w-10 h-10 rounded" style="background: #6C5CE7"></button>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-gray-700 font-bold mb-2">ì„¤ëª…</label>
                            <textarea id="customEmotionDesc" class="w-full px-4 py-2 rounded-lg border-2 border-purple-200 focus:border-purple-400 focus:outline-none resize-none" rows="3" placeholder="ì´ ê°ì •ì€ ì–¸ì œ ëŠë¼ë‚˜ìš”?"></textarea>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-gray-700 font-bold mb-2">ì˜ˆì‹œ ìƒí™©</label>
                            <input type="text" id="customEmotionExample" class="w-full px-4 py-2 rounded-lg border-2 border-purple-200 focus:border-purple-400 focus:outline-none" placeholder="ì˜ˆ: ì„ ë¬¼ì„ ë°›ì•˜ì„ ë•Œ">
                        </div>
                        
                        <button onclick="saveCustomCard()" class="w-full px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold rounded-full hover:scale-105 transition">
                            ğŸ’¾ ì¹´ë“œ ì €ì¥í•˜ê¸°
                        </button>
                    </div>
                    
                    <!-- ë¯¸ë¦¬ë³´ê¸° -->
                    <div>
                        <h3 class="font-bold text-lg mb-4 text-gray-700">ë¯¸ë¦¬ë³´ê¸°</h3>
                        <div class="emotion-card">
                            <div class="emotion-card-inner">
                                <div class="emotion-card-front" id="previewCardFront">
                                    <div class="text-6xl mb-4" id="previewEmoji">â“</div>
                                    <h3 class="text-2xl font-bold" id="previewName">ê°ì • ì´ë¦„</h3>
                                </div>
                                <div class="emotion-card-back">
                                    <h3 class="text-xl font-bold mb-3" id="previewNameBack">ê°ì • ì´ë¦„</h3>
                                    <p class="text-sm mb-3" id="previewDesc">ì„¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
                                    <p class="text-sm text-gray-600" id="previewExample">ì˜ˆì‹œ: -</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ë‚˜ì˜ ì»¬ë ‰ì…˜ íƒ­ -->
        <div id="collectionContent" class="tab-content hidden">
            <div class="glass-effect rounded-3xl p-8">
                <h2 class="title-font text-2xl text-center mb-6 text-gray-800">ğŸ† ë‚˜ì˜ ê°ì • ì¹´ë“œ ì»¬ë ‰ì…˜</h2>
                
                <!-- ë°ì´í„° ê´€ë¦¬ ë²„íŠ¼ -->
                <div class="flex justify-center gap-3 mb-6">
                    <button onclick="exportLearningData()" class="px-4 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition">
                        ğŸ“¥ í•™ìŠµ ê¸°ë¡ ë‹¤ìš´ë¡œë“œ (JSON)
                    </button>
                    <button onclick="generateVisualReport()" class="px-4 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition">
                        ğŸ–¼ï¸ ì„±ê³¼ ë¦¬í¬íŠ¸ ì´ë¯¸ì§€
                    </button>
                    <button onclick="document.getElementById('importFile').click()" class="px-4 py-2 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition">
                        ğŸ“¤ í•™ìŠµ ê¸°ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
                    </button>
                    <input type="file" id="importFile" hidden accept=".json" onchange="importLearningData(this.files[0])">
                </div>
                
                <!-- í†µê³„ -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                    <div class="bg-gradient-to-r from-purple-400 to-pink-400 rounded-2xl p-4 text-white text-center">
                        <div class="text-3xl mb-1">ğŸ“š</div>
                        <div class="text-2xl font-bold" id="totalCards">0</div>
                        <div class="text-sm">ì „ì²´ ì¹´ë“œ</div>
                    </div>
                    <div class="bg-gradient-to-r from-blue-400 to-cyan-400 rounded-2xl p-4 text-white text-center">
                        <div class="text-3xl mb-1">âœ…</div>
                        <div class="text-2xl font-bold" id="collectedCards">0</div>
                        <div class="text-sm">ìˆ˜ì§‘í•œ ì¹´ë“œ</div>
                    </div>
                    <div class="bg-gradient-to-r from-yellow-400 to-orange-400 rounded-2xl p-4 text-white text-center">
                        <div class="text-3xl mb-1">ğŸ¯</div>
                        <div class="text-2xl font-bold" id="completionRate">0%</div>
                        <div class="text-sm">ì™„ì„±ë„</div>
                    </div>
                    <div class="bg-gradient-to-r from-green-400 to-emerald-400 rounded-2xl p-4 text-white text-center">
                        <div class="text-3xl mb-1">âœï¸</div>
                        <div class="text-2xl font-bold" id="customCards">0</div>
                        <div class="text-sm">ë‚´ê°€ ë§Œë“  ì¹´ë“œ</div>
                    </div>
                </div>
                
                <!-- ì§„í–‰ë¥  ë°” -->
                <div class="mb-8">
                    <div class="flex justify-between mb-2">
                        <span class="text-gray-700 font-medium">ì»¬ë ‰ì…˜ ì§„í–‰ë¥ </span>
                        <span class="text-gray-700 font-medium" id="progressText">0/30</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressBar" style="width: 0%"></div>
                    </div>
                </div>
                
                <!-- ìˆ˜ì§‘í•œ ì¹´ë“œ ëª©ë¡ -->
                <div>
                    <h3 class="font-bold text-lg mb-4 text-gray-700">ğŸ“‚ ìˆ˜ì§‘í•œ ì¹´ë“œ</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4" id="collectionGrid">
                        <!-- ìˆ˜ì§‘í•œ ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë¨ -->
                    </div>
                </div>
                
                <!-- ë‚´ê°€ ë§Œë“  ì¹´ë“œ ëª©ë¡ -->
                <div class="mt-8">
                    <h3 class="font-bold text-lg mb-4 text-gray-700">âœ¨ ë‚´ê°€ ë§Œë“  ì¹´ë“œ</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4" id="customCardsGrid">
                        <!-- ì»¤ìŠ¤í…€ ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë¨ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ì‚¬ìš©ì í”„ë¡œí•„ ëª¨ë‹¬ -->
    <div id="profileModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-3xl p-8 max-w-md mx-4">
            <h3 class="text-2xl font-bold mb-4 text-center">ğŸ‘‹ ì•ˆë…•í•˜ì„¸ìš”!</h3>
            <div class="mb-4">
                <label class="block text-gray-700 font-bold mb-2">ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</label>
                <input type="text" id="profileNameInput" class="w-full px-4 py-2 rounded-lg border-2 border-purple-200 focus:border-purple-400 focus:outline-none" placeholder="ì˜ˆ: ê¹€í•™ìƒ">
            </div>
            <div class="mb-4">
                <label class="block text-gray-700 font-bold mb-2">í•™ê¸‰</label>
                <input type="text" id="profileClassInput" class="w-full px-4 py-2 rounded-lg border-2 border-purple-200 focus:border-purple-400 focus:outline-none" placeholder="ì˜ˆ: 3í•™ë…„ 2ë°˜">
            </div>
            <div class="mb-4">
                <label class="block text-gray-700 font-bold mb-2">ì•„ë°”íƒ€ ì„ íƒ</label>
                <div class="grid grid-cols-6 gap-2">
                    <span class="avatar-selector text-3xl" onclick="selectAvatar('ğŸ¦')">ğŸ¦</span>
                    <span class="avatar-selector text-3xl" onclick="selectAvatar('ğŸ¶')">ğŸ¶</span>
                    <span class="avatar-selector text-3xl" onclick="selectAvatar('ğŸ±')">ğŸ±</span>
                    <span class="avatar-selector text-3xl" onclick="selectAvatar('ğŸ°')">ğŸ°</span>
                    <span class="avatar-selector text-3xl" onclick="selectAvatar('ğŸ¼')">ğŸ¼</span>
                    <span class="avatar-selector text-3xl" onclick="selectAvatar('ğŸ¦Š')">ğŸ¦Š</span>
                    <span class="avatar-selector text-3xl" onclick="selectAvatar('ğŸ¸')">ğŸ¸</span>
                    <span class="avatar-selector text-3xl" onclick="selectAvatar('ğŸ§')">ğŸ§</span>
                    <span class="avatar-selector text-3xl" onclick="selectAvatar('ğŸ¦‹')">ğŸ¦‹</span>
                    <span class="avatar-selector text-3xl" onclick="selectAvatar('ğŸŒŸ')">ğŸŒŸ</span>
                    <span class="avatar-selector text-3xl" onclick="selectAvatar('ğŸŒˆ')">ğŸŒˆ</span>
                    <span class="avatar-selector text-3xl" onclick="selectAvatar('ğŸˆ')">ğŸˆ</span>
                </div>
            </div>
            <button onclick="saveProfile()" class="w-full px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold rounded-full hover:scale-105 transition">
                ì‹œì‘í•˜ê¸°
            </button>
        </div>
    </div>

    <!-- ë°ì´í„° ë©”ë‰´ ëª¨ë‹¬ -->
    <div id="dataMenuModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-3xl p-8 max-w-md mx-4">
            <h3 class="text-2xl font-bold mb-6 text-center">ğŸ’¾ ë°ì´í„° ê´€ë¦¬</h3>
            <div class="space-y-3">
                <button onclick="exportLearningData(); closeDataMenu();" class="w-full px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition">
                    ğŸ“¥ í•™ìŠµ ê¸°ë¡ ë‹¤ìš´ë¡œë“œ (JSON)
                </button>
                <button onclick="generateVisualReport(); closeDataMenu();" class="w-full px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition">
                    ğŸ–¼ï¸ ì„±ê³¼ ë¦¬í¬íŠ¸ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
                </button>
                <button onclick="document.getElementById('importFileModal').click(); closeDataMenu();" class="w-full px-4 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition">
                    ğŸ“¤ í•™ìŠµ ê¸°ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
                </button>
                <input type="file" id="importFileModal" hidden accept=".json" onchange="importLearningData(this.files[0])">
                <button onclick="changeProfile(); closeDataMenu();" class="w-full px-4 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition">
                    ğŸ‘¤ í”„ë¡œí•„ ë³€ê²½
                </button>
                <button onclick="closeDataMenu()" class="w-full px-4 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition">
                    ë‹«ê¸°
                </button>
            </div>
        </div>
    </div>

    <!-- ì„±ê³µ ëª¨ë‹¬ -->
    <div id="successModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-3xl p-8 max-w-sm mx-4 transform scale-0 transition-transform" id="successModalContent">
            <div class="text-center">
                <div class="text-6xl mb-4" id="modalIcon">ğŸ‰</div>
                <h3 class="text-2xl font-bold mb-2" id="modalTitle">ì„±ê³µ!</h3>
                <p class="text-gray-600 mb-4" id="modalMessage">ì˜í–ˆì–´ìš”!</p>
                <button onclick="closeModal()" class="px-6 py-2 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition">
                    í™•ì¸
                </button>
            </div>
        </div>
    </div>

    <script>
        // ê°ì • ì¹´ë“œ ë°ì´í„°
        const emotionCards = [
            // ê¸°ì¨ ì¹´í…Œê³ ë¦¬
            { id: 1, name: 'ê¸°ì¨', emoji: 'ğŸ˜Š', category: 'happy', color: '#FFD93D', desc: 'ë§ˆìŒì´ ì¦ê²ê³  í–‰ë³µí•œ ëŠë‚Œ', example: 'ì¹œêµ¬ì™€ ë†€ ë•Œ' },
            { id: 2, name: 'ì‹ ë‚¨', emoji: 'ğŸ¤—', category: 'happy', color: '#FFD93D', desc: 'ì—ë„ˆì§€ê°€ ë„˜ì¹˜ê³  ë“¤ëœ¬ ê¸°ë¶„', example: 'ì†Œí’ ê°€ëŠ” ë‚ ' },
            { id: 3, name: 'ë§Œì¡±', emoji: 'ğŸ˜Œ', category: 'happy', color: '#FFD93D', desc: 'ë§ˆìŒì´ í¸ì•ˆí•˜ê³  ì¶©ë¶„í•œ ëŠë‚Œ', example: 'ë§›ìˆëŠ” ê±¸ ë¨¹ì—ˆì„ ë•Œ' },
            { id: 4, name: 'ìë‘ìŠ¤ëŸ¬ì›€', emoji: 'ğŸ˜', category: 'happy', color: '#FFD93D', desc: 'ìŠ¤ìŠ¤ë¡œê°€ ëŒ€ê²¬í•œ ëŠë‚Œ', example: 'ì‹œí—˜ì„ ì˜ ë´¤ì„ ë•Œ' },
            { id: 5, name: 'ê°ì‚¬', emoji: 'ğŸ™', category: 'happy', color: '#FFD93D', desc: 'ê³ ë§ˆìš´ ë§ˆìŒ', example: 'ë„ì›€ì„ ë°›ì•˜ì„ ë•Œ' },
            
            // ìŠ¬í”” ì¹´í…Œê³ ë¦¬
            { id: 6, name: 'ìŠ¬í””', emoji: 'ğŸ˜¢', category: 'sad', color: '#4682B4', desc: 'ë§ˆìŒì´ ì•„í”„ê³  ëˆˆë¬¼ì´ ë‚˜ëŠ” ëŠë‚Œ', example: 'ì¹œêµ¬ì™€ í—¤ì–´ì§ˆ ë•Œ' },
            { id: 7, name: 'ì™¸ë¡œì›€', emoji: 'ğŸ˜”', category: 'sad', color: '#4682B4', desc: 'í˜¼ìì¸ ê²ƒ ê°™ì€ ëŠë‚Œ', example: 'ì¹œêµ¬ë“¤ì´ ì—†ì„ ë•Œ' },
            { id: 8, name: 'ì‹¤ë§', emoji: 'ğŸ˜', category: 'sad', color: '#4682B4', desc: 'ê¸°ëŒ€ì™€ ë‹¬ë¼ì„œ ì†ìƒí•œ ëŠë‚Œ', example: 'ì•½ì†ì´ ì·¨ì†Œëì„ ë•Œ' },
            { id: 9, name: 'ê·¸ë¦¬ì›€', emoji: 'ğŸ¥º', category: 'sad', color: '#4682B4', desc: 'ë³´ê³  ì‹¶ì€ ë§ˆìŒ', example: 'ê°€ì¡±ì´ ë³´ê³  ì‹¶ì„ ë•Œ' },
            { id: 10, name: 'í›„íšŒ', emoji: 'ğŸ˜“', category: 'sad', color: '#4682B4', desc: 'ë˜ëŒë¦¬ê³  ì‹¶ì€ ë§ˆìŒ', example: 'ì‹¤ìˆ˜í–ˆì„ ë•Œ' },
            
            // í™”ë‚¨ ì¹´í…Œê³ ë¦¬
            { id: 11, name: 'í™”ë‚¨', emoji: 'ğŸ˜ ', category: 'angry', color: '#FF6B6B', desc: 'ì†ì´ ë¶€ê¸€ë¶€ê¸€ ë“ëŠ” ëŠë‚Œ', example: 'ë¶ˆê³µí‰í•  ë•Œ' },
            { id: 12, name: 'ì§œì¦', emoji: 'ğŸ˜¤', category: 'angry', color: '#FF6B6B', desc: 'ì‹ ê²½ì´ ê±°ìŠ¬ë¦¬ëŠ” ëŠë‚Œ', example: 'ë°©í•´ë°›ì„ ë•Œ' },
            { id: 13, name: 'ë‹µë‹µí•¨', emoji: 'ğŸ˜£', category: 'angry', color: '#FF6B6B', desc: 'ë§‰íŒ ê²ƒ ê°™ì€ ëŠë‚Œ', example: 'ì´í•´ë°›ì§€ ëª»í•  ë•Œ' },
            { id: 14, name: 'ì–µìš¸í•¨', emoji: 'ğŸ˜–', category: 'angry', color: '#FF6B6B', desc: 'ê³µí‰í•˜ì§€ ì•Šë‹¤ê³  ëŠë¼ëŠ” ë§ˆìŒ', example: 'ì˜¤í•´ë°›ì„ ë•Œ' },
            { id: 15, name: 'ë¶„ë…¸', emoji: 'ğŸ¤¬', category: 'angry', color: '#FF6B6B', desc: 'ë§¤ìš° í™”ê°€ ë‚œ ìƒíƒœ', example: 'ê´´ë¡­í˜ì„ ë‹¹í•  ë•Œ' },
            
            // ë‘ë ¤ì›€ ì¹´í…Œê³ ë¦¬
            { id: 16, name: 'ë‘ë ¤ì›€', emoji: 'ğŸ˜¨', category: 'fear', color: '#6C5CE7', desc: 'ë¬´ì„œìš´ ëŠë‚Œ', example: 'ì–´ë‘  ì†ì— ìˆì„ ë•Œ' },
            { id: 17, name: 'ê±±ì •', emoji: 'ğŸ˜Ÿ', category: 'fear', color: '#6C5CE7', desc: 'ë‚˜ìœ ì¼ì´ ìƒê¸¸ê¹Œë´ ë¶ˆì•ˆí•œ ë§ˆìŒ', example: 'ì‹œí—˜ ë³´ê¸° ì „' },
            { id: 18, name: 'ê¸´ì¥', emoji: 'ğŸ˜°', category: 'fear', color: '#6C5CE7', desc: 'ë§ˆìŒì´ ì¡°ë§ˆì¡°ë§ˆí•œ ëŠë‚Œ', example: 'ë°œí‘œí•  ë•Œ' },
            { id: 19, name: 'ë¶ˆì•ˆ', emoji: 'ğŸ˜¥', category: 'fear', color: '#6C5CE7', desc: 'ë§ˆìŒì´ í¸í•˜ì§€ ì•Šì€ ìƒíƒœ', example: 'ìƒˆë¡œìš´ ê³³ì— ê°ˆ ë•Œ' },
            { id: 20, name: 'ì´ˆì¡°í•¨', emoji: 'ğŸ˜¬', category: 'fear', color: '#6C5CE7', desc: 'ë¹¨ë¦¬ í•´ì•¼ í•  ê²ƒ ê°™ì€ ëŠë‚Œ', example: 'ì‹œê°„ì´ ë¶€ì¡±í•  ë•Œ' },
            
            // ë†€ëŒ ì¹´í…Œê³ ë¦¬
            { id: 21, name: 'ë†€ëŒ', emoji: 'ğŸ˜²', category: 'surprise', color: '#FFA502', desc: 'ì˜ˆìƒí•˜ì§€ ëª»í•œ ì¼ì— ê¹œì§ ë†€ë€ ëŠë‚Œ', example: 'ê¹œì§ ì„ ë¬¼ ë°›ì„ ë•Œ' },
            { id: 22, name: 'ì‹ ê¸°í•¨', emoji: 'ğŸ¤”', category: 'surprise', color: '#FFA502', desc: 'ì²˜ìŒ ë³´ëŠ” ê²ƒì— ëŒ€í•œ í˜¸ê¸°ì‹¬', example: 'ìƒˆë¡œìš´ ê²ƒì„ ë°œê²¬í•  ë•Œ' },
            { id: 23, name: 'ë‹¹í™©', emoji: 'ğŸ˜³', category: 'surprise', color: '#FFA502', desc: 'ì–´ë–»ê²Œ í•´ì•¼ í• ì§€ ëª¨ë¥´ëŠ” ëŠë‚Œ', example: 'ê°‘ì‘ìŠ¤ëŸ° ì§ˆë¬¸ì„ ë°›ì„ ë•Œ' },
            { id: 24, name: 'ì¶©ê²©', emoji: 'ğŸ¤¯', category: 'surprise', color: '#FFA502', desc: 'ë§¤ìš° ë†€ë€ ìƒíƒœ', example: 'ë¯¿ê¸° í˜ë“  ì†Œì‹ì„ ë“¤ì„ ë•Œ' },
            { id: 25, name: 'ê°íƒ„', emoji: 'ğŸ˜', category: 'surprise', color: '#FFA502', desc: 'ë§¤ìš° ì¢‹ì•„ì„œ ë†€ë€ ëŠë‚Œ', example: 'ë©‹ì§„ ê²ƒì„ ë³¼ ë•Œ' },
            
            // ì‚¬ë‘ ì¹´í…Œê³ ë¦¬
            { id: 26, name: 'ì‚¬ë‘', emoji: 'ğŸ¥°', category: 'love', color: '#FD79A8', desc: 'ëˆ„êµ°ê°€ë¥¼ ì•„ë¼ëŠ” ë”°ëœ»í•œ ë§ˆìŒ', example: 'ê°€ì¡±ê³¼ í•¨ê»˜ ìˆì„ ë•Œ' },
            { id: 27, name: 'ì„¤ë ˜', emoji: 'ğŸ’•', category: 'love', color: '#FD79A8', desc: 'ë‘ê·¼ë‘ê·¼ ê¸°ëŒ€ë˜ëŠ” ë§ˆìŒ', example: 'ì¢‹ì•„í•˜ëŠ” ì¹œêµ¬ë¥¼ ë§Œë‚  ë•Œ' },
            { id: 28, name: 'ì• ì •', emoji: 'ğŸ’–', category: 'love', color: '#FD79A8', desc: 'ì†Œì¤‘íˆ ì—¬ê¸°ëŠ” ë§ˆìŒ', example: 'ë°˜ë ¤ë™ë¬¼ê³¼ ë†€ ë•Œ' },
            { id: 29, name: 'ì¹œë°€í•¨', emoji: 'ğŸ¤', category: 'love', color: '#FD79A8', desc: 'ê°€ê¹ê³  í¸ì•ˆí•œ ëŠë‚Œ', example: 'ë² ìŠ¤íŠ¸ í”„ë Œë“œì™€ ìˆì„ ë•Œ' },
            { id: 30, name: 'í¬ê·¼í•¨', emoji: 'ğŸ¤—', category: 'love', color: '#FD79A8', desc: 'ë”°ëœ»í•˜ê³  í¸ì•ˆí•œ ëŠë‚Œ', example: 'ì—„ë§ˆ í’ˆì— ì•ˆê¸¸ ë•Œ' }
        ];

        // ìƒí™© ì‹œë‚˜ë¦¬ì˜¤ ë°ì´í„°
        const situationScenarios = [
            {
                id: 1,
                category: 'school',
                situation: 'ì˜¤ëŠ˜ ì²´ìœ¡ ì‹œê°„ì— ë‹¬ë¦¬ê¸° ì‹œí•©ì—ì„œ 1ë“±ì„ í–ˆì–´ìš”!',
                emotions: ['ê¸°ì¨', 'ìë‘ìŠ¤ëŸ¬ì›€', 'ì‹ ë‚¨', 'ë§Œì¡±'],
                correctAnswers: ['ê¸°ì¨', 'ìë‘ìŠ¤ëŸ¬ì›€', 'ì‹ ë‚¨'],
                feedback: '1ë“±ì„ í•˜ë©´ ì •ë§ ê¸°ì˜ê³  ìë‘ìŠ¤ëŸ½ì£ ! ì—¬ëŸ¬ ê°ì •ì„ ë™ì‹œì— ëŠë‚„ ìˆ˜ ìˆì–´ìš”.'
            },
            {
                id: 2,
                category: 'school',
                situation: 'ìˆ˜ì—… ì‹œê°„ì— ì„ ìƒë‹˜ê»˜ì„œ ë‚´ ë°œí‘œë¥¼ ì¹­ì°¬í•´ì£¼ì…¨ì–´ìš”.',
                emotions: ['ìë‘ìŠ¤ëŸ¬ì›€', 'ê¸°ì¨', 'ë¶€ë„ëŸ¬ì›€', 'ê°ì‚¬'],
                correctAnswers: ['ìë‘ìŠ¤ëŸ¬ì›€', 'ê¸°ì¨', 'ë¶€ë„ëŸ¬ì›€'],
                feedback: 'ì¹­ì°¬ì„ ë°›ìœ¼ë©´ ê¸°ì˜ë©´ì„œë„ ë¶€ë„ëŸ¬ìš¸ ìˆ˜ ìˆì–´ìš”.'
            },
            {
                id: 3,
                category: 'home',
                situation: 'ë™ìƒì´ ë‚´ ì¥ë‚œê°ì„ ë§ê°€ëœ¨ë ¸ì–´ìš”.',
                emotions: ['í™”ë‚¨', 'ìŠ¬í””', 'ì§œì¦', 'ê¸°ì¨'],
                correctAnswers: ['í™”ë‚¨', 'ìŠ¬í””', 'ì§œì¦'],
                feedback: 'ì†Œì¤‘í•œ ë¬¼ê±´ì´ ë§ê°€ì§€ë©´ í™”ê°€ ë‚˜ê³  ì†ìƒí•  ìˆ˜ ìˆì–´ìš”.'
            },
            {
                id: 4,
                category: 'home',
                situation: 'ì—„ë§ˆê°€ ë‚´ê°€ ì¢‹ì•„í•˜ëŠ” ìŒì‹ì„ ë§Œë“¤ì–´ì£¼ì…¨ì–´ìš”.',
                emotions: ['ê¸°ì¨', 'ê°ì‚¬', 'ì‚¬ë‘', 'í™”ë‚¨'],
                correctAnswers: ['ê¸°ì¨', 'ê°ì‚¬', 'ì‚¬ë‘'],
                feedback: 'ì¢‹ì•„í•˜ëŠ” ìŒì‹ì„ ë¨¹ìœ¼ë©´ ì •ë§ í–‰ë³µí•˜ì£ !'
            },
            {
                id: 5,
                category: 'friend',
                situation: 'ì¹œí•œ ì¹œêµ¬ê°€ ë‹¤ë¥¸ í•™êµë¡œ ì „í•™ì„ ê°€ê²Œ ë˜ì—ˆì–´ìš”.',
                emotions: ['ìŠ¬í””', 'ê·¸ë¦¬ì›€', 'ì™¸ë¡œì›€', 'ê¸°ì¨'],
                correctAnswers: ['ìŠ¬í””', 'ê·¸ë¦¬ì›€', 'ì™¸ë¡œì›€'],
                feedback: 'ì¹œêµ¬ì™€ í—¤ì–´ì§€ëŠ” ê²ƒì€ ì •ë§ ìŠ¬í”ˆ ì¼ì´ì—ìš”.'
            },
            {
                id: 6,
                category: 'friend',
                situation: 'ì¹œêµ¬ê°€ ë‚´ ìƒì¼ì— ê¹œì§ ì„ ë¬¼ì„ ì¤€ë¹„í–ˆì–´ìš”.',
                emotions: ['ë†€ëŒ', 'ê¸°ì¨', 'ê°ì‚¬', 'í™”ë‚¨'],
                correctAnswers: ['ë†€ëŒ', 'ê¸°ì¨', 'ê°ì‚¬'],
                feedback: 'ê¹œì§ ì„ ë¬¼ì€ ë†€ëê³  ê¸°ìœ ì¼ì´ì—ìš”!'
            }
        ];

        // ì „ì—­ ë³€ìˆ˜
        let userProfile = null;
        let collectedCards = JSON.parse(localStorage.getItem('collectedEmotionCards') || '[]');
        let customCards = JSON.parse(localStorage.getItem('customEmotionCards') || '[]');
        let totalPoints = parseInt(localStorage.getItem('emotionCardPoints') || '0');
        let activityTimeline = JSON.parse(localStorage.getItem('emotionActivityTimeline') || '[]');
        let currentCategory = 'all';
        let selectedCustomEmoji = 'â“';
        let selectedCustomColor = '#A29BFE';
        let selectedAvatar = 'ğŸ¦';
        let currentGame = null;
        let bingoBoard = null;

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            initializeUser();
            renderGallery();
            updateStats();
            updatePointsDisplay();
        });

        // ì‚¬ìš©ì ì´ˆê¸°í™”
        function initializeUser() {
            const savedProfile = localStorage.getItem('emotionCardUserProfile');
            if (savedProfile) {
                userProfile = JSON.parse(savedProfile);
                displayUserProfile();
            } else {
                document.getElementById('profileModal').classList.remove('hidden');
            }
        }

        // í”„ë¡œí•„ í‘œì‹œ
        function displayUserProfile() {
            if (userProfile) {
                document.getElementById('userProfile').classList.remove('hidden');
                document.getElementById('userName').textContent = userProfile.name || 'í•™ìƒ';
                document.getElementById('userAvatar').textContent = userProfile.avatar || 'ğŸ¦';
            }
        }

        // ì•„ë°”íƒ€ ì„ íƒ
        function selectAvatar(avatar) {
            selectedAvatar = avatar;
            document.querySelectorAll('.avatar-selector').forEach(el => {
                el.classList.remove('selected');
            });
            event.target.classList.add('selected');
        }

        // í”„ë¡œí•„ ì €ì¥
        function saveProfile() {
            const name = document.getElementById('profileNameInput').value.trim();
            const className = document.getElementById('profileClassInput').value.trim();
            
            if (!name) {
                alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            userProfile = {
                name: name,
                className: className || '',
                avatar: selectedAvatar,
                createdAt: new Date().toISOString()
            };
            
            localStorage.setItem('emotionCardUserProfile', JSON.stringify(userProfile));
            document.getElementById('profileModal').classList.add('hidden');
            displayUserProfile();
            
            // í™œë™ ê¸°ë¡
            addActivity('profile_created', { name: name });
        }

        // í”„ë¡œí•„ ë³€ê²½
        function changeProfile() {
            const savedProfile = localStorage.getItem('emotionCardUserProfile');
            if (savedProfile) {
                const profile = JSON.parse(savedProfile);
                document.getElementById('profileNameInput').value = profile.name || '';
                document.getElementById('profileClassInput').value = profile.className || '';
                selectedAvatar = profile.avatar || 'ğŸ¦';
            }
            document.getElementById('profileModal').classList.remove('hidden');
        }

        // í™œë™ ê¸°ë¡ ì¶”ê°€
        function addActivity(type, data = {}) {
            const activity = {
                type: type,
                data: data,
                timestamp: new Date().toISOString()
            };
            
            // ì˜¤ëŠ˜ ë‚ ì§œ ì°¾ê¸°
            const today = new Date().toISOString().split('T')[0];
            let todayTimeline = activityTimeline.find(t => t.date === today);
            
            if (!todayTimeline) {
                todayTimeline = { date: today, activities: [] };
                activityTimeline.push(todayTimeline);
            }
            
            todayTimeline.activities.push(activity);
            localStorage.setItem('emotionActivityTimeline', JSON.stringify(activityTimeline));
        }

        // í•™ìŠµ ë°ì´í„° ë‚´ë³´ë‚´ê¸°
        function exportLearningData() {
            const data = {
                version: '1.0',
                exportDate: new Date().toISOString(),
                profile: userProfile || { name: 'ìµëª…', avatar: 'ğŸ¦' },
                statistics: {
                    totalPoints: totalPoints,
                    totalCards: emotionCards.length,
                    collectedCards: collectedCards.length,
                    customCards: customCards.length,
                    completionRate: Math.round((collectedCards.length / emotionCards.length) * 100),
                    favoriteCategory: getFavoriteCategory()
                },
                timeline: activityTimeline,
                collections: {
                    collectedCards: collectedCards,
                    customCards: customCards
                },
                achievements: getAchievements()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            const fileName = `ê°ì •ì¹´ë“œ_í•™ìŠµê¸°ë¡_${data.profile.name}_${new Date().toISOString().split('T')[0]}.json`;
            a.download = fileName;
            a.click();
            URL.revokeObjectURL(url);
            
            showModal('ğŸ“¥', 'ë‹¤ìš´ë¡œë“œ ì™„ë£Œ!', 'í•™ìŠµ ê¸°ë¡ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // í•™ìŠµ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        function importLearningData(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (data.version && data.collections) {
                        // ë°ì´í„° ë³µì›
                        if (data.profile) {
                            userProfile = data.profile;
                            localStorage.setItem('emotionCardUserProfile', JSON.stringify(userProfile));
                            displayUserProfile();
                        }
                        
                        if (data.collections.collectedCards) {
                            collectedCards = data.collections.collectedCards;
                            localStorage.setItem('collectedEmotionCards', JSON.stringify(collectedCards));
                        }
                        
                        if (data.collections.customCards) {
                            customCards = data.collections.customCards;
                            localStorage.setItem('customEmotionCards', JSON.stringify(customCards));
                        }
                        
                        if (data.statistics && data.statistics.totalPoints) {
                            totalPoints = data.statistics.totalPoints;
                            localStorage.setItem('emotionCardPoints', totalPoints);
                        }
                        
                        if (data.timeline) {
                            activityTimeline = data.timeline;
                            localStorage.setItem('emotionActivityTimeline', JSON.stringify(activityTimeline));
                        }
                        
                        renderGallery();
                        updateStats();
                        updatePointsDisplay();
                        
                        showModal('âœ…', 'ë¶ˆëŸ¬ì˜¤ê¸° ì™„ë£Œ!', 'í•™ìŠµ ê¸°ë¡ì„ ì„±ê³µì ìœ¼ë¡œ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.');
                    } else {
                        alert('ì˜¬ë°”ë¥¸ í•™ìŠµ ê¸°ë¡ íŒŒì¼ì´ ì•„ë‹™ë‹ˆë‹¤.');
                    }
                } catch (error) {
                    alert('íŒŒì¼ì„ ì½ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    console.error(error);
                }
            };
            reader.readAsText(file);
        }

        // ê°œì„ ëœ ì‹œê°ì  ë¦¬í¬íŠ¸ ìƒì„± í•¨ìˆ˜
        function generateVisualReport() {
            const canvas = document.createElement('canvas');
            canvas.width = 1200;
            canvas.height = 1600;
            const ctx = canvas.getContext('2d');
            
            // 1. ë°°ê²½ì„ í°ìƒ‰ìœ¼ë¡œ ì„¤ì • (ê°€ë…ì„± í–¥ìƒ)
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // 2. ìƒë‹¨ í—¤ë” ë°°ê²½
            const gradient = ctx.createLinearGradient(0, 0, 0, 300);
            gradient.addColorStop(0, '#667eea');
            gradient.addColorStop(1, '#764ba2');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, 300);
            
            // 3. ì œëª© (ì‹œìŠ¤í…œ í°íŠ¸ ì‚¬ìš©)
            ctx.font = 'bold 48px Arial, sans-serif';
            ctx.fillStyle = 'white';
            ctx.textAlign = 'center';
            ctx.fillText('ğŸŒˆ ë‚˜ì˜ ê°ì • ì¹´ë“œ í•™ìŠµ ë¦¬í¬íŠ¸', 600, 100);
            
            // 4. ì‚¬ìš©ì ì •ë³´
            const userName = userProfile ? userProfile.name : 'ìµëª…';
            const userAvatar = userProfile ? userProfile.avatar : 'ğŸ¦';
            const userClass = userProfile ? userProfile.className : '';
            
            ctx.font = '36px Arial, sans-serif';
            ctx.fillText(`${userAvatar} ${userName}`, 600, 180);
            
            if (userClass) {
                ctx.font = '24px Arial, sans-serif';
                ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                ctx.fillText(userClass, 600, 230);
            }
            
            // 5. ë‚ ì§œ
            ctx.font = '20px Arial, sans-serif';
            ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
            ctx.fillText(new Date().toLocaleDateString('ko-KR'), 600, 270);
            
            // 6. ë©”ì¸ ì½˜í…ì¸  ì˜ì—­
            ctx.fillStyle = '#f8f9fa';
            ctx.fillRect(50, 350, 1100, 1200);
            
            // 7. í†µê³„ ì œëª©
            ctx.font = 'bold 36px Arial, sans-serif';
            ctx.fillStyle = '#333333';
            ctx.textAlign = 'left';
            ctx.fillText('ğŸ“Š í•™ìŠµ í†µê³„', 100, 420);
            
            // 8. í†µê³„ ì¹´ë“œë“¤
            const stats = [
                { 
                    label: 'ìˆ˜ì§‘í•œ ì¹´ë“œ', 
                    value: collectedCards.length + 'ê°œ', 
                    icon: 'ğŸ“š', 
                    color: '#9333ea',
                    x: 100,
                    y: 460
                },
                { 
                    label: 'íšë“ í¬ì¸íŠ¸', 
                    value: totalPoints + 'ì ', 
                    icon: 'ğŸ†', 
                    color: '#3b82f6',
                    x: 400,
                    y: 460
                },
                { 
                    label: 'ë§Œë“  ì¹´ë“œ', 
                    value: customCards.length + 'ê°œ', 
                    icon: 'âœ¨', 
                    color: '#f59e0b',
                    x: 700,
                    y: 460
                },
                { 
                    label: 'ì™„ì„±ë„', 
                    value: Math.round((collectedCards.length / emotionCards.length) * 100) + '%', 
                    icon: 'ğŸ¯', 
                    color: '#10b981',
                    x: 1000,
                    y: 460
                }
            ];
            
            // í†µê³„ ë°•ìŠ¤ ê·¸ë¦¬ê¸°
            stats.forEach(stat => {
                // ë°°ê²½ ë°•ìŠ¤
                ctx.fillStyle = stat.color;
                ctx.fillRect(stat.x - 50, stat.y, 250, 150);
                
                // í°ìƒ‰ ë‚´ë¶€ ë°•ìŠ¤
                ctx.fillStyle = 'white';
                ctx.fillRect(stat.x - 45, stat.y + 5, 240, 140);
                
                // ì•„ì´ì½˜
                ctx.font = '48px Arial';
                ctx.fillStyle = stat.color;
                ctx.textAlign = 'center';
                ctx.fillText(stat.icon, stat.x + 75, stat.y + 60);
                
                // ê°’
                ctx.font = 'bold 32px Arial, sans-serif';
                ctx.fillStyle = '#333333';
                ctx.fillText(stat.value, stat.x + 75, stat.y + 105);
                
                // ë¼ë²¨
                ctx.font = '18px Arial, sans-serif';
                ctx.fillStyle = '#666666';
                ctx.fillText(stat.label, stat.x + 75, stat.y + 135);
            });
            
            // 9. ìˆ˜ì§‘í•œ ì¹´ë“œ ì„¹ì…˜
            ctx.font = 'bold 32px Arial, sans-serif';
            ctx.fillStyle = '#333333';
            ctx.textAlign = 'left';
            ctx.fillText('ğŸ“‚ ìˆ˜ì§‘í•œ ê°ì • ì¹´ë“œ', 100, 700);
            
            // 10. ì¹´ë“œ ë¯¸ë‹ˆ ê°¤ëŸ¬ë¦¬
            let cardX = 100;
            let cardY = 750;
            const maxCards = Math.min(collectedCards.length, 15);
            
            if (maxCards === 0) {
                ctx.font = '24px Arial, sans-serif';
                ctx.fillStyle = '#999999';
                ctx.textAlign = 'center';
                ctx.fillText('ì•„ì§ ìˆ˜ì§‘í•œ ì¹´ë“œê°€ ì—†ìŠµë‹ˆë‹¤', 600, 850);
            } else {
                for (let i = 0; i < maxCards; i++) {
                    const cardId = collectedCards[i];
                    const card = emotionCards.find(c => c.id === cardId);
                    
                    if (card) {
                        // ì¹´ë“œ ë°°ê²½
                        ctx.fillStyle = card.color || '#e5e7eb';
                        ctx.fillRect(cardX, cardY, 100, 100);
                        
                        // ì¹´ë“œ í…Œë‘ë¦¬
                        ctx.strokeStyle = '#ffffff';
                        ctx.lineWidth = 3;
                        ctx.strokeRect(cardX, cardY, 100, 100);
                        
                        // ì´ëª¨ì§€
                        ctx.font = '40px Arial';
                        ctx.fillStyle = 'white';
                        ctx.textAlign = 'center';
                        ctx.fillText(card.emoji, cardX + 50, cardY + 50);
                        
                        // ì¹´ë“œ ì´ë¦„
                        ctx.font = 'bold 14px Arial, sans-serif';
                        ctx.fillText(card.name, cardX + 50, cardY + 80);
                        
                        cardX += 110;
                        if ((i + 1) % 9 === 0) {
                            cardX = 100;
                            cardY += 110;
                        }
                    }
                }
            }
            
            // 11. ì—…ì  ì„¹ì…˜
            ctx.font = 'bold 32px Arial, sans-serif';
            ctx.fillStyle = '#333333';
            ctx.textAlign = 'left';
            ctx.fillText('ğŸ… ë‹¬ì„±í•œ ì—…ì ', 100, 1100);
            
            const achievements = getAchievements();
            let achievementY = 1150;
            
            if (achievements.length === 0) {
                ctx.font = '24px Arial, sans-serif';
                ctx.fillStyle = '#999999';
                ctx.textAlign = 'center';
                ctx.fillText('ì—…ì ì„ ë‹¬ì„±í•˜ë ¤ë©´ ë” ë§ì€ ì¹´ë“œë¥¼ ìˆ˜ì§‘í•´ë³´ì„¸ìš”!', 600, achievementY);
            } else {
                achievements.forEach((achievement, index) => {
                    ctx.font = '24px Arial, sans-serif';
                    ctx.fillStyle = '#666666';
                    ctx.textAlign = 'left';
                    ctx.fillText(`${achievement.icon} ${achievement.name}`, 100 + (index % 2) * 500, achievementY);
                    
                    if (index % 2 === 1) {
                        achievementY += 40;
                    }
                });
            }
            
            // 12. í•˜ë‹¨ ì •ë³´
            ctx.fillStyle = '#e5e7eb';
            ctx.fillRect(0, 1450, canvas.width, 150);
            
            ctx.font = '20px Arial, sans-serif';
            ctx.fillStyle = '#666666';
            ctx.textAlign = 'center';
            ctx.fillText('ìƒì„±ì¼: ' + new Date().toLocaleDateString('ko-KR'), 600, 1500);
            ctx.fillText('Family Heart Bridge Project', 600, 1530);
            ctx.font = '16px Arial, sans-serif';
            ctx.fillText('Â© 2025 ë””ì§€í„¸ ê°ì • ì¹´ë“œ í•™ìŠµ ì‹œìŠ¤í…œ', 600, 1560);
            
            // 13. ì´ë¯¸ì§€ë¡œ ë³€í™˜ ë° ë‹¤ìš´ë¡œë“œ
            canvas.toBlob(blob => {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                const fileName = `ê°ì •ì¹´ë“œ_ë¦¬í¬íŠ¸_${userName}_${new Date().toISOString().split('T')[0]}.png`;
                a.download = fileName;
                a.click();
                URL.revokeObjectURL(url);
                
                showModal('ğŸ–¼ï¸', 'ë¦¬í¬íŠ¸ ìƒì„± ì™„ë£Œ!', 'ì´ë¯¸ì§€ê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
            }, 'image/png');
        }

        // ì¦ê²¨ì°¾ëŠ” ì¹´í…Œê³ ë¦¬ ì°¾ê¸°
        function getFavoriteCategory() {
            const categoryCount = {};
            collectedCards.forEach(cardId => {
                const card = emotionCards.find(c => c.id === cardId);
                if (card) {
                    categoryCount[card.category] = (categoryCount[card.category] || 0) + 1;
                }
            });
            
            let maxCategory = 'happy';
            let maxCount = 0;
            for (const [category, count] of Object.entries(categoryCount)) {
                if (count > maxCount) {
                    maxCount = count;
                    maxCategory = category;
                }
            }
            return maxCategory;
        }

        // ì—…ì  ê³„ì‚°
        function getAchievements() {
            const achievements = [];
            
            if (collectedCards.length >= 1) {
                achievements.push({ id: 'first_card', name: 'ì²« ì¹´ë“œ ìˆ˜ì§‘', icon: 'ğŸ¯' });
            }
            if (collectedCards.length >= 10) {
                achievements.push({ id: 'collector_10', name: '10ê°œ ì¹´ë“œ ìˆ˜ì§‘', icon: 'ğŸ“š' });
            }
            if (collectedCards.length >= 20) {
                achievements.push({ id: 'collector_20', name: '20ê°œ ì¹´ë“œ ìˆ˜ì§‘', icon: 'ğŸ†' });
            }
            if (collectedCards.length === emotionCards.length) {
                achievements.push({ id: 'complete', name: 'ëª¨ë“  ì¹´ë“œ ìˆ˜ì§‘', icon: 'ğŸ‘‘' });
            }
            if (customCards.length >= 1) {
                achievements.push({ id: 'creator', name: 'ì¹´ë“œ ì œì‘ì', icon: 'âœ¨' });
            }
            if (totalPoints >= 100) {
                achievements.push({ id: 'points_100', name: '100ì  ë‹¬ì„±', icon: 'ğŸ’¯' });
            }
            
            return achievements;
        }

        // ë°ì´í„° ë©”ë‰´ í‘œì‹œ
        function showDataMenu() {
            document.getElementById('dataMenuModal').classList.remove('hidden');
        }

        // ë°ì´í„° ë©”ë‰´ ë‹«ê¸°
        function closeDataMenu() {
            document.getElementById('dataMenuModal').classList.add('hidden');
        }

        // í¬ì¸íŠ¸ í‘œì‹œ ì—…ë°ì´íŠ¸
        function updatePointsDisplay() {
            document.getElementById('totalPoints').textContent = totalPoints;
        }

        // íƒ­ ì „í™˜
        function showTab(tab) {
            // ëª¨ë“  íƒ­ ì»¨í…ì¸  ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // ëª¨ë“  íƒ­ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('bg-purple-500', 'text-white');
                btn.classList.add('hover:bg-purple-100');
            });
            
            // ì„ íƒëœ íƒ­ í‘œì‹œ
            document.getElementById(tab + 'Content').classList.remove('hidden');
            document.getElementById(tab + 'Tab').classList.add('bg-purple-500', 'text-white');
            document.getElementById(tab + 'Tab').classList.remove('hover:bg-purple-100');
            
            // íƒ­ë³„ ì´ˆê¸°í™”
            if (tab === 'collection') {
                renderCollection();
            }
        }

        // ê°¤ëŸ¬ë¦¬ ë Œë”ë§
        function renderGallery() {
            const grid = document.getElementById('emotionCardsGrid');
            const filteredCards = currentCategory === 'all' 
                ? emotionCards 
                : emotionCards.filter(card => card.category === currentCategory);
            
            grid.innerHTML = filteredCards.map(card => {
                const isCollected = collectedCards.includes(card.id);
                return `
                    <div class="emotion-card" onclick="flipCard(this, ${card.id})">
                        <div class="emotion-card-inner">
                            <div class="emotion-card-front" style="background: linear-gradient(135deg, ${card.color} 0%, ${card.color}dd 100%)">
                                <div class="text-5xl mb-3">${card.emoji}</div>
                                <h3 class="text-xl font-bold">${card.name}</h3>
                                ${isCollected ? '<span class="badge badge-collected mt-2">ìˆ˜ì§‘ì™„ë£Œ</span>' : '<span class="badge badge-new mt-2">NEW</span>'}
                            </div>
                            <div class="emotion-card-back">
                                <h3 class="text-xl font-bold mb-3 text-gray-800">${card.name}</h3>
                                <p class="text-sm mb-3 text-gray-600">${card.desc}</p>
                                <p class="text-sm text-gray-500">
                                    <strong>ì˜ˆì‹œ:</strong> ${card.example}
                                </p>
                                ${!isCollected ? '<button onclick="collectCard(event, ' + card.id + ')" class="mt-3 px-4 py-2 bg-purple-500 text-white rounded-full text-sm hover:bg-purple-600">ìˆ˜ì§‘í•˜ê¸°</button>' : ''}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ì¹´ë“œ ë’¤ì§‘ê¸°
        function flipCard(element, cardId) {
            element.classList.toggle('flipped');
        }

        // ì¹´ë“œ ìˆ˜ì§‘
        function collectCard(event, cardId) {
            event.stopPropagation();
            
            if (!collectedCards.includes(cardId)) {
                collectedCards.push(cardId);
                localStorage.setItem('collectedEmotionCards', JSON.stringify(collectedCards));
                
                // í¬ì¸íŠ¸ ì¶”ê°€
                totalPoints += 10;
                localStorage.setItem('emotionCardPoints', totalPoints);
                updatePointsDisplay();
                
                // í™œë™ ê¸°ë¡
                const card = emotionCards.find(c => c.id === cardId);
                addActivity('card_collected', { cardId: cardId, cardName: card.name });
                
                // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
                const cardElement = event.target.closest('.emotion-card');
                cardElement.classList.add('card-collected');
                
                // ì„±ê³µ ë©”ì‹œì§€
                showModal('ğŸ‰', 'ì¹´ë“œ ìˆ˜ì§‘ ì™„ë£Œ!', 'ìƒˆë¡œìš´ ê°ì • ì¹´ë“œë¥¼ ìˆ˜ì§‘í–ˆì–´ìš”! +10ì ');
                createConfetti();
                
                // ê°¤ëŸ¬ë¦¬ ì—…ë°ì´íŠ¸
                setTimeout(() => {
                    renderGallery();
                    updateStats();
                }, 1000);
            }
        }

        // ì¹´í…Œê³ ë¦¬ í•„í„°
        function filterCategory(category) {
            currentCategory = category;
            renderGallery();
            
            // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('ring-4', 'ring-white', 'ring-opacity-50');
            });
            event.target.classList.add('ring-4', 'ring-white', 'ring-opacity-50');
        }

        // ê²Œì„ ì‹œì‘
        function startGame(gameType) {
            const gameArea = document.getElementById('gameArea');
            gameArea.classList.remove('hidden');
            
            if (gameType === 'situation') {
                startSituationGame();
            } else if (gameType === 'detective') {
                startDetectiveGame();
            } else if (gameType === 'bingo') {
                startBingoGame();
            } else if (gameType === 'memory') {
                startMemoryGame();
            }
            
            // í™œë™ ê¸°ë¡
            addActivity('game_started', { gameType: gameType });
        }

        // ìƒí™©-ê°ì • ë§¤ì¹­ ê²Œì„
        function startSituationGame() {
            const gameArea = document.getElementById('gameArea');
            let currentScenario = 0;
            let score = 0;
            let selectedEmotions = [];
            
            function showScenario() {
                const scenario = situationScenarios[currentScenario];
                selectedEmotions = [];
                
                gameArea.innerHTML = `
                    <h3 class="text-xl font-bold mb-4 text-gray-800">ğŸ“– ìƒí™©ì„ ë³´ê³  ê°ì •ì„ ì„ íƒí•´ìš”! (${currentScenario + 1}/${situationScenarios.length})</h3>
                    
                    <!-- ìƒí™© ì¹´ë“œ -->
                    <div class="situation-card mb-6">
                        <div class="text-6xl mb-4">
                            ${scenario.category === 'school' ? 'ğŸ«' : scenario.category === 'home' ? 'ğŸ ' : 'ğŸ‘«'}
                        </div>
                        <p class="text-xl font-medium">${scenario.situation}</p>
                    </div>
                    
                    <!-- ê°ì • ì„ íƒ ì˜ì—­ -->
                    <div class="mb-4">
                        <p class="text-center text-gray-600 mb-3">ì—¬ëŸ¬ ê°œì˜ ê°ì •ì„ ì„ íƒí•  ìˆ˜ ìˆì–´ìš”!</p>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                            ${scenario.emotions.map(emotion => {
                                const card = emotionCards.find(c => c.name === emotion);
                                return `
                                    <div class="emotion-choice-card" onclick="selectEmotion('${emotion}', this)">
                                        <div class="text-5xl text-center mb-2">${card ? card.emoji : 'â“'}</div>
                                        <div class="text-lg font-bold text-center">${emotion}</div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                    
                    <!-- ì œì¶œ ë²„íŠ¼ -->
                    <div class="text-center">
                        <button onclick="checkSituationAnswer()" class="px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold rounded-full hover:scale-105 transition">
                            í™•ì¸í•˜ê¸°
                        </button>
                        <button onclick="showHint()" class="ml-3 px-6 py-3 bg-gradient-to-r from-yellow-400 to-orange-400 text-white font-bold rounded-full hover:scale-105 transition">
                            ğŸ’¡ íŒíŠ¸
                        </button>
                    </div>
                    
                    <div class="mt-4 text-center">
                        <span class="text-gray-600">ì ìˆ˜: ${score}ì </span>
                    </div>
                `;
            }
            
            window.selectEmotion = function(emotion, element) {
                element.classList.toggle('selected');
                const index = selectedEmotions.indexOf(emotion);
                if (index > -1) {
                    selectedEmotions.splice(index, 1);
                } else {
                    selectedEmotions.push(emotion);
                }
            };
            
            window.showHint = function() {
                const scenario = situationScenarios[currentScenario];
                showModal('ğŸ’¡', 'íŒíŠ¸', `ì´ëŸ° ìƒí™©ì—ì„œëŠ” ë³´í†µ ${scenario.correctAnswers[0]}ì„(ë¥¼) ëŠê»´ìš”!`);
            };
            
            window.checkSituationAnswer = function() {
                const scenario = situationScenarios[currentScenario];
                let correct = 0;
                
                selectedEmotions.forEach(emotion => {
                    if (scenario.correctAnswers.includes(emotion)) {
                        correct++;
                    }
                });
                
                const points = correct * 10;
                score += points;
                
                if (correct > 0) {
                    showModal('âœ…', 'ì˜í–ˆì–´ìš”!', `${scenario.feedback} +${points}ì `);
                } else {
                    showModal('ğŸ’­', 'ë‹¤ì‹œ ìƒê°í•´ë´ìš”', scenario.feedback);
                }
                
                currentScenario++;
                if (currentScenario < situationScenarios.length) {
                    setTimeout(showScenario, 2500);
                } else {
                    totalPoints += score;
                    localStorage.setItem('emotionCardPoints', totalPoints);
                    updatePointsDisplay();
                    addActivity('game_completed', { gameType: 'situation', score: score });
                    showModal('ğŸŠ', 'ê²Œì„ ì™„ë£Œ!', `ì´ ${score}ì ì„ íšë“í–ˆì–´ìš”!`);
                    setTimeout(() => {
                        gameArea.classList.add('hidden');
                    }, 3000);
                }
            };
            
            showScenario();
        }

        // ê°ì • íƒì • ê²Œì„
        function startDetectiveGame() {
            const gameArea = document.getElementById('gameArea');
            
            const detectiveCases = [
                {
                    clues: [
                        'ì–¼êµ´ì´ ë¹¨ê°œì¡Œì–´ìš”',
                        'ê³ ê°œë¥¼ ìˆ™ì˜€ì–´ìš”',
                        'ëª©ì†Œë¦¬ê°€ ì‘ì•„ì¡Œì–´ìš”'
                    ],
                    emotions: ['ë¶€ë„ëŸ¬ì›€', 'ê¸°ì¨', 'í™”ë‚¨', 'ìŠ¬í””'],
                    answer: 'ë¶€ë„ëŸ¬ì›€',
                    explanation: 'ì–¼êµ´ì´ ë¹¨ê°œì§€ê³  ê³ ê°œë¥¼ ìˆ™ì´ëŠ” ê²ƒì€ ë¶€ë„ëŸ¬ìš¸ ë•Œì˜ ëª¨ìŠµì´ì—ìš”.'
                },
                {
                    clues: [
                        'ëˆˆë¬¼ì´ ë‚˜ìš”',
                        'ì…ìˆ ì´ ë–¨ë ¤ìš”',
                        'í˜¼ì ìˆê³  ì‹¶ì–´ìš”'
                    ],
                    emotions: ['ìŠ¬í””', 'ê¸°ì¨', 'ë†€ëŒ', 'ì‹ ë‚¨'],
                    answer: 'ìŠ¬í””',
                    explanation: 'ëˆˆë¬¼ì´ ë‚˜ê³  í˜¼ì ìˆê³  ì‹¶ì„ ë•ŒëŠ” ìŠ¬í”ˆ ê°ì •ì„ ëŠë¼ê³  ìˆì–´ìš”.'
                },
                {
                    clues: [
                        'ì£¼ë¨¹ì„ ê½‰ ì¥ì—ˆì–´ìš”',
                        'ì–¼êµ´ì´ ë¶‰ì–´ì¡Œì–´ìš”',
                        'í° ì†Œë¦¬ê°€ ë‚˜ìš”'
                    ],
                    emotions: ['í™”ë‚¨', 'ê¸°ì¨', 'ë‘ë ¤ì›€', 'ê°ì‚¬'],
                    answer: 'í™”ë‚¨',
                    explanation: 'ì£¼ë¨¹ì„ ì¥ê³  í° ì†Œë¦¬ë¥¼ ë‚´ëŠ” ê²ƒì€ í™”ê°€ ë‚¬ì„ ë•Œì˜ í‘œí˜„ì´ì—ìš”.'
                }
            ];
            
            let currentCase = 0;
            let score = 0;
            
            function showCase() {
                const detectiveCase = detectiveCases[currentCase];
                
                gameArea.innerHTML = `
                    <h3 class="text-xl font-bold mb-4 text-gray-800">ğŸ” ê°ì • íƒì •: ë‹¨ì„œë¥¼ ë³´ê³  ê°ì •ì„ ì¶”ë¦¬í•´ìš”!</h3>
                    
                    <div class="bg-white rounded-2xl p-6 mb-6">
                        <h4 class="font-bold text-lg mb-4">ğŸ“‹ ë‹¨ì„œë“¤:</h4>
                        <ul class="space-y-2">
                            ${detectiveCase.clues.map(clue => `
                                <li class="flex items-center">
                                    <span class="text-2xl mr-3">ğŸ”</span>
                                    <span class="text-lg">${clue}</span>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        ${detectiveCase.emotions.map(emotion => {
                            const card = emotionCards.find(c => c.name === emotion);
                            return `
                                <button onclick="checkDetectiveAnswer('${emotion}')" 
                                    class="game-card bg-white p-6 rounded-xl hover:bg-purple-100">
                                    <div class="text-5xl mb-2">${card ? card.emoji : 'â“'}</div>
                                    <div class="font-bold text-lg">${emotion}</div>
                                </button>
                            `;
                        }).join('')}
                    </div>
                    
                    <div class="text-center">
                        <span class="text-gray-600">ì‚¬ê±´ ${currentCase + 1}/${detectiveCases.length} | ì ìˆ˜: ${score}ì </span>
                    </div>
                `;
            }
            
            window.checkDetectiveAnswer = function(emotion) {
                const detectiveCase = detectiveCases[currentCase];
                
                if (emotion === detectiveCase.answer) {
                    score += 20;
                    showModal('ğŸ¯', 'ì •ë‹µ!', `${detectiveCase.explanation} +20ì `);
                } else {
                    showModal('ğŸ¤”', 'ë‹¤ì‹œ ìƒê°í•´ë´ìš”', `íŒíŠ¸: ${detectiveCase.clues[0]}`);
                }
                
                currentCase++;
                if (currentCase < detectiveCases.length) {
                    setTimeout(showCase, 2500);
                } else {
                    totalPoints += score;
                    localStorage.setItem('emotionCardPoints', totalPoints);
                    updatePointsDisplay();
                    addActivity('game_completed', { gameType: 'detective', score: score });
                    showModal('ğŸ†', 'íƒì • ì„ë¬´ ì™„ë£Œ!', `ì´ ${score}ì ì„ íšë“í–ˆì–´ìš”!`);
                    setTimeout(() => {
                        gameArea.classList.add('hidden');
                    }, 3000);
                }
            };
            
            showCase();
        }

        // ê°ì • ë¹™ê³  ê²Œì„
        function startBingoGame() {
            const gameArea = document.getElementById('gameArea');
            
            // ë¹™ê³ íŒ ìƒì„±
            const bingoEmotions = [
                'ê¸°ì¨', 'ìŠ¬í””', 'í™”ë‚¨', 'ë†€ëŒ', 
                'ê°ì‚¬', 'ë¬´ë£Œ', 'ì„¤ë ˜', 'ê±±ì •',
                'ìë‘ìŠ¤ëŸ¬ì›€', 'ë¶€ë„ëŸ¬ì›€', 'ì‹ ë‚¨', 'ë‘ë ¤ì›€'
            ];
            
            // 3x3 ë¹™ê³ íŒ ìƒì„± (ì¤‘ì•™ì€ FREE)
            bingoBoard = [
                [...bingoEmotions.slice(0, 4)],
                [bingoEmotions[4], 'FREE', bingoEmotions[5]],
                [...bingoEmotions.slice(6, 9)]
            ];
            
            let checkedCells = [[false, false, false], [false, true, false], [false, false, false]];
            
            gameArea.innerHTML = `
                <h3 class="text-xl font-bold mb-4 text-gray-800">ğŸ¯ ì˜¤ëŠ˜ ëŠë‚€ ê°ì •ìœ¼ë¡œ ë¹™ê³ ë¥¼ ì™„ì„±í•´ìš”!</h3>
                
                <div class="max-w-md mx-auto mb-6">
                    <div class="grid grid-cols-3 gap-3">
                        ${bingoBoard.map((row, i) => 
                            row.map((emotion, j) => {
                                if (emotion === 'FREE') {
                                    return `
                                        <div class="bingo-cell center">
                                            <span class="text-2xl">ğŸŒŸ</span>
                                            <span class="font-bold">FREE</span>
                                        </div>
                                    `;
                                }
                                const card = emotionCards.find(c => c.name === emotion);
                                return `
                                    <div class="bingo-cell" onclick="checkBingoCell(${i}, ${j}, '${emotion}')" id="bingo-${i}-${j}">
                                        <span class="text-3xl">${card ? card.emoji : 'â“'}</span>
                                        <span class="text-sm font-bold">${emotion}</span>
                                    </div>
                                `;
                            }).join('')
                        ).join('')}
                    </div>
                </div>
                
                <div class="text-center mb-4">
                    <p class="text-gray-600">ì˜¤ëŠ˜ ì‹¤ì œë¡œ ëŠë‚€ ê°ì •ë§Œ ì²´í¬í•´ìš”!</p>
                </div>
                
                <div class="text-center">
                    <button onclick="checkBingo()" class="px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold rounded-full hover:scale-105 transition">
                        ë¹™ê³  í™•ì¸í•˜ê¸°
                    </button>
                </div>
            `;
            
            window.checkBingoCell = function(i, j, emotion) {
                const cell = document.getElementById(`bingo-${i}-${j}`);
                cell.classList.toggle('checked');
                checkedCells[i][j] = !checkedCells[i][j];
                
                if (checkedCells[i][j]) {
                    showModal('ğŸ˜Š', emotion, `ì˜¤ëŠ˜ ${emotion}ì„(ë¥¼) ëŠê¼ˆêµ°ìš”!`);
                }
            };
            
            window.checkBingo = function() {
                let bingoCount = 0;
                
                // ê°€ë¡œ ì²´í¬
                for (let i = 0; i < 3; i++) {
                    if (checkedCells[i].every(cell => cell === true)) {
                        bingoCount++;
                    }
                }
                
                // ì„¸ë¡œ ì²´í¬
                for (let j = 0; j < 3; j++) {
                    if (checkedCells.every(row => row[j] === true)) {
                        bingoCount++;
                    }
                }
                
                // ëŒ€ê°ì„  ì²´í¬
                if (checkedCells[0][0] && checkedCells[1][1] && checkedCells[2][2]) {
                    bingoCount++;
                }
                if (checkedCells[0][2] && checkedCells[1][1] && checkedCells[2][0]) {
                    bingoCount++;
                }
                
                const points = bingoCount * 30;
                if (bingoCount > 0) {
                    totalPoints += points;
                    localStorage.setItem('emotionCardPoints', totalPoints);
                    updatePointsDisplay();
                    addActivity('game_completed', { gameType: 'bingo', score: points });
                    showModal('ğŸ‰', `${bingoCount}ì¤„ ë¹™ê³ !`, `ì¶•í•˜í•´ìš”! ${points}ì ì„ íšë“í–ˆì–´ìš”!`);
                    createConfetti();
                } else {
                    showModal('ğŸ’ª', 'ê³„ì† ë„ì „!', 'ë” ë§ì€ ê°ì •ì„ ì²´í¬í•´ì„œ ë¹™ê³ ë¥¼ ë§Œë“¤ì–´ë´ìš”!');
                }
            };
        }

        // ë©”ëª¨ë¦¬ ê²Œì„
        function startMemoryGame() {
            const gameArea = document.getElementById('gameArea');
            const memoryCards = emotionCards.slice(0, 6);
            const gameCards = [...memoryCards, ...memoryCards].sort(() => Math.random() - 0.5);
            
            gameArea.innerHTML = `
                <h3 class="text-xl font-bold mb-4 text-gray-800">ğŸ§© ê°™ì€ ê°ì • ì¹´ë“œë¥¼ ì°¾ì•„ì£¼ì„¸ìš”!</h3>
                <div class="grid grid-cols-4 gap-3">
                    ${gameCards.map((card, index) => `
                        <div class="memory-card bg-purple-500 rounded-lg p-6 text-center cursor-pointer" data-id="${card.id}" data-index="${index}" onclick="flipMemoryCard(this)">
                            <div class="card-content hidden">
                                <div class="text-5xl">${card.emoji}</div>
                                <div class="text-sm font-bold text-white mt-1">${card.name}</div>
                            </div>
                            <div class="card-back text-4xl text-white">?</div>
                        </div>
                    `).join('')}
                </div>
                <div class="mt-4 text-center">
                    <span class="text-gray-600">ì°¾ì€ ìŒ: <span id="pairCount">0</span>/6</span>
                </div>
            `;
            
            let flippedCards = [];
            let matchedPairs = 0;
            
            window.flipMemoryCard = function(card) {
                if (flippedCards.length < 2 && !card.classList.contains('matched')) {
                    card.querySelector('.card-content').classList.remove('hidden');
                    card.querySelector('.card-back').classList.add('hidden');
                    flippedCards.push(card);
                    
                    if (flippedCards.length === 2) {
                        if (flippedCards[0].dataset.id === flippedCards[1].dataset.id) {
                            flippedCards.forEach(c => c.classList.add('matched'));
                            matchedPairs++;
                            document.getElementById('pairCount').textContent = matchedPairs;
                            
                            if (matchedPairs === 6) {
                                totalPoints += 50;
                                localStorage.setItem('emotionCardPoints', totalPoints);
                                updatePointsDisplay();
                                addActivity('game_completed', { gameType: 'memory', score: 50 });
                                showModal('ğŸ†', 'ê²Œì„ ì™„ë£Œ!', 'ëª¨ë“  ìŒì„ ì°¾ì•˜ì–´ìš”! +50ì ');
                            }
                            
                            flippedCards = [];
                        } else {
                            setTimeout(() => {
                                flippedCards.forEach(c => {
                                    c.querySelector('.card-content').classList.add('hidden');
                                    c.querySelector('.card-back').classList.remove('hidden');
                                });
                                flippedCards = [];
                            }, 1000);
                        }
                    }
                }
            };
        }

        // ì»¤ìŠ¤í…€ ì¹´ë“œ ê´€ë ¨ í•¨ìˆ˜
        function selectEmoji(emoji) {
            selectedCustomEmoji = emoji;
            document.getElementById('selectedEmoji').textContent = emoji;
            document.getElementById('previewEmoji').textContent = emoji;
        }

        function selectColor(color) {
            selectedCustomColor = color;
            document.getElementById('previewCardFront').style.background = `linear-gradient(135deg, ${color} 0%, ${color}dd 100%)`;
        }

        // ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
        document.getElementById('customEmotionName').addEventListener('input', function() {
            document.getElementById('previewName').textContent = this.value || 'ê°ì • ì´ë¦„';
            document.getElementById('previewNameBack').textContent = this.value || 'ê°ì • ì´ë¦„';
        });

        document.getElementById('customEmotionDesc').addEventListener('input', function() {
            document.getElementById('previewDesc').textContent = this.value || 'ì„¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”';
        });

        document.getElementById('customEmotionExample').addEventListener('input', function() {
            document.getElementById('previewExample').textContent = 'ì˜ˆì‹œ: ' + (this.value || '-');
        });

        // ì»¤ìŠ¤í…€ ì¹´ë“œ ì €ì¥
        function saveCustomCard() {
            const name = document.getElementById('customEmotionName').value.trim();
            const desc = document.getElementById('customEmotionDesc').value.trim();
            const example = document.getElementById('customEmotionExample').value.trim();
            
            if (!name) {
                alert('ê°ì • ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            if (!desc) {
                alert('ì„¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            const newCard = {
                id: 'custom_' + Date.now(),
                name: name,
                emoji: selectedCustomEmoji,
                color: selectedCustomColor,
                desc: desc,
                example: example || 'ì§ì ‘ ê²½í—˜í•´ë³´ì„¸ìš”',
                createdAt: new Date().toISOString()
            };
            
            customCards.push(newCard);
            localStorage.setItem('customEmotionCards', JSON.stringify(customCards));
            
            // í¬ì¸íŠ¸ ì¶”ê°€
            totalPoints += 20;
            localStorage.setItem('emotionCardPoints', totalPoints);
            updatePointsDisplay();
            
            // í™œë™ ê¸°ë¡
            addActivity('card_created', { cardName: name });
            
            // ì„±ê³µ ë©”ì‹œì§€
            showModal('âœ¨', 'ì¹´ë“œ ìƒì„± ì™„ë£Œ!', `"${name}" ì¹´ë“œë¥¼ ë§Œë“¤ì—ˆì–´ìš”! +20ì `);
            createConfetti();
            
            // í¼ ì´ˆê¸°í™”
            document.getElementById('customEmotionName').value = '';
            document.getElementById('customEmotionDesc').value = '';
            document.getElementById('customEmotionExample').value = '';
            selectedCustomEmoji = 'â“';
            selectedCustomColor = '#A29BFE';
            document.getElementById('selectedEmoji').textContent = 'â“';
            document.getElementById('previewEmoji').textContent = 'â“';
            document.getElementById('previewName').textContent = 'ê°ì • ì´ë¦„';
            document.getElementById('previewNameBack').textContent = 'ê°ì • ì´ë¦„';
            document.getElementById('previewDesc').textContent = 'ì„¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”';
            document.getElementById('previewExample').textContent = 'ì˜ˆì‹œ: -';
            document.getElementById('previewCardFront').style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            
            updateStats();
        }

        // ì»¬ë ‰ì…˜ ë Œë”ë§
        function renderCollection() {
            // ìˆ˜ì§‘í•œ ì¹´ë“œ
            const collectionGrid = document.getElementById('collectionGrid');
            if (collectedCards.length > 0) {
                collectionGrid.innerHTML = collectedCards.map(cardId => {
                    const card = emotionCards.find(c => c.id === cardId);
                    return `
                        <div class="bg-white rounded-xl p-4 text-center shadow-lg">
                            <div class="text-3xl mb-2">${card.emoji}</div>
                            <div class="font-bold text-sm">${card.name}</div>
                        </div>
                    `;
                }).join('');
            } else {
                collectionGrid.innerHTML = '<p class="text-gray-500 col-span-4">ì•„ì§ ìˆ˜ì§‘í•œ ì¹´ë“œê°€ ì—†ì–´ìš”</p>';
            }
            
            // ì»¤ìŠ¤í…€ ì¹´ë“œ
            const customGrid = document.getElementById('customCardsGrid');
            if (customCards.length > 0) {
                customGrid.innerHTML = customCards.map(card => `
                    <div class="bg-white rounded-xl p-4 text-center shadow-lg" style="background: linear-gradient(135deg, ${card.color}22 0%, ${card.color}44 100%)">
                        <div class="text-3xl mb-2">${card.emoji}</div>
                        <div class="font-bold text-sm">${card.name}</div>
                    </div>
                `).join('');
            } else {
                customGrid.innerHTML = '<p class="text-gray-500 col-span-4">ì•„ì§ ë§Œë“  ì¹´ë“œê°€ ì—†ì–´ìš”</p>';
            }
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            const total = emotionCards.length;
            const collected = collectedCards.length;
            const completion = Math.round((collected / total) * 100);
            
            document.getElementById('totalCards').textContent = total;
            document.getElementById('collectedCards').textContent = collected;
            document.getElementById('completionRate').textContent = completion + '%';
            document.getElementById('customCards').textContent = customCards.length;
            document.getElementById('progressText').textContent = `${collected}/${total}`;
            document.getElementById('progressBar').style.width = completion + '%';
        }

        // ëª¨ë‹¬ í‘œì‹œ
        function showModal(icon, title, message) {
            const modal = document.getElementById('successModal');
            const content = document.getElementById('successModalContent');
            
            document.getElementById('modalIcon').textContent = icon;
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalMessage').textContent = message;
            
            modal.classList.remove('hidden');
            setTimeout(() => {
                content.style.transform = 'scale(1)';
            }, 100);
            
            setTimeout(() => {
                closeModal();
            }, 2000);
        }

        // ëª¨ë‹¬ ë‹«ê¸°
        function closeModal() {
            const modal = document.getElementById('successModal');
            const content = document.getElementById('successModalContent');
            content.style.transform = 'scale(0)';
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        // ìƒ‰ì¢…ì´ íš¨ê³¼
        function createConfetti() {
            const colors = ['#FFD93D', '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4'];
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    document.body.appendChild(confetti);
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 50);
            }
        }
    </script>
</body>
</html>