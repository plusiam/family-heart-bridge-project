<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”® ê°ì • ì˜ˆë³´ - ë‚´ì¼ì˜ ê°ì • ë‚ ì”¨ ì˜ˆì¸¡í•˜ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .title-font {
            font-family: 'Jua', sans-serif;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .crystal-ball {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.8), rgba(147,51,234,0.3), rgba(109,40,217,0.6));
            box-shadow: 
                0 0 60px rgba(147,51,234,0.5),
                inset 0 0 60px rgba(147,51,234,0.3),
                0 20px 40px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
            animation: float 3s ease-in-out infinite;
        }
        
        .crystal-ball::before {
            content: '';
            position: absolute;
            top: 10%;
            left: 20%;
            width: 40%;
            height: 40%;
            background: radial-gradient(circle, rgba(255,255,255,0.9), transparent);
            border-radius: 50%;
            filter: blur(10px);
        }
        
        .crystal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            font-size: 80px;
            animation: pulse 2s infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.8; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
        }
        
        .forecast-card {
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .forecast-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #667eea, #764ba2, #f093fb, #f5576c);
            border-radius: 20px;
            opacity: 0;
            z-index: -1;
            transition: opacity 0.3s ease;
        }
        
        .forecast-card:hover::before {
            opacity: 1;
        }
        
        .forecast-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        
        .magic-sparkle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            animation: sparkle 2s linear infinite;
        }
        
        @keyframes sparkle {
            0% { opacity: 0; transform: translateY(0) scale(0); }
            50% { opacity: 1; transform: translateY(-20px) scale(1); }
            100% { opacity: 0; transform: translateY(-40px) scale(0); }
        }
        
        .factor-bubble {
            display: inline-block;
            padding: 8px 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 20px;
            margin: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .factor-bubble:hover {
            transform: scale(1.1) rotate(3deg);
        }
        
        .factor-bubble.selected {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            animation: bounce 0.5s;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .advice-card {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            border-radius: 20px;
            padding: 20px;
            margin: 10px 0;
            position: relative;
            overflow: hidden;
        }
        
        .advice-card::after {
            content: 'ğŸ’¡';
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 80px;
            opacity: 0.2;
        }
        
        .weather-forecast-item {
            background: white;
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .weather-forecast-item:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .accuracy-meter {
            width: 100%;
            height: 30px;
            background: #e5e7eb;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }
        
        .accuracy-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981 0%, #34d399 100%);
            transition: width 1s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .magic-wand {
            display: inline-block;
            animation: wave 2s ease-in-out infinite;
        }
        
        @keyframes wave {
            0%, 100% { transform: rotate(-10deg); }
            50% { transform: rotate(10deg); }
        }
        
        .star-rating {
            display: inline-flex;
            gap: 5px;
        }
        
        .star {
            font-size: 24px;
            color: #e5e7eb;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .star.filled {
            color: #fbbf24;
            animation: starPop 0.3s ease;
        }
        
        @keyframes starPop {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }
        
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f0f;
            animation: confetti-fall 3s linear;
            z-index: 1000;
        }
        
        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50">
    <!-- í—¤ë” -->
    <header class="glass-effect shadow-lg sticky top-0 z-40">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <span class="text-4xl magic-wand">ğŸ”®</span>
                    <div>
                        <h1 class="title-font text-2xl md:text-3xl text-gray-800">ê°ì • ì˜ˆë³´</h1>
                        <p class="text-sm text-gray-600">ë‚´ì¼ì˜ ê°ì • ë‚ ì”¨ë¥¼ ì˜ˆì¸¡í•´ë³´ì„¸ìš”</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="bg-purple-100 px-4 py-2 rounded-full">
                        <span class="text-purple-700 font-bold">
                            ğŸ¯ ì •í™•ë„ <span id="accuracyRate">0</span>%
                        </span>
                    </div>
                    <button onclick="window.location.href='../'" class="px-4 py-2 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition">
                        ğŸ  ë©”ì¸ìœ¼ë¡œ
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="flex justify-center mb-8">
            <div class="glass-effect rounded-full p-1 inline-flex">
                <button onclick="showTab('predict')" id="predictTab" class="tab-btn px-6 py-2 rounded-full bg-purple-500 text-white transition">
                    ğŸ”® ì˜ˆë³´í•˜ê¸°
                </button>
                <button onclick="showTab('weekly')" id="weeklyTab" class="tab-btn px-6 py-2 rounded-full hover:bg-purple-100 transition">
                    ğŸ“… ì£¼ê°„ ì˜ˆë³´
                </button>
                <button onclick="showTab('history')" id="historyTab" class="tab-btn px-6 py-2 rounded-full hover:bg-purple-100 transition">
                    ğŸ“Š ì˜ˆë³´ ê¸°ë¡
                </button>
                <button onclick="showTab('tips')" id="tipsTab" class="tab-btn px-6 py-2 rounded-full hover:bg-purple-100 transition">
                    ğŸ’¡ ê°ì • íŒ
                </button>
            </div>
        </div>

        <!-- ì˜ˆë³´í•˜ê¸° íƒ­ -->
        <div id="predictContent" class="tab-content">
            <!-- ìˆ˜ì •êµ¬ -->
            <div class="flex justify-center mb-8">
                <div class="crystal-ball">
                    <div class="crystal-content" id="crystalEmoji">â“</div>
                    <!-- ë°˜ì§ì„ íš¨ê³¼ -->
                    <div class="magic-sparkle" style="top: 20%; left: 30%; animation-delay: 0s;"></div>
                    <div class="magic-sparkle" style="top: 60%; left: 70%; animation-delay: 0.5s;"></div>
                    <div class="magic-sparkle" style="top: 80%; left: 40%; animation-delay: 1s;"></div>
                    <div class="magic-sparkle" style="top: 40%; left: 80%; animation-delay: 1.5s;"></div>
                </div>
            </div>

            <!-- ì˜ˆë³´ ì…ë ¥ -->
            <div class="glass-effect rounded-3xl p-8 mb-8">
                <h2 class="title-font text-2xl text-center mb-6 text-gray-800">ë‚´ì¼ì˜ ê°ì •ì„ ì˜ˆì¸¡í•´ë³´ì„¸ìš”!</h2>
                
                <!-- STEP 1: ë‚´ì¼ ì¼ì • -->
                <div class="mb-6">
                    <h3 class="font-bold text-lg mb-3 text-purple-700">1ï¸âƒ£ ë‚´ì¼ ì˜ˆì •ëœ ì¼ì€?</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                        <button onclick="toggleFactor(this, 'school')" class="factor-bubble">ğŸ’ í•™êµ/í•™ì›</button>
                        <button onclick="toggleFactor(this, 'test')" class="factor-bubble">ğŸ“ ì‹œí—˜/ë°œí‘œ</button>
                        <button onclick="toggleFactor(this, 'play')" class="factor-bubble">ğŸ® ë†€ì´/ê²Œì„</button>
                        <button onclick="toggleFactor(this, 'friend')" class="factor-bubble">ğŸ‘« ì¹œêµ¬ ë§Œë‚¨</button>
                        <button onclick="toggleFactor(this, 'family')" class="factor-bubble">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ê°€ì¡± ì‹œê°„</button>
                        <button onclick="toggleFactor(this, 'trip')" class="factor-bubble">ğŸš— ì™¸ì¶œ/ì—¬í–‰</button>
                        <button onclick="toggleFactor(this, 'hobby')" class="factor-bubble">ğŸ¨ ì·¨ë¯¸ í™œë™</button>
                        <button onclick="toggleFactor(this, 'rest')" class="factor-bubble">ğŸ˜´ íœ´ì‹</button>
                    </div>
                </div>

                <!-- STEP 2: ì˜¤ëŠ˜ ê¸°ë¶„ -->
                <div class="mb-6">
                    <h3 class="font-bold text-lg mb-3 text-pink-700">2ï¸âƒ£ ì˜¤ëŠ˜ì˜ ê¸°ë¶„ì€ ì–´ë–¤ê°€ìš”?</h3>
                    <div class="flex justify-center gap-4">
                        <button onclick="selectTodayMood('very-bad')" class="weather-forecast-item px-6 py-4">
                            <div class="text-3xl">ğŸ˜¢</div>
                            <div class="text-sm mt-1">ë§¤ìš° ë‚˜ì¨</div>
                        </button>
                        <button onclick="selectTodayMood('bad')" class="weather-forecast-item px-6 py-4">
                            <div class="text-3xl">ğŸ˜Ÿ</div>
                            <div class="text-sm mt-1">ë‚˜ì¨</div>
                        </button>
                        <button onclick="selectTodayMood('normal')" class="weather-forecast-item px-6 py-4">
                            <div class="text-3xl">ğŸ˜</div>
                            <div class="text-sm mt-1">ë³´í†µ</div>
                        </button>
                        <button onclick="selectTodayMood('good')" class="weather-forecast-item px-6 py-4">
                            <div class="text-3xl">ğŸ˜Š</div>
                            <div class="text-sm mt-1">ì¢‹ìŒ</div>
                        </button>
                        <button onclick="selectTodayMood('very-good')" class="weather-forecast-item px-6 py-4">
                            <div class="text-3xl">ğŸ˜„</div>
                            <div class="text-sm mt-1">ë§¤ìš° ì¢‹ìŒ</div>
                        </button>
                    </div>
                </div>

                <!-- STEP 3: ê¸°ëŒ€ê° -->
                <div class="mb-6">
                    <h3 class="font-bold text-lg mb-3 text-blue-700">3ï¸âƒ£ ë‚´ì¼ì— ëŒ€í•œ ê¸°ëŒ€ê°ì€?</h3>
                    <input type="range" id="expectationRange" min="0" max="100" value="50" class="w-full">
                    <div class="flex justify-between text-sm text-gray-600 mt-2">
                        <span>ğŸ˜° ê±±ì •ë¼ìš”</span>
                        <span>ğŸ˜ ê·¸ì € ê·¸ë˜ìš”</span>
                        <span>ğŸ¤— ê¸°ëŒ€ë¼ìš”!</span>
                    </div>
                </div>

                <!-- ì˜ˆë³´ ë²„íŠ¼ -->
                <div class="text-center">
                    <button onclick="generateForecast()" class="px-12 py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xl font-bold rounded-full hover:scale-105 transform transition shadow-lg">
                        ğŸ”® ê°ì • ì˜ˆë³´ ë³´ê¸°
                    </button>
                </div>
            </div>

            <!-- ì˜ˆë³´ ê²°ê³¼ -->
            <div id="forecastResult" class="hidden">
                <div class="glass-effect rounded-3xl p-8">
                    <h2 class="title-font text-2xl text-center mb-6 text-gray-800">ğŸ“Š ë‚´ì¼ì˜ ê°ì • ì˜ˆë³´</h2>
                    
                    <!-- ë©”ì¸ ì˜ˆë³´ -->
                    <div class="text-center mb-6">
                        <div class="inline-block bg-gradient-to-r from-purple-400 to-pink-400 text-white rounded-3xl px-8 py-6">
                            <div class="text-6xl mb-2" id="forecastEmoji">â˜€ï¸</div>
                            <h3 class="text-2xl font-bold" id="forecastWeather">ë§‘ìŒ</h3>
                            <p class="mt-2" id="forecastDesc">ê¸°ë¶„ ì¢‹ì€ í•˜ë£¨ê°€ ë  ê±°ì˜ˆìš”!</p>
                        </div>
                    </div>

                    <!-- ì‹œê°„ëŒ€ë³„ ì˜ˆë³´ -->
                    <div class="mb-6">
                        <h3 class="font-bold text-lg mb-3 text-gray-800">â° ì‹œê°„ëŒ€ë³„ ì˜ˆë³´</h3>
                        <div class="grid grid-cols-4 gap-3">
                            <div class="weather-forecast-item">
                                <p class="text-sm text-gray-600">ì•„ì¹¨</p>
                                <div class="text-2xl my-2" id="morningForecast">â˜€ï¸</div>
                                <p class="text-xs" id="morningDesc">ìƒì¾Œí•œ ì‹œì‘</p>
                            </div>
                            <div class="weather-forecast-item">
                                <p class="text-sm text-gray-600">ì ì‹¬</p>
                                <div class="text-2xl my-2" id="noonForecast">â›…</div>
                                <p class="text-xs" id="noonDesc">í‰ì˜¨í•œ ì‹œê°„</p>
                            </div>
                            <div class="weather-forecast-item">
                                <p class="text-sm text-gray-600">ì €ë…</p>
                                <div class="text-2xl my-2" id="eveningForecast">â˜€ï¸</div>
                                <p class="text-xs" id="eveningDesc">ì¦ê±°ìš´ ë§ˆë¬´ë¦¬</p>
                            </div>
                            <div class="weather-forecast-item">
                                <p class="text-sm text-gray-600">ë°¤</p>
                                <div class="text-2xl my-2" id="nightForecast">ğŸŒ™</div>
                                <p class="text-xs" id="nightDesc">í¸ì•ˆí•œ íœ´ì‹</p>
                            </div>
                        </div>
                    </div>

                    <!-- ì¡°ì–¸ -->
                    <div class="advice-card">
                        <h3 class="font-bold text-lg mb-3">ğŸ’¡ ê°ì • ê´€ë¦¬ íŒ</h3>
                        <ul class="space-y-2" id="adviceList">
                            <li>âœ¨ ê¸ì •ì ì¸ ë§ˆìŒìœ¼ë¡œ í•˜ë£¨ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”</li>
                            <li>ğŸŒˆ ì˜ˆìƒì¹˜ ëª»í•œ ì¢‹ì€ ì¼ì´ ìƒê¸¸ ìˆ˜ ìˆì–´ìš”</li>
                            <li>ğŸ’ª ìì‹ ê°ì„ ê°€ì§€ê³  ë„ì „í•´ë³´ì„¸ìš”</li>
                        </ul>
                    </div>

                    <!-- ì˜ˆë³´ ì •í™•ë„ -->
                    <div class="mt-6">
                        <h3 class="font-bold text-lg mb-3 text-gray-800">ğŸ¯ ì˜ˆë³´ ì‹ ë¢°ë„</h3>
                        <div class="accuracy-meter">
                            <div class="accuracy-fill" id="accuracyBar" style="width: 0%">
                                <span id="accuracyText">0%</span>
                            </div>
                        </div>
                        <p class="text-sm text-gray-600 mt-2">* ë” ë§ì€ ì •ë³´ë¥¼ ì…ë ¥í• ìˆ˜ë¡ ì •í™•ë„ê°€ ë†’ì•„ì ¸ìš”!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì£¼ê°„ ì˜ˆë³´ íƒ­ -->
        <div id="weeklyContent" class="tab-content hidden">
            <div class="glass-effect rounded-3xl p-8">
                <h2 class="title-font text-2xl text-center mb-6 text-gray-800">ğŸ“… ì´ë²ˆ ì£¼ ê°ì • ì˜ˆë³´</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-7 gap-4" id="weeklyForecast">
                    <!-- ìš”ì¼ë³„ ì˜ˆë³´ê°€ ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                </div>

                <!-- ì£¼ê°„ ê·¸ë˜í”„ -->
                <div class="mt-8 bg-white rounded-2xl p-6">
                    <h3 class="font-bold text-lg mb-4">ğŸ“ˆ ì£¼ê°„ ê°ì • ë³€í™” ì˜ˆì¸¡</h3>
                    <canvas id="weeklyChart" width="400" height="200"></canvas>
                </div>

                <!-- ì£¼ê°„ ì´ë²¤íŠ¸ -->
                <div class="mt-6">
                    <h3 class="font-bold text-lg mb-3 text-gray-800">ğŸ“Œ ì´ë²ˆ ì£¼ ì£¼ìš” ì¼ì •</h3>
                    <div class="space-y-2">
                        <input type="text" id="mondayEvent" class="w-full px-4 py-2 rounded-lg border-2 border-purple-200" placeholder="ì›”ìš”ì¼:">
                        <input type="text" id="tuesdayEvent" class="w-full px-4 py-2 rounded-lg border-2 border-purple-200" placeholder="í™”ìš”ì¼:">
                        <input type="text" id="wednesdayEvent" class="w-full px-4 py-2 rounded-lg border-2 border-purple-200" placeholder="ìˆ˜ìš”ì¼:">
                        <input type="text" id="thursdayEvent" class="w-full px-4 py-2 rounded-lg border-2 border-purple-200" placeholder="ëª©ìš”ì¼:">
                        <input type="text" id="fridayEvent" class="w-full px-4 py-2 rounded-lg border-2 border-purple-200" placeholder="ê¸ˆìš”ì¼:">
                        <input type="text" id="saturdayEvent" class="w-full px-4 py-2 rounded-lg border-2 border-purple-200" placeholder="í† ìš”ì¼:">
                        <input type="text" id="sundayEvent" class="w-full px-4 py-2 rounded-lg border-2 border-purple-200" placeholder="ì¼ìš”ì¼:">
                    </div>
                    <button onclick="updateWeeklyForecast()" class="mt-4 w-full px-6 py-3 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition">
                        ğŸ”„ ì£¼ê°„ ì˜ˆë³´ ì—…ë°ì´íŠ¸
                    </button>
                </div>
            </div>
        </div>

        <!-- ì˜ˆë³´ ê¸°ë¡ íƒ­ -->
        <div id="historyContent" class="tab-content hidden">
            <div class="glass-effect rounded-3xl p-8">
                <h2 class="title-font text-2xl text-center mb-6 text-gray-800">ğŸ“Š ë‚˜ì˜ ì˜ˆë³´ ê¸°ë¡</h2>
                
                <!-- ì •í™•ë„ í†µê³„ -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                    <div class="bg-gradient-to-r from-green-400 to-emerald-400 rounded-2xl p-4 text-white text-center">
                        <div class="text-3xl mb-1">âœ…</div>
                        <div class="text-2xl font-bold" id="correctPredictions">0</div>
                        <div class="text-sm">ì •í™•í•œ ì˜ˆë³´</div>
                    </div>
                    <div class="bg-gradient-to-r from-yellow-400 to-orange-400 rounded-2xl p-4 text-white text-center">
                        <div class="text-3xl mb-1">â–</div>
                        <div class="text-2xl font-bold" id="partialPredictions">0</div>
                        <div class="text-sm">ë¶€ë¶„ ì •í™•</div>
                    </div>
                    <div class="bg-gradient-to-r from-red-400 to-pink-400 rounded-2xl p-4 text-white text-center">
                        <div class="text-3xl mb-1">âŒ</div>
                        <div class="text-2xl font-bold" id="wrongPredictions">0</div>
                        <div class="text-sm">í‹€ë¦° ì˜ˆë³´</div>
                    </div>
                </div>

                <!-- ì˜ˆë³´ ëª©ë¡ -->
                <div id="predictionHistory" class="space-y-4">
                    <!-- ì˜ˆë³´ ê¸°ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë¨ -->
                </div>

                <!-- í”¼ë“œë°± ì„¹ì…˜ -->
                <div class="mt-8 bg-purple-50 rounded-2xl p-6">
                    <h3 class="font-bold text-lg mb-3 text-gray-800">ğŸ“ ì˜¤ëŠ˜ì˜ ì˜ˆë³´ëŠ” ë§ì•˜ë‚˜ìš”?</h3>
                    <div class="mb-4">
                        <p class="text-sm text-gray-600 mb-2">ì–´ì œ ì˜ˆì¸¡í•œ ì˜¤ëŠ˜ì˜ ê°ì •:</p>
                        <div class="text-center bg-white rounded-xl p-4">
                            <div class="text-4xl" id="yesterdayPrediction">â“</div>
                            <p class="text-sm text-gray-600 mt-2">ì˜ˆë³´ê°€ ì—†ì–´ìš”</p>
                        </div>
                    </div>
                    <div class="mb-4">
                        <p class="text-sm text-gray-600 mb-2">ì‹¤ì œ ì˜¤ëŠ˜ì˜ ê°ì •ì€?</p>
                        <div class="flex justify-center gap-2">
                            <button onclick="ratePrediction(1)" class="text-3xl hover:scale-125 transition">ğŸ˜¢</button>
                            <button onclick="ratePrediction(2)" class="text-3xl hover:scale-125 transition">ğŸ˜Ÿ</button>
                            <button onclick="ratePrediction(3)" class="text-3xl hover:scale-125 transition">ğŸ˜</button>
                            <button onclick="ratePrediction(4)" class="text-3xl hover:scale-125 transition">ğŸ˜Š</button>
                            <button onclick="ratePrediction(5)" class="text-3xl hover:scale-125 transition">ğŸ˜„</button>
                        </div>
                    </div>
                    <button onclick="saveFeedback()" class="w-full px-6 py-3 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition">
                        ğŸ’¾ í”¼ë“œë°± ì €ì¥
                    </button>
                </div>
            </div>
        </div>

        <!-- ê°ì • íŒ íƒ­ -->
        <div id="tipsContent" class="tab-content hidden">
            <div class="glass-effect rounded-3xl p-8">
                <h2 class="title-font text-2xl text-center mb-6 text-gray-800">ğŸ’¡ ê°ì • ê´€ë¦¬ ê¿€íŒ</h2>
                
                <!-- íŒ ì¹´í…Œê³ ë¦¬ -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- ê¸ì • ê°ì • ìœ ì§€í•˜ê¸° -->
                    <div class="forecast-card bg-gradient-to-r from-yellow-100 to-orange-100 rounded-2xl p-6">
                        <h3 class="font-bold text-lg mb-3 text-orange-700">â˜€ï¸ ê¸ì • ê°ì • ìœ ì§€í•˜ê¸°</h3>
                        <ul class="space-y-2 text-gray-700">
                            <li>âœ… ì•„ì¹¨ì— ê°ì‚¬í•œ 3ê°€ì§€ ìƒê°í•˜ê¸°</li>
                            <li>âœ… ì¢‹ì•„í•˜ëŠ” ìŒì•… ë“£ê¸°</li>
                            <li>âœ… ì¹œêµ¬ì™€ ì¦ê±°ìš´ ëŒ€í™”í•˜ê¸°</li>
                            <li>âœ… ìš´ë™ì´ë‚˜ ì‚°ì±…í•˜ê¸°</li>
                            <li>âœ… ë§›ìˆëŠ” ìŒì‹ ë¨¹ê¸°</li>
                        </ul>
                    </div>

                    <!-- ë¶€ì • ê°ì • ë‹¤ë£¨ê¸° -->
                    <div class="forecast-card bg-gradient-to-r from-blue-100 to-purple-100 rounded-2xl p-6">
                        <h3 class="font-bold text-lg mb-3 text-purple-700">ğŸŒ§ï¸ ë¶€ì • ê°ì • ë‹¤ë£¨ê¸°</h3>
                        <ul class="space-y-2 text-gray-700">
                            <li>ğŸ’™ ê¹Šê²Œ ìˆ¨ì‰¬ê¸° (4ì´ˆ ë“¤ì´ì‰¬ê³  4ì´ˆ ë‚´ì‰¬ê¸°)</li>
                            <li>ğŸ’™ ê°ì •ì„ ì¼ê¸°ì— ì ì–´ë³´ê¸°</li>
                            <li>ğŸ’™ ë¯¿ì„ ìˆ˜ ìˆëŠ” ì‚¬ëŒê³¼ ëŒ€í™”í•˜ê¸°</li>
                            <li>ğŸ’™ ì¢‹ì•„í•˜ëŠ” í™œë™í•˜ê¸°</li>
                            <li>ğŸ’™ ì¶©ë¶„í•œ íœ´ì‹ ì·¨í•˜ê¸°</li>
                        </ul>
                    </div>

                    <!-- ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œë²• -->
                    <div class="forecast-card bg-gradient-to-r from-green-100 to-teal-100 rounded-2xl p-6">
                        <h3 class="font-bold text-lg mb-3 text-green-700">ğŸ’š ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œë²•</h3>
                        <ul class="space-y-2 text-gray-700">
                            <li>ğŸ¨ ê·¸ë¦¼ ê·¸ë¦¬ê¸°ë‚˜ ìƒ‰ì¹ í•˜ê¸°</li>
                            <li>ğŸµ ë…¸ë˜ ë¶€ë¥´ê¸°</li>
                            <li>ğŸ§˜ ëª…ìƒì´ë‚˜ ìš”ê°€</li>
                            <li>ğŸ® ì ë‹¹í•œ ê²Œì„ ì‹œê°„</li>
                            <li>ğŸ“š ì¢‹ì•„í•˜ëŠ” ì±… ì½ê¸°</li>
                        </ul>
                    </div>

                    <!-- ì¢‹ì€ í•˜ë£¨ ë§Œë“¤ê¸° -->
                    <div class="forecast-card bg-gradient-to-r from-pink-100 to-red-100 rounded-2xl p-6">
                        <h3 class="font-bold text-lg mb-3 text-pink-700">ğŸŒˆ ì¢‹ì€ í•˜ë£¨ ë§Œë“¤ê¸°</h3>
                        <ul class="space-y-2 text-gray-700">
                            <li>ğŸŒŸ ì‘ì€ ëª©í‘œ ì„¸ìš°ê³  ë‹¬ì„±í•˜ê¸°</li>
                            <li>ğŸŒŸ ë‹¤ë¥¸ ì‚¬ëŒ ë„ì™€ì£¼ê¸°</li>
                            <li>ğŸŒŸ ìƒˆë¡œìš´ ê²ƒ ì‹œë„í•´ë³´ê¸°</li>
                            <li>ğŸŒŸ ìì‹ ì—ê²Œ ì¹­ì°¬í•˜ê¸°</li>
                            <li>ğŸŒŸ í•˜ë£¨ì˜ ì¢‹ì€ ì  ì°¾ê¸°</li>
                        </ul>
                    </div>
                </div>

                <!-- ê°ì • ì‘ê¸‰ì²˜ì¹˜ -->
                <div class="mt-8 advice-card">
                    <h3 class="font-bold text-xl mb-4">ğŸš¨ ê°ì • ì‘ê¸‰ì²˜ì¹˜</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-white rounded-xl p-4">
                            <h4 class="font-bold text-red-600 mb-2">í™”ë‚  ë•Œ</h4>
                            <p class="text-sm">1ë¶€í„° 10ê¹Œì§€ ì²œì²œíˆ ì„¸ê¸°</p>
                            <p class="text-sm">ì°¨ê°€ìš´ ë¬¼ ë§ˆì‹œê¸°</p>
                            <p class="text-sm">ì¡°ìš©í•œ ê³³ìœ¼ë¡œ ì´ë™</p>
                        </div>
                        <div class="bg-white rounded-xl p-4">
                            <h4 class="font-bold text-blue-600 mb-2">ìŠ¬í”Œ ë•Œ</h4>
                            <p class="text-sm">ëˆˆë¬¼ ì°¸ì§€ ë§ê³  ìš¸ê¸°</p>
                            <p class="text-sm">ë”°ëœ»í•œ ì°¨ ë§ˆì‹œê¸°</p>
                            <p class="text-sm">í¬ê·¼í•œ ì´ë¶ˆ ë®ê¸°</p>
                        </div>
                        <div class="bg-white rounded-xl p-4">
                            <h4 class="font-bold text-purple-600 mb-2">ë¶ˆì•ˆí•  ë•Œ</h4>
                            <p class="text-sm">5-4-3-2-1 ê°ê° ì°¾ê¸°</p>
                            <p class="text-sm">ì•ˆì „í•œ ì¥ì†Œ ìƒìƒ</p>
                            <p class="text-sm">ë¯¿ëŠ” ì‚¬ëŒì—ê²Œ ì—°ë½</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let selectedFactors = [];
        let todayMood = '';
        let predictions = JSON.parse(localStorage.getItem('emotionPredictions') || '[]');
        let weeklyChart = null;

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            setupWeeklyChart();
            loadWeeklyForecast();
            loadPredictionHistory();
            updateAccuracy();
        });

        // íƒ­ ì „í™˜
        function showTab(tab) {
            // ëª¨ë“  íƒ­ ì»¨í…ì¸  ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // ëª¨ë“  íƒ­ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('bg-purple-500', 'text-white');
                btn.classList.add('hover:bg-purple-100');
            });
            
            // ì„ íƒëœ íƒ­ í‘œì‹œ
            document.getElementById(tab + 'Content').classList.remove('hidden');
            document.getElementById(tab + 'Tab').classList.add('bg-purple-500', 'text-white');
            document.getElementById(tab + 'Tab').classList.remove('hover:bg-purple-100');
        }

        // ìš”ì¸ í† ê¸€
        function toggleFactor(element, factor) {
            element.classList.toggle('selected');
            
            if (element.classList.contains('selected')) {
                selectedFactors.push(factor);
            } else {
                selectedFactors = selectedFactors.filter(f => f !== factor);
            }
        }

        // ì˜¤ëŠ˜ ê¸°ë¶„ ì„ íƒ
        function selectTodayMood(mood) {
            todayMood = mood;
            
            // ëª¨ë“  ë²„íŠ¼ ì´ˆê¸°í™”
            document.querySelectorAll('.weather-forecast-item').forEach(item => {
                item.style.background = 'white';
            });
            
            // ì„ íƒëœ ë²„íŠ¼ í•˜ì´ë¼ì´íŠ¸
            event.target.closest('.weather-forecast-item').style.background = 
                'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            event.target.closest('.weather-forecast-item').style.color = 'white';
        }

        // ì˜ˆë³´ ìƒì„±
        function generateForecast() {
            if (!todayMood) {
                alert('ì˜¤ëŠ˜ì˜ ê¸°ë¶„ì„ ì„ íƒí•´ì£¼ì„¸ìš”! ğŸ˜Š');
                return;
            }
            
            const expectation = document.getElementById('expectationRange').value;
            
            // ì˜ˆë³´ ì•Œê³ ë¦¬ì¦˜
            let forecastScore = 50;
            
            // ì˜¤ëŠ˜ ê¸°ë¶„ ì˜í–¥ (30%)
            const moodScores = {
                'very-bad': -20,
                'bad': -10,
                'normal': 0,
                'good': 10,
                'very-good': 20
            };
            forecastScore += moodScores[todayMood];
            
            // ê¸°ëŒ€ê° ì˜í–¥ (30%)
            forecastScore += (expectation - 50) * 0.3;
            
            // ì¼ì • ì˜í–¥ (40%)
            const positiveFactors = ['play', 'friend', 'family', 'hobby', 'rest', 'trip'];
            const negativeFactors = ['test', 'school'];
            
            selectedFactors.forEach(factor => {
                if (positiveFactors.includes(factor)) {
                    forecastScore += 5;
                } else if (negativeFactors.includes(factor)) {
                    forecastScore -= 5;
                }
            });
            
            // ì ìˆ˜ ì œí•œ
            forecastScore = Math.max(0, Math.min(100, forecastScore));
            
            // ì˜ˆë³´ ê²°ê³¼ ìƒì„±
            let weather, emoji, desc;
            if (forecastScore >= 80) {
                weather = 'ë§‘ìŒ';
                emoji = 'â˜€ï¸';
                desc = 'ì•„ì£¼ ê¸°ë¶„ ì¢‹ì€ í•˜ë£¨ê°€ ë  ê±°ì˜ˆìš”!';
            } else if (forecastScore >= 60) {
                weather = 'êµ¬ë¦„ ì¡°ê¸ˆ';
                emoji = 'â›…';
                desc = 'ëŒ€ì²´ë¡œ ì¢‹ì€ í•˜ë£¨ê°€ ë  ê±°ì˜ˆìš”!';
            } else if (forecastScore >= 40) {
                weather = 'íë¦¼';
                emoji = 'â˜ï¸';
                desc = 'í‰ë²”í•œ í•˜ë£¨ê°€ ë  ê±°ì˜ˆìš”';
            } else if (forecastScore >= 20) {
                weather = 'ë¹„';
                emoji = 'ğŸŒ§ï¸';
                desc = 'ì¡°ê¸ˆ í˜ë“  í•˜ë£¨ê°€ ë  ìˆ˜ ìˆì–´ìš”';
            } else {
                weather = 'í­í’';
                emoji = 'â›ˆï¸';
                desc = 'í˜ë“  í•˜ë£¨ì§€ë§Œ ê·¹ë³µí•  ìˆ˜ ìˆì–´ìš”!';
            }
            
            // ê²°ê³¼ í‘œì‹œ
            document.getElementById('crystalEmoji').textContent = emoji;
            document.getElementById('forecastEmoji').textContent = emoji;
            document.getElementById('forecastWeather').textContent = weather;
            document.getElementById('forecastDesc').textContent = desc;
            
            // ì‹œê°„ëŒ€ë³„ ì˜ˆë³´
            generateTimeForecasts(forecastScore);
            
            // ì¡°ì–¸ ìƒì„±
            generateAdvice(forecastScore);
            
            // ì •í™•ë„ ê³„ì‚°
            const accuracy = calculateAccuracy();
            document.getElementById('accuracyBar').style.width = accuracy + '%';
            document.getElementById('accuracyText').textContent = accuracy + '%';
            
            // ê²°ê³¼ í‘œì‹œ
            document.getElementById('forecastResult').classList.remove('hidden');
            
            // ì˜ˆë³´ ì €ì¥
            savePrediction(weather, emoji, forecastScore);
            
            // ì• ë‹ˆë©”ì´ì…˜
            createMagicEffect();
        }

        // ì‹œê°„ëŒ€ë³„ ì˜ˆë³´ ìƒì„±
        function generateTimeForecasts(baseScore) {
            const variations = [-10, -5, 5, 0];
            const times = ['morning', 'noon', 'evening', 'night'];
            const descs = [
                ['í˜ë“  ì‹œì‘', 'ì²œì²œíˆ ì‹œì‘', 'ë³´í†µ ì‹œì‘', 'ì¢‹ì€ ì‹œì‘', 'ìƒì¾Œí•œ ì‹œì‘'],
                ['ì–´ë ¤ìš´ ì‹œê°„', 'ì¡°ê¸ˆ í˜ë“¦', 'í‰ì˜¨í•œ ì‹œê°„', 'ì¦ê±°ìš´ ì‹œê°„', 'í™œê¸°ì°¬ ì‹œê°„'],
                ['í”¼ê³¤í•œ ë§ˆë¬´ë¦¬', 'ì§€ì¹œ ì €ë…', 'í‰ë²”í•œ ì €ë…', 'ì¢‹ì€ ë§ˆë¬´ë¦¬', 'ì¦ê±°ìš´ ë§ˆë¬´ë¦¬'],
                ['ë¶ˆì•ˆí•œ ë°¤', 'ê±±ì •ìŠ¤ëŸ¬ìš´ ë°¤', 'ì¡°ìš©í•œ ë°¤', 'í¸ì•ˆí•œ íœ´ì‹', 'ë‹¬ì½¤í•œ ê¿ˆ']
            ];
            
            times.forEach((time, index) => {
                const score = Math.max(0, Math.min(100, baseScore + variations[index]));
                const emoji = getWeatherEmoji(score);
                const descIndex = Math.floor(score / 20);
                
                document.getElementById(time + 'Forecast').textContent = emoji;
                document.getElementById(time + 'Desc').textContent = descs[index][descIndex];
            });
        }

        // ë‚ ì”¨ ì´ëª¨ì§€ ê°€ì ¸ì˜¤ê¸°
        function getWeatherEmoji(score) {
            if (score >= 80) return 'â˜€ï¸';
            if (score >= 60) return 'â›…';
            if (score >= 40) return 'â˜ï¸';
            if (score >= 20) return 'ğŸŒ§ï¸';
            return 'â›ˆï¸';
        }

        // ì¡°ì–¸ ìƒì„±
        function generateAdvice(score) {
            const adviceList = document.getElementById('adviceList');
            let advice = [];
            
            if (score >= 60) {
                advice = [
                    'âœ¨ ë‚´ì¼ì€ ì¢‹ì€ ì¼ì´ ë§ì„ ê±°ì˜ˆìš”! ê¸ì •ì ì¸ ë§ˆìŒì„ ìœ ì§€í•˜ì„¸ìš”',
                    'ğŸŒˆ ì¢‹ì€ ì—ë„ˆì§€ë¥¼ ë‹¤ë¥¸ ì‚¬ëŒê³¼ ë‚˜ëˆ„ë©´ ë” í–‰ë³µí•´ì§ˆ ê±°ì˜ˆìš”',
                    'ğŸ’ª ìì‹ ê°ì„ ê°€ì§€ê³  ìƒˆë¡œìš´ ë„ì „ì„ í•´ë³´ì„¸ìš”'
                ];
            } else if (score >= 40) {
                advice = [
                    'ğŸŒ± í‰ë²”í•œ í•˜ë£¨ë„ íŠ¹ë³„í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”',
                    'â˜• ì¢‹ì•„í•˜ëŠ” ê²ƒì„ í•˜ë‚˜ ì¤€ë¹„í•´ë‘ë©´ ê¸°ë¶„ì´ ë‚˜ì•„ì§ˆ ê±°ì˜ˆìš”',
                    'ğŸµ ì¢‹ì•„í•˜ëŠ” ìŒì•…ì„ ë“¤ìœ¼ë©° í•˜ë£¨ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”'
                ];
            } else {
                advice = [
                    'ğŸ’™ í˜ë“  ë‚ ì´ì§€ë§Œ ë‹¹ì‹ ì€ ì¶©ë¶„íˆ ê·¹ë³µí•  ìˆ˜ ìˆì–´ìš”',
                    'ğŸ¤— ë„ì›€ì´ í•„ìš”í•˜ë©´ ì£¼ë³€ ì‚¬ëŒì—ê²Œ ë§í•´ë³´ì„¸ìš”',
                    'ğŸŒŸ ì‘ì€ ê²ƒì´ë¼ë„ ê°ì‚¬í•œ ë§ˆìŒì„ ê°€ì ¸ë³´ì„¸ìš”'
                ];
            }
            
            adviceList.innerHTML = advice.map(a => `<li>${a}</li>`).join('');
        }

        // ì •í™•ë„ ê³„ì‚°
        function calculateAccuracy() {
            let accuracy = 30; // ê¸°ë³¸ ì •í™•ë„
            
            if (todayMood) accuracy += 20;
            if (selectedFactors.length > 0) accuracy += selectedFactors.length * 5;
            
            const expectation = document.getElementById('expectationRange').value;
            if (expectation !== '50') accuracy += 10;
            
            // ê³¼ê±° ì˜ˆë³´ ì •í™•ë„ ë°˜ì˜
            const correctRate = getHistoricalAccuracy();
            accuracy = Math.min(95, accuracy + correctRate * 0.2);
            
            return Math.round(accuracy);
        }

        // ê³¼ê±° ì •í™•ë„ ê³„ì‚°
        function getHistoricalAccuracy() {
            if (predictions.length === 0) return 50;
            
            const correct = predictions.filter(p => p.feedback === 'correct').length;
            const partial = predictions.filter(p => p.feedback === 'partial').length;
            const total = predictions.filter(p => p.feedback).length;
            
            if (total === 0) return 50;
            
            return Math.round((correct * 100 + partial * 50) / total);
        }

        // ì˜ˆë³´ ì €ì¥
        function savePrediction(weather, emoji, score) {
            const prediction = {
                id: Date.now(),
                date: new Date().toISOString().split('T')[0],
                targetDate: getTomorrowDate(),
                weather: weather,
                emoji: emoji,
                score: score,
                factors: [...selectedFactors],
                todayMood: todayMood,
                expectation: document.getElementById('expectationRange').value,
                feedback: null
            };
            
            predictions.push(prediction);
            localStorage.setItem('emotionPredictions', JSON.stringify(predictions));
        }

        // ë‚´ì¼ ë‚ ì§œ ê°€ì ¸ì˜¤ê¸°
        function getTomorrowDate() {
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            return tomorrow.toISOString().split('T')[0];
        }

        // ì£¼ê°„ ì°¨íŠ¸ ì„¤ì •
        function setupWeeklyChart() {
            const ctx = document.getElementById('weeklyChart');
            if (!ctx) return;
            
            weeklyChart = new Chart(ctx.getContext('2d'), {
                type: 'line',
                data: {
                    labels: ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'],
                    datasets: [{
                        label: 'ê°ì • ì˜ˆë³´',
                        data: [50, 60, 55, 70, 80, 85, 75],
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    if (value >= 80) return 'â˜€ï¸';
                                    if (value >= 60) return 'â›…';
                                    if (value >= 40) return 'â˜ï¸';
                                    if (value >= 20) return 'ğŸŒ§ï¸';
                                    return 'â›ˆï¸';
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        // ì£¼ê°„ ì˜ˆë³´ ë¡œë“œ
        function loadWeeklyForecast() {
            const days = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'];
            const container = document.getElementById('weeklyForecast');
            
            container.innerHTML = days.map((day, index) => {
                const score = 40 + Math.random() * 40; // ì„ì‹œ ëœë¤ ì ìˆ˜
                const emoji = getWeatherEmoji(score);
                
                return `
                    <div class="weather-forecast-item">
                        <p class="font-bold text-gray-700">${day}</p>
                        <div class="text-3xl my-2">${emoji}</div>
                        <p class="text-xs text-gray-600">ì˜ˆë³´ ëŒ€ê¸°</p>
                    </div>
                `;
            }).join('');
        }

        // ì£¼ê°„ ì˜ˆë³´ ì—…ë°ì´íŠ¸
        function updateWeeklyForecast() {
            const events = [
                document.getElementById('mondayEvent').value,
                document.getElementById('tuesdayEvent').value,
                document.getElementById('wednesdayEvent').value,
                document.getElementById('thursdayEvent').value,
                document.getElementById('fridayEvent').value,
                document.getElementById('saturdayEvent').value,
                document.getElementById('sundayEvent').value
            ];
            
            const scores = events.map(event => {
                let score = 50;
                if (event.includes('ì‹œí—˜') || event.includes('ë°œí‘œ')) score -= 20;
                if (event.includes('ë†€ì´') || event.includes('ì¹œêµ¬')) score += 20;
                if (event.includes('íœ´ì‹') || event.includes('ì—¬í–‰')) score += 15;
                return Math.max(0, Math.min(100, score + Math.random() * 20));
            });
            
            // ì°¨íŠ¸ ì—…ë°ì´íŠ¸
            if (weeklyChart) {
                weeklyChart.data.datasets[0].data = scores;
                weeklyChart.update();
            }
            
            // ì¹´ë“œ ì—…ë°ì´íŠ¸
            loadWeeklyForecast();
            
            alert('ì£¼ê°„ ì˜ˆë³´ê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆì–´ìš”! ğŸ“…');
        }

        // ì˜ˆë³´ ê¸°ë¡ ë¡œë“œ
        function loadPredictionHistory() {
            const container = document.getElementById('predictionHistory');
            const recent = predictions.slice(-5).reverse();
            
            if (recent.length === 0) {
                container.innerHTML = '<p class="text-center text-gray-500">ì•„ì§ ì˜ˆë³´ ê¸°ë¡ì´ ì—†ì–´ìš”</p>';
            } else {
                container.innerHTML = recent.map(pred => {
                    const feedbackIcon = pred.feedback === 'correct' ? 'âœ…' : 
                                        pred.feedback === 'partial' ? 'â–' : 
                                        pred.feedback === 'wrong' ? 'âŒ' : 'â“';
                    
                    return `
                        <div class="forecast-card bg-white rounded-2xl p-6">
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="text-sm text-gray-500">${pred.date} â†’ ${pred.targetDate}</p>
                                    <div class="flex items-center gap-2 mt-2">
                                        <span class="text-3xl">${pred.emoji}</span>
                                        <span class="font-bold">${pred.weather}</span>
                                    </div>
                                </div>
                                <div class="text-2xl">${feedbackIcon}</div>
                            </div>
                        </div>
                    `;
                }).join('');
            }
        }

        // ì •í™•ë„ ì—…ë°ì´íŠ¸
        function updateAccuracy() {
            const accuracy = getHistoricalAccuracy();
            document.getElementById('accuracyRate').textContent = accuracy;
            
            // í†µê³„ ì—…ë°ì´íŠ¸
            const correct = predictions.filter(p => p.feedback === 'correct').length;
            const partial = predictions.filter(p => p.feedback === 'partial').length;
            const wrong = predictions.filter(p => p.feedback === 'wrong').length;
            
            document.getElementById('correctPredictions').textContent = correct;
            document.getElementById('partialPredictions').textContent = partial;
            document.getElementById('wrongPredictions').textContent = wrong;
        }

        // ì˜ˆë³´ í‰ê°€
        function ratePrediction(rating) {
            // ëª¨ë“  ë²„íŠ¼ ì´ˆê¸°í™”
            document.querySelectorAll('button[onclick^="ratePrediction"]').forEach(btn => {
                btn.style.transform = 'scale(1)';
            });
            
            // ì„ íƒëœ ë²„íŠ¼ ê°•ì¡°
            event.target.style.transform = 'scale(1.5)';
            
            // í‰ê°€ ì €ì¥
            window.currentRating = rating;
        }

        // í”¼ë“œë°± ì €ì¥
        function saveFeedback() {
            if (!window.currentRating) {
                alert('ì‹¤ì œ ê°ì •ì„ ì„ íƒí•´ì£¼ì„¸ìš”! ğŸ˜Š');
                return;
            }
            
            // ì–´ì œ ì˜ˆë³´ ì°¾ê¸°
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            const yesterdayStr = yesterday.toISOString().split('T')[0];
            
            const prediction = predictions.find(p => 
                p.date === yesterdayStr && p.targetDate === new Date().toISOString().split('T')[0]
            );
            
            if (prediction) {
                // ì •í™•ë„ ê³„ì‚°
                const scoreDiff = Math.abs(prediction.score - (window.currentRating * 20));
                if (scoreDiff <= 20) {
                    prediction.feedback = 'correct';
                } else if (scoreDiff <= 40) {
                    prediction.feedback = 'partial';
                } else {
                    prediction.feedback = 'wrong';
                }
                
                localStorage.setItem('emotionPredictions', JSON.stringify(predictions));
                
                alert('í”¼ë“œë°±ì´ ì €ì¥ë˜ì—ˆì–´ìš”! ì˜ˆë³´ ì •í™•ë„ê°€ ê°œì„ ë  ê±°ì˜ˆìš” ğŸ¯');
                
                // ê¸°ë¡ ë‹¤ì‹œ ë¡œë“œ
                loadPredictionHistory();
                updateAccuracy();
            } else {
                alert('ì–´ì œ ì˜ˆë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ìš” ğŸ˜…');
            }
            
            window.currentRating = null;
        }

        // ë§ˆë²• íš¨ê³¼
        function createMagicEffect() {
            const colors = ['#667eea', '#764ba2', '#f093fb', '#f5576c'];
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'magic-sparkle';
                    sparkle.style.left = Math.random() * 100 + '%';
                    sparkle.style.top = Math.random() * 100 + '%';
                    sparkle.style.background = colors[Math.floor(Math.random() * colors.length)];
                    sparkle.style.animationDelay = Math.random() * 2 + 's';
                    document.body.appendChild(sparkle);
                    setTimeout(() => sparkle.remove(), 2000);
                }, i * 100);
            }
        }
    </script>
</body>
</html>