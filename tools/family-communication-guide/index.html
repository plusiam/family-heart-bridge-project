<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“– ìš°ë¦¬ ê°€ì¡± ì†Œí†µ ê°€ì´ë“œë¶ - ABC ê¸°ë°˜ ì†Œí†µë²•</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .title-font {
            font-family: 'Jua', sans-serif;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .guidebook-page {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 30px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .guidebook-page::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 10px;
            height: 100%;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
        }
        
        .chapter-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        
        .rule-card {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid #f59e0b;
            border-radius: 15px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .example-card {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border: 2px solid #3b82f6;
            border-radius: 15px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .tip-card {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            border: 2px solid #10b981;
            border-radius: 15px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .situation-card {
            background: white;
            border: 3px solid #e5e7eb;
            border-radius: 20px;
            padding: 20px;
            margin: 15px 0;
            transition: all 0.3s ease;
        }
        
        .situation-card:hover {
            border-color: #667eea;
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.2);
        }
        
        .abc-bubble {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            margin: 5px;
            font-weight: bold;
        }
        
        .bubble-a {
            background: #fef3c7;
            color: #92400e;
        }
        
        .bubble-b {
            background: #dbeafe;
            color: #1e3a8a;
        }
        
        .bubble-c {
            background: #fce7f3;
            color: #831843;
        }
        
        .family-rule {
            background: white;
            border-left: 5px solid #667eea;
            padding: 15px;
            margin: 15px 0;
            border-radius: 10px;
        }
        
        .page-nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        
        .page-btn {
            padding: 10px 20px;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .page-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
        }
        
        .page-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .custom-rule-input {
            width: 100%;
            padding: 10px;
            border: 2px dashed #d1d5db;
            border-radius: 10px;
            background: #f9fafb;
            transition: all 0.3s ease;
        }
        
        .custom-rule-input:focus {
            border-color: #667eea;
            background: white;
            outline: none;
        }
        
        .download-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 15px 30px;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        
        .download-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(16, 185, 129, 0.3);
        }
        
        @media print {
            .no-print {
                display: none !important;
            }
            
            body {
                background: white !important;
            }
            
            .guidebook-page {
                page-break-inside: avoid;
            }
        }
        
        .sticker {
            display: inline-block;
            font-size: 2rem;
            margin: 0 5px;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50">
    <!-- í—¤ë” -->
    <header class="glass-effect shadow-lg sticky top-0 z-40">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <span class="text-4xl float-animation">ğŸ“–</span>
                    <div>
                        <h1 class="title-font text-2xl md:text-3xl text-gray-800">ìš°ë¦¬ ê°€ì¡± ì†Œí†µ ê°€ì´ë“œë¶</h1>
                        <p class="text-sm text-gray-600">ABC ëª¨ë¸ë¡œ ë§Œë“œëŠ” í–‰ë³µí•œ ëŒ€í™”ë²•</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <button onclick="downloadGuidebook()" class="download-btn no-print">
                        ğŸ“¥ ê°€ì´ë“œë¶ ë‹¤ìš´ë¡œë“œ
                    </button>
                    <button onclick="window.location.href='../'" class="px-4 py-2 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition">
                        ğŸ  ë©”ì¸ìœ¼ë¡œ
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <div class="container mx-auto px-4 py-8 max-w-5xl">
        <!-- í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="page-nav no-print">
            <button onclick="showPage(1)" class="page-btn active" id="page1Btn">í‘œì§€</button>
            <button onclick="showPage(2)" class="page-btn" id="page2Btn">ì†Œê°œ</button>
            <button onclick="showPage(3)" class="page-btn" id="page3Btn">ê¸°ë³¸ ê·œì¹™</button>
            <button onclick="showPage(4)" class="page-btn" id="page4Btn">ìƒí™©ë³„ ëŒ€í™”ë²•</button>
            <button onclick="showPage(5)" class="page-btn" id="page5Btn">ìš°ë¦¬ ê°€ì¡± ê·œì¹™</button>
            <button onclick="showPage(6)" class="page-btn" id="page6Btn">ì—°ìŠµí•˜ê¸°</button>
        </div>

        <!-- í˜ì´ì§€ 1: í‘œì§€ -->
        <div id="page1" class="guidebook-page">
            <div class="text-center py-10">
                <div class="text-8xl mb-6">ğŸ“–</div>
                <h1 class="title-font text-5xl mb-4 text-gray-800">ìš°ë¦¬ ê°€ì¡± ì†Œí†µ ê°€ì´ë“œë¶</h1>
                <p class="text-xl text-gray-600 mb-8">ABC ëª¨ë¸ë¡œ ë§Œë“œëŠ” í–‰ë³µí•œ ëŒ€í™”ë²•</p>
                
                <div class="my-10">
                    <div class="inline-flex items-center gap-4">
                        <span class="sticker">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span>
                        <span class="sticker">ğŸ’</span>
                        <span class="sticker">ğŸŒˆ</span>
                    </div>
                </div>
                
                <div class="bg-purple-50 rounded-xl p-6 inline-block">
                    <p class="text-lg mb-2">ì´ ê°€ì´ë“œë¶ì˜ ì£¼ì¸</p>
                    <input type="text" id="ownerName" placeholder="ê°€ì¡± ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" 
                           class="text-2xl font-bold text-center bg-transparent border-b-2 border-purple-300 focus:border-purple-500 outline-none"
                           onchange="saveOwnerName()">
                    <p class="text-sm text-gray-600 mt-2" id="createdDate">2024ë…„ 12ì›”</p>
                </div>
            </div>
        </div>

        <!-- í˜ì´ì§€ 2: ì†Œê°œ -->
        <div id="page2" class="guidebook-page hidden">
            <div class="chapter-header">
                <h2 class="text-2xl font-bold">ğŸ“š Chapter 1. ABC ì†Œí†µë²•ì´ë€?</h2>
            </div>
            
            <div class="mb-6">
                <h3 class="text-xl font-bold mb-4">ğŸ§  ABC ëª¨ë¸ ì´í•´í•˜ê¸°</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="text-center p-4 bg-yellow-50 rounded-xl">
                        <div class="text-4xl mb-2">ğŸ¬</div>
                        <h4 class="font-bold abc-bubble bubble-a">A - Activating Event</h4>
                        <p class="mt-2">ìƒí™©</p>
                        <p class="text-sm text-gray-600">ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚¬ë‚˜ìš”?</p>
                    </div>
                    <div class="text-center p-4 bg-blue-50 rounded-xl">
                        <div class="text-4xl mb-2">ğŸ’­</div>
                        <h4 class="font-bold abc-bubble bubble-b">B - Belief</h4>
                        <p class="mt-2">ìƒê°</p>
                        <p class="text-sm text-gray-600">ì–´ë–¤ ìƒê°ì´ ë“¤ì—ˆë‚˜ìš”?</p>
                    </div>
                    <div class="text-center p-4 bg-pink-50 rounded-xl">
                        <div class="text-4xl mb-2">â¤ï¸</div>
                        <h4 class="font-bold abc-bubble bubble-c">C - Consequence</h4>
                        <p class="mt-2">ê°ì •</p>
                        <p class="text-sm text-gray-600">ì–´ë–¤ ê°ì •ì„ ëŠê¼ˆë‚˜ìš”?</p>
                    </div>
                </div>
            </div>
            
            <div class="tip-card">
                <h4 class="font-bold mb-2">ğŸ’¡ í•µì‹¬ í¬ì¸íŠ¸</h4>
                <p>ê°™ì€ ìƒí™©(A)ì´ë¼ë„ ìƒê°(B)ì´ ë‹¤ë¥´ë©´ ê°ì •(C)ë„ ë‹¬ë¼ì ¸ìš”!</p>
                <p class="mt-2">ê°€ì¡±ì˜ ìƒê°(B)ì„ ì´í•´í•˜ë©´ ê°ì •(C)ë„ ì´í•´í•  ìˆ˜ ìˆì–´ìš”.</p>
            </div>
            
            <div class="mt-6">
                <h3 class="text-xl font-bold mb-4">ğŸ¯ ABC ì†Œí†µë²•ì˜ ëª©í‘œ</h3>
                <ul class="space-y-2">
                    <li class="flex items-start gap-2">
                        <span>âœ…</span>
                        <span>ê°€ì¡±ì˜ ìƒê°ê³¼ ê°ì •ì„ ì •í™•íˆ ì´í•´í•˜ê¸°</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span>âœ…</span>
                        <span>ë‚˜ì˜ ìƒê°ê³¼ ê°ì •ì„ ëª…í™•íˆ ì „ë‹¬í•˜ê¸°</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span>âœ…</span>
                        <span>ì„œë¡œ ë‹¤ë¥¸ ê´€ì ì„ ì¡´ì¤‘í•˜ë©° ëŒ€í™”í•˜ê¸°</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span>âœ…</span>
                        <span>ê°ˆë“±ì„ í‰í™”ë¡­ê²Œ í•´ê²°í•˜ê¸°</span>
                    </li>
                </ul>
            </div>
        </div>

        <!-- í˜ì´ì§€ 3: ê¸°ë³¸ ê·œì¹™ -->
        <div id="page3" class="guidebook-page hidden">
            <div class="chapter-header">
                <h2 class="text-2xl font-bold">ğŸ“‹ Chapter 2. ìš°ë¦¬ ê°€ì¡± ëŒ€í™” ê¸°ë³¸ ê·œì¹™</h2>
            </div>
            
            <div class="rule-card">
                <h3 class="font-bold text-lg mb-2">ğŸ¯ ê·œì¹™ 1: ë¨¼ì € ë“£ê³ , ê·¸ ë‹¤ìŒ ë§í•˜ê¸°</h3>
                <p>ìƒëŒ€ë°©ì˜ ABCë¥¼ ëª¨ë‘ ë“¤ì€ í›„ì— ë‚´ ABCë¥¼ ì´ì•¼ê¸°í•´ìš”.</p>
            </div>
            
            <div class="rule-card">
                <h3 class="font-bold text-lg mb-2">ğŸ¤ ê·œì¹™ 2: "ë‚˜ëŠ”~" ìœ¼ë¡œ ì‹œì‘í•˜ê¸°</h3>
                <p>"ë„ˆëŠ” í•­ìƒ~" ëŒ€ì‹  "ë‚˜ëŠ” ~í•  ë•Œ ~í•œ ê°ì •ì„ ëŠê»´"ë¼ê³  ë§í•´ìš”.</p>
            </div>
            
            <div class="rule-card">
                <h3 class="font-bold text-lg mb-2">â¤ï¸ ê·œì¹™ 3: ê°ì •ì€ ëª¨ë‘ ì†Œì¤‘í•´ìš”</h3>
                <p>ì–´ë–¤ ê°ì •ë„ í‹€ë¦° ê²ƒì´ ì•„ë‹ˆì—ìš”. ëª¨ë“  ê°ì •ì„ ì¡´ì¤‘í•´ìš”.</p>
            </div>
            
            <div class="rule-card">
                <h3 class="font-bold text-lg mb-2">ğŸš« ê·œì¹™ 4: ë¹„ë‚œ ëŒ€ì‹  ì´í•´í•˜ê¸°</h3>
                <p>"ì™œ ê·¸ë¬ì–´?" ëŒ€ì‹  "ë¬´ìŠ¨ ìƒê°ì´ì—ˆì–´?"ë¼ê³  ë¬¼ì–´ë´ìš”.</p>
            </div>
            
            <div class="rule-card">
                <h3 class="font-bold text-lg mb-2">â° ê·œì¹™ 5: íƒ€ì„ì•„ì›ƒ ì¡´ì¤‘í•˜ê¸°</h3>
                <p>ê°ì •ì´ ê²©í•´ì§€ë©´ ì ì‹œ ì‰¬ì–´ê°€ëŠ” ì‹œê°„ì„ ê°€ì ¸ìš”.</p>
            </div>
            
            <div class="example-card mt-6">
                <h4 class="font-bold mb-2">ğŸ’¬ ëŒ€í™” ì˜ˆì‹œ</h4>
                <div class="space-y-2">
                    <p><strong>âŒ ì˜ëª»ëœ ì˜ˆ:</strong> "ë„ˆëŠ” í•­ìƒ ë‚´ ë§ì„ ì•ˆ ë“¤ì–´!"</p>
                    <p><strong>âœ… ì¢‹ì€ ì˜ˆ:</strong> "ë‚˜ëŠ” ë‚´ ì´ì•¼ê¸°ë¥¼ ë“¤ì–´ì£¼ì§€ ì•Šì„ ë•Œ ì„œìš´í•´."</p>
                </div>
            </div>
        </div>

        <!-- í˜ì´ì§€ 4: ìƒí™©ë³„ ëŒ€í™”ë²• -->
        <div id="page4" class="guidebook-page hidden">
            <div class="chapter-header">
                <h2 class="text-2xl font-bold">ğŸ’­ Chapter 3. ìƒí™©ë³„ ABC ëŒ€í™”ë²•</h2>
            </div>
            
            <div class="situation-card">
                <h3 class="font-bold text-lg mb-3">ğŸ˜  í™”ê°€ ë‚¬ì„ ë•Œ</h3>
                <div class="space-y-2">
                    <p><span class="abc-bubble bubble-a">A</span> "ë™ìƒì´ ë‚´ ë¬¼ê±´ì„ í—ˆë½ ì—†ì´ ê°€ì ¸ê°”ì–´ìš”"</p>
                    <p><span class="abc-bubble bubble-b">B</span> "ë‚´ ë¬¼ê±´ì„ ì¡´ì¤‘í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  ìƒê°í–ˆì–´ìš”"</p>
                    <p><span class="abc-bubble bubble-c">C</span> "í™”ê°€ ë‚˜ê³  ì†ìƒí–ˆì–´ìš”"</p>
                </div>
                <div class="tip-card mt-3">
                    <p class="text-sm"><strong>ëŒ€í™”ë²•:</strong> "ë™ìƒì•„, ë‚´ ë¬¼ê±´ì„ ì“¸ ë•ŒëŠ” ë¨¼ì € ë¬¼ì–´ë´ ì£¼ë©´ ì¢‹ê² ì–´. ê·¸ëŸ¼ ê¸°êº¼ì´ ë¹Œë ¤ì¤„ê²Œ."</p>
                </div>
            </div>
            
            <div class="situation-card">
                <h3 class="font-bold text-lg mb-3">ğŸ˜¢ ìŠ¬í”Œ ë•Œ</h3>
                <div class="space-y-2">
                    <p><span class="abc-bubble bubble-a">A</span> "ì¹œêµ¬ì™€ ì‹¸ì› ì–´ìš”"</p>
                    <p><span class="abc-bubble bubble-b">B</span> "ì¹œêµ¬ë¥¼ ìƒì„ê¹Œ ë´ ê±±ì •ë¼ìš”"</p>
                    <p><span class="abc-bubble bubble-c">C</span> "ìŠ¬í”„ê³  ë¶ˆì•ˆí•´ìš”"</p>
                </div>
                <div class="tip-card mt-3">
                    <p class="text-sm"><strong>ê°€ì¡±ì˜ ë°˜ì‘:</strong> "ë§ì´ ì†ìƒí•˜ê² êµ¬ë‚˜. ì¹œêµ¬ì™€ í™”í•´í•  ë°©ë²•ì„ í•¨ê»˜ ìƒê°í•´ë³´ì."</p>
                </div>
            </div>
            
            <div class="situation-card">
                <h3 class="font-bold text-lg mb-3">ğŸ˜Š ê¸°ì  ë•Œ</h3>
                <div class="space-y-2">
                    <p><span class="abc-bubble bubble-a">A</span> "ì‹œí—˜ì—ì„œ 100ì ì„ ë°›ì•˜ì–´ìš”"</p>
                    <p><span class="abc-bubble bubble-b">B</span> "ë…¸ë ¥ì´ ê²°ì‹¤ì„ ë§ºì—ˆë‹¤ê³  ìƒê°í•´ìš”"</p>
                    <p><span class="abc-bubble bubble-c">C</span> "ìë‘ìŠ¤ëŸ½ê³  ê¸°ë»ìš”"</p>
                </div>
                <div class="tip-card mt-3">
                    <p class="text-sm"><strong>í•¨ê»˜ ì¶•í•˜í•˜ê¸°:</strong> "ì •ë§ ìë‘ìŠ¤ëŸ¬ì›Œ! ë„¤ ë…¸ë ¥ì´ ë¹›ì„ ë°œí–ˆêµ¬ë‚˜."</p>
                </div>
            </div>
        </div>

        <!-- í˜ì´ì§€ 5: ìš°ë¦¬ ê°€ì¡±ë§Œì˜ ê·œì¹™ -->
        <div id="page5" class="guidebook-page hidden">
            <div class="chapter-header">
                <h2 class="text-2xl font-bold">ğŸ  Chapter 4. ìš°ë¦¬ ê°€ì¡±ë§Œì˜ íŠ¹ë³„í•œ ê·œì¹™</h2>
            </div>
            
            <div class="mb-6">
                <h3 class="text-xl font-bold mb-4">âœ¨ ìš°ë¦¬ ê°€ì¡± ì†Œí†µ ì•½ì†</h3>
                <div id="familyRules">
                    <div class="family-rule">
                        <input type="text" placeholder="ê·œì¹™ 1: ì˜ˆ) ë§¤ì¼ ì €ë… í•œ ë²ˆì€ ì„œë¡œì˜ í•˜ë£¨ë¥¼ ë¬¼ì–´ë´ìš”" 
                               class="custom-rule-input" onchange="saveFamilyRule(1, this.value)">
                    </div>
                    <div class="family-rule">
                        <input type="text" placeholder="ê·œì¹™ 2: ì˜ˆ) í™”ê°€ ë‚˜ë©´ 10ê¹Œì§€ ì„¸ê³  ì´ì•¼ê¸°í•´ìš”" 
                               class="custom-rule-input" onchange="saveFamilyRule(2, this.value)">
                    </div>
                    <div class="family-rule">
                        <input type="text" placeholder="ê·œì¹™ 3: ì˜ˆ) ê³ ë§ˆì›€ì€ ë°”ë¡œ í‘œí˜„í•´ìš”" 
                               class="custom-rule-input" onchange="saveFamilyRule(3, this.value)">
                    </div>
                    <div class="family-rule">
                        <input type="text" placeholder="ê·œì¹™ 4: ì˜ˆ) ì‹¤ìˆ˜ëŠ” ì„œë¡œ ìš©ì„œí•´ìš”" 
                               class="custom-rule-input" onchange="saveFamilyRule(4, this.value)">
                    </div>
                    <div class="family-rule">
                        <input type="text" placeholder="ê·œì¹™ 5: ì˜ˆ) ë§¤ì£¼ ê°€ì¡± íšŒì˜ ì‹œê°„ì„ ê°€ì ¸ìš”" 
                               class="custom-rule-input" onchange="saveFamilyRule(5, this.value)">
                    </div>
                </div>
            </div>
            
            <div class="bg-purple-50 rounded-xl p-6">
                <h3 class="text-xl font-bold mb-4">ğŸ¯ ìš°ë¦¬ ê°€ì¡± ë¯¸ì…˜</h3>
                <div class="space-y-3">
                    <label class="flex items-center gap-3">
                        <input type="checkbox" class="w-5 h-5" onchange="saveMission(1, this.checked)">
                        <span>ì¼ì£¼ì¼ ë™ì•ˆ ë§¤ì¼ ABC ëŒ€í™”ë²• ì‚¬ìš©í•˜ê¸°</span>
                    </label>
                    <label class="flex items-center gap-3">
                        <input type="checkbox" class="w-5 h-5" onchange="saveMission(2, this.checked)">
                        <span>ê°€ì¡± êµ¬ì„±ì› ëª¨ë‘ì˜ ABC ì¸í„°ë·°í•˜ê¸°</span>
                    </label>
                    <label class="flex items-center gap-3">
                        <input type="checkbox" class="w-5 h-5" onchange="saveMission(3, this.checked)">
                        <span>ê°ˆë“± ìƒí™©ì„ ABCë¡œ í•´ê²°í•˜ê¸°</span>
                    </label>
                    <label class="flex items-center gap-3">
                        <input type="checkbox" class="w-5 h-5" onchange="saveMission(4, this.checked)">
                        <span>ê°€ì¡±ì˜ ê°ì • ì¼ê¸° í•¨ê»˜ ì“°ê¸°</span>
                    </label>
                    <label class="flex items-center gap-3">
                        <input type="checkbox" class="w-5 h-5" onchange="saveMission(5, this.checked)">
                        <span>ë§¤ì¼ ê°ì‚¬ ì¸ì‚¬ ë‚˜ëˆ„ê¸°</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- í˜ì´ì§€ 6: ì—°ìŠµí•˜ê¸° -->
        <div id="page6" class="guidebook-page hidden">
            <div class="chapter-header">
                <h2 class="text-2xl font-bold">ğŸ¯ Chapter 5. ABC ëŒ€í™”ë²• ì—°ìŠµí•˜ê¸°</h2>
            </div>
            
            <div class="mb-6">
                <h3 class="text-xl font-bold mb-4">ğŸ“ ì‹¤ì „ ì—°ìŠµ</h3>
                
                <div class="bg-gray-50 rounded-xl p-6 mb-4">
                    <h4 class="font-bold mb-3">ìƒí™© 1: ìˆ™ì œë¥¼ ì•ˆ í–ˆì„ ë•Œ</h4>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-bold mb-1">A (ìƒí™©):</label>
                            <textarea rows="2" placeholder="ë¬´ìŠ¨ ì¼ì´ ìˆì—ˆë‚˜ìš”?" 
                                      class="w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-purple-400 outline-none"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-bold mb-1">B (ìƒê°):</label>
                            <textarea rows="2" placeholder="ì–´ë–¤ ìƒê°ì´ ë“¤ì—ˆë‚˜ìš”?" 
                                      class="w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-purple-400 outline-none"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-bold mb-1">C (ê°ì •):</label>
                            <textarea rows="2" placeholder="ì–´ë–¤ ê°ì •ì„ ëŠê¼ˆë‚˜ìš”?" 
                                      class="w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-purple-400 outline-none"></textarea>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gray-50 rounded-xl p-6">
                    <h4 class="font-bold mb-3">ìƒí™© 2: ê°€ì¡±ê³¼ ì˜ê²¬ì´ ë‹¤ë¥¼ ë•Œ</h4>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-bold mb-1">A (ìƒí™©):</label>
                            <textarea rows="2" placeholder="ë¬´ìŠ¨ ì¼ì´ ìˆì—ˆë‚˜ìš”?" 
                                      class="w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-purple-400 outline-none"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-bold mb-1">B (ìƒê°):</label>
                            <textarea rows="2" placeholder="ì–´ë–¤ ìƒê°ì´ ë“¤ì—ˆë‚˜ìš”?" 
                                      class="w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-purple-400 outline-none"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-bold mb-1">C (ê°ì •):</label>
                            <textarea rows="2" placeholder="ì–´ë–¤ ê°ì •ì„ ëŠê¼ˆë‚˜ìš”?" 
                                      class="w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-purple-400 outline-none"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tip-card">
                <h4 class="font-bold mb-2">ğŸŒŸ ë§ˆë¬´ë¦¬ ë©”ì‹œì§€</h4>
                <p>ABC ëŒ€í™”ë²•ì€ ì—°ìŠµì´ í•„ìš”í•´ìš”. ì²˜ìŒì—” ì–´ìƒ‰í•´ë„ ê³„ì† ì‚¬ìš©í•˜ë‹¤ ë³´ë©´ ìì—°ìŠ¤ëŸ¬ì›Œì§ˆ ê±°ì˜ˆìš”.</p>
                <p class="mt-2">ê°€ì¡±ê³¼ í•¨ê»˜ í–‰ë³µí•œ ì†Œí†µì„ ë§Œë“¤ì–´ê°€ì„¸ìš”! ğŸ’</p>
            </div>
        </div>

        <!-- ë‹¤ìš´ë¡œë“œ ì•ˆë‚´ -->
        <div class="glass-effect rounded-3xl p-6 mt-8 text-center no-print">
            <h3 class="text-xl font-bold mb-4">ğŸ“¥ ê°€ì´ë“œë¶ ë³´ê´€í•˜ê¸°</h3>
            <p class="text-gray-600 mb-4">ì‘ì„±í•œ ê°€ì´ë“œë¶ì„ PDFë¡œ ë‹¤ìš´ë¡œë“œí•˜ì—¬ ë³´ê´€í•˜ì„¸ìš”!</p>
            <div class="flex justify-center gap-4">
                <button onclick="downloadGuidebook()" class="download-btn">
                    ğŸ“„ PDF ë‹¤ìš´ë¡œë“œ
                </button>
                <button onclick="printGuidebook()" class="px-6 py-3 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition">
                    ğŸ–¨ï¸ ì¸ì‡„í•˜ê¸°
                </button>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let currentPage = 1;
        let guidebookData = {
            ownerName: '',
            familyRules: {},
            missions: {},
            practices: {}
        };

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            loadGuidebook();
            updateDate();
        });

        // ê°€ì´ë“œë¶ ë¶ˆëŸ¬ì˜¤ê¸°
        function loadGuidebook() {
            const saved = localStorage.getItem('familyGuidebook');
            if (saved) {
                guidebookData = JSON.parse(saved);
                
                // ë°ì´í„° ë³µì›
                if (guidebookData.ownerName) {
                    document.getElementById('ownerName').value = guidebookData.ownerName;
                }
                
                // ê°€ì¡± ê·œì¹™ ë³µì›
                Object.keys(guidebookData.familyRules).forEach(key => {
                    const input = document.querySelector(`#familyRules .family-rule:nth-child(${key}) input`);
                    if (input) {
                        input.value = guidebookData.familyRules[key];
                    }
                });
                
                // ë¯¸ì…˜ ë³µì›
                Object.keys(guidebookData.missions).forEach(key => {
                    const checkbox = document.querySelector(`input[type="checkbox"]:nth-of-type(${key})`);
                    if (checkbox) {
                        checkbox.checked = guidebookData.missions[key];
                    }
                });
            }
        }

        // ê°€ì´ë“œë¶ ì €ì¥
        function saveGuidebook() {
            localStorage.setItem('familyGuidebook', JSON.stringify(guidebookData));
        }

        // ì†Œìœ ì ì´ë¦„ ì €ì¥
        function saveOwnerName() {
            guidebookData.ownerName = document.getElementById('ownerName').value;
            saveGuidebook();
        }

        // ê°€ì¡± ê·œì¹™ ì €ì¥
        function saveFamilyRule(index, value) {
            guidebookData.familyRules[index] = value;
            saveGuidebook();
        }

        // ë¯¸ì…˜ ì €ì¥
        function saveMission(index, checked) {
            guidebookData.missions[index] = checked;
            saveGuidebook();
        }

        // ë‚ ì§œ ì—…ë°ì´íŠ¸
        function updateDate() {
            const date = new Date();
            const year = date.getFullYear();
            const month = date.getMonth() + 1;
            document.getElementById('createdDate').textContent = `${year}ë…„ ${month}ì›”`;
        }

        // í˜ì´ì§€ ì „í™˜
        function showPage(pageNum) {
            // ëª¨ë“  í˜ì´ì§€ ìˆ¨ê¸°ê¸°
            for (let i = 1; i <= 6; i++) {
                document.getElementById(`page${i}`).classList.add('hidden');
                document.getElementById(`page${i}Btn`).classList.remove('active');
            }
            
            // ì„ íƒëœ í˜ì´ì§€ í‘œì‹œ
            document.getElementById(`page${pageNum}`).classList.remove('hidden');
            document.getElementById(`page${pageNum}Btn`).classList.add('active');
            
            currentPage = pageNum;
        }

        // ê°€ì´ë“œë¶ ë‹¤ìš´ë¡œë“œ
        async function downloadGuidebook() {
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF('p', 'mm', 'a4');
            
            // ëª¨ë“  í˜ì´ì§€ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ìº¡ì²˜
            for (let i = 1; i <= 6; i++) {
                // í˜ì´ì§€ í‘œì‹œ
                showPage(i);
                
                // ì ì‹œ ëŒ€ê¸° (ë Œë”ë§ ì™„ë£Œ)
                await new Promise(resolve => setTimeout(resolve, 500));
                
                // í˜ì´ì§€ ìº¡ì²˜
                const element = document.getElementById(`page${i}`);
                const canvas = await html2canvas(element, {
                    scale: 2,
                    useCORS: true,
                    logging: false
                });
                
                const imgData = canvas.toDataURL('image/png');
                const imgWidth = 210; // A4 width in mm
                const pageHeight = 297; // A4 height in mm
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                
                if (i > 1) {
                    pdf.addPage();
                }
                
                pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, Math.min(imgHeight, pageHeight));
            }
            
            // PDF ì €ì¥
            const fileName = `ìš°ë¦¬ê°€ì¡±_ì†Œí†µê°€ì´ë“œë¶_${guidebookData.ownerName || 'ë¯¸ì‘ì„±'}.pdf`;
            pdf.save(fileName);
            
            // ì²« í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°
            showPage(1);
        }

        // ì¸ì‡„
        function printGuidebook() {
            // ëª¨ë“  í˜ì´ì§€ í‘œì‹œ
            for (let i = 1; i <= 6; i++) {
                document.getElementById(`page${i}`).classList.remove('hidden');
            }
            
            // ì¸ì‡„
            window.print();
            
            // ì›ë˜ í˜ì´ì§€ë¡œ ë³µê·€
            setTimeout(() => {
                showPage(currentPage);
            }, 100);
        }
    </script>
</body>
</html>