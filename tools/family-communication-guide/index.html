<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>📖 우리 가족 소통 가이드북 - ABC 기반 소통법</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .title-font {
            font-family: 'Jua', sans-serif;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .guidebook-page {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 30px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .guidebook-page::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 10px;
            height: 100%;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
        }
        
        .chapter-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        
        .rule-card {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid #f59e0b;
            border-radius: 15px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .example-card {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border: 2px solid #3b82f6;
            border-radius: 15px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .tip-card {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            border: 2px solid #10b981;
            border-radius: 15px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .situation-card {
            background: white;
            border: 3px solid #e5e7eb;
            border-radius: 20px;
            padding: 20px;
            margin: 15px 0;
            transition: all 0.3s ease;
        }
        
        .situation-card:hover {
            border-color: #667eea;
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.2);
        }
        
        .abc-bubble {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            margin: 5px;
            font-weight: bold;
        }
        
        .bubble-a {
            background: #fef3c7;
            color: #92400e;
        }
        
        .bubble-b {
            background: #dbeafe;
            color: #1e3a8a;
        }
        
        .bubble-c {
            background: #fce7f3;
            color: #831843;
        }
        
        .family-rule {
            background: white;
            border-left: 5px solid #667eea;
            padding: 15px;
            margin: 15px 0;
            border-radius: 10px;
        }
        
        .page-nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        
        .page-btn {
            padding: 10px 20px;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .page-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
        }
        
        .page-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .custom-rule-input {
            width: 100%;
            padding: 10px;
            border: 2px dashed #d1d5db;
            border-radius: 10px;
            background: #f9fafb;
            transition: all 0.3s ease;
        }
        
        .custom-rule-input:focus {
            border-color: #667eea;
            background: white;
            outline: none;
        }
        
        .download-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 15px 30px;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        
        .download-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(16, 185, 129, 0.3);
        }
        
        @media print {
            .no-print {
                display: none !important;
            }
            
            body {
                background: white !important;
            }
            
            .guidebook-page {
                page-break-inside: avoid;
            }
        }
        
        .sticker {
            display: inline-block;
            font-size: 2rem;
            margin: 0 5px;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50">
    <!-- 헤더 -->
    <header class="glass-effect shadow-lg sticky top-0 z-40">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <span class="text-4xl float-animation">📖</span>
                    <div>
                        <h1 class="title-font text-2xl md:text-3xl text-gray-800">우리 가족 소통 가이드북</h1>
                        <p class="text-sm text-gray-600">ABC 모델로 만드는 행복한 대화법</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <button onclick="downloadGuidebook()" class="download-btn no-print">
                        📥 가이드북 다운로드
                    </button>
                    <button onclick="window.location.href='../'" class="px-4 py-2 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition">
                        🏠 메인으로
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- 메인 컨텐츠 -->
    <div class="container mx-auto px-4 py-8 max-w-5xl">
        <!-- 페이지 네비게이션 -->
        <div class="page-nav no-print">
            <button onclick="showPage(1)" class="page-btn active" id="page1Btn">표지</button>
            <button onclick="showPage(2)" class="page-btn" id="page2Btn">소개</button>
            <button onclick="showPage(3)" class="page-btn" id="page3Btn">기본 규칙</button>
            <button onclick="showPage(4)" class="page-btn" id="page4Btn">상황별 대화법</button>
            <button onclick="showPage(5)" class="page-btn" id="page5Btn">우리 가족 규칙</button>
            <button onclick="showPage(6)" class="page-btn" id="page6Btn">연습하기</button>
        </div>

        <!-- 페이지 1: 표지 -->
        <div id="page1" class="guidebook-page">
            <div class="text-center py-10">
                <div class="text-8xl mb-6">📖</div>
                <h1 class="title-font text-5xl mb-4 text-gray-800">우리 가족 소통 가이드북</h1>
                <p class="text-xl text-gray-600 mb-8">ABC 모델로 만드는 행복한 대화법</p>
                
                <div class="my-10">
                    <div class="inline-flex items-center gap-4">
                        <span class="sticker">👨‍👩‍👧‍👦</span>
                        <span class="sticker">💝</span>
                        <span class="sticker">🌈</span>
                    </div>
                </div>
                
                <div class="bg-purple-50 rounded-xl p-6 inline-block">
                    <p class="text-lg mb-2">이 가이드북의 주인</p>
                    <input type="text" id="ownerName" placeholder="가족 이름을 입력하세요" 
                           class="text-2xl font-bold text-center bg-transparent border-b-2 border-purple-300 focus:border-purple-500 outline-none"
                           onchange="saveOwnerName()">
                    <p class="text-sm text-gray-600 mt-2" id="createdDate">2024년 12월</p>
                </div>
            </div>
        </div>

        <!-- 페이지 2: 소개 -->
        <div id="page2" class="guidebook-page hidden">
            <div class="chapter-header">
                <h2 class="text-2xl font-bold">📚 Chapter 1. ABC 소통법이란?</h2>
            </div>
            
            <div class="mb-6">
                <h3 class="text-xl font-bold mb-4">🧠 ABC 모델 이해하기</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="text-center p-4 bg-yellow-50 rounded-xl">
                        <div class="text-4xl mb-2">🎬</div>
                        <h4 class="font-bold abc-bubble bubble-a">A - Activating Event</h4>
                        <p class="mt-2">상황</p>
                        <p class="text-sm text-gray-600">무슨 일이 일어났나요?</p>
                    </div>
                    <div class="text-center p-4 bg-blue-50 rounded-xl">
                        <div class="text-4xl mb-2">💭</div>
                        <h4 class="font-bold abc-bubble bubble-b">B - Belief</h4>
                        <p class="mt-2">생각</p>
                        <p class="text-sm text-gray-600">어떤 생각이 들었나요?</p>
                    </div>
                    <div class="text-center p-4 bg-pink-50 rounded-xl">
                        <div class="text-4xl mb-2">❤️</div>
                        <h4 class="font-bold abc-bubble bubble-c">C - Consequence</h4>
                        <p class="mt-2">감정</p>
                        <p class="text-sm text-gray-600">어떤 감정을 느꼈나요?</p>
                    </div>
                </div>
            </div>
            
            <div class="tip-card">
                <h4 class="font-bold mb-2">💡 핵심 포인트</h4>
                <p>같은 상황(A)이라도 생각(B)이 다르면 감정(C)도 달라져요!</p>
                <p class="mt-2">가족의 생각(B)을 이해하면 감정(C)도 이해할 수 있어요.</p>
            </div>
            
            <div class="mt-6">
                <h3 class="text-xl font-bold mb-4">🎯 ABC 소통법의 목표</h3>
                <ul class="space-y-2">
                    <li class="flex items-start gap-2">
                        <span>✅</span>
                        <span>가족의 생각과 감정을 정확히 이해하기</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span>✅</span>
                        <span>나의 생각과 감정을 명확히 전달하기</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span>✅</span>
                        <span>서로 다른 관점을 존중하며 대화하기</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span>✅</span>
                        <span>갈등을 평화롭게 해결하기</span>
                    </li>
                </ul>
            </div>
        </div>

        <!-- 페이지 3: 기본 규칙 -->
        <div id="page3" class="guidebook-page hidden">
            <div class="chapter-header">
                <h2 class="text-2xl font-bold">📋 Chapter 2. 우리 가족 대화 기본 규칙</h2>
            </div>
            
            <div class="rule-card">
                <h3 class="font-bold text-lg mb-2">🎯 규칙 1: 먼저 듣고, 그 다음 말하기</h3>
                <p>상대방의 ABC를 모두 들은 후에 내 ABC를 이야기해요.</p>
            </div>
            
            <div class="rule-card">
                <h3 class="font-bold text-lg mb-2">🤝 규칙 2: "나는~" 으로 시작하기</h3>
                <p>"너는 항상~" 대신 "나는 ~할 때 ~한 감정을 느껴"라고 말해요.</p>
            </div>
            
            <div class="rule-card">
                <h3 class="font-bold text-lg mb-2">❤️ 규칙 3: 감정은 모두 소중해요</h3>
                <p>어떤 감정도 틀린 것이 아니에요. 모든 감정을 존중해요.</p>
            </div>
            
            <div class="rule-card">
                <h3 class="font-bold text-lg mb-2">🚫 규칙 4: 비난 대신 이해하기</h3>
                <p>"왜 그랬어?" 대신 "무슨 생각이었어?"라고 물어봐요.</p>
            </div>
            
            <div class="rule-card">
                <h3 class="font-bold text-lg mb-2">⏰ 규칙 5: 타임아웃 존중하기</h3>
                <p>감정이 격해지면 잠시 쉬어가는 시간을 가져요.</p>
            </div>
            
            <div class="example-card mt-6">
                <h4 class="font-bold mb-2">💬 대화 예시</h4>
                <div class="space-y-2">
                    <p><strong>❌ 잘못된 예:</strong> "너는 항상 내 말을 안 들어!"</p>
                    <p><strong>✅ 좋은 예:</strong> "나는 내 이야기를 들어주지 않을 때 서운해."</p>
                </div>
            </div>
        </div>

        <!-- 페이지 4: 상황별 대화법 -->
        <div id="page4" class="guidebook-page hidden">
            <div class="chapter-header">
                <h2 class="text-2xl font-bold">💭 Chapter 3. 상황별 ABC 대화법</h2>
            </div>
            
            <div class="situation-card">
                <h3 class="font-bold text-lg mb-3">😠 화가 났을 때</h3>
                <div class="space-y-2">
                    <p><span class="abc-bubble bubble-a">A</span> "동생이 내 물건을 허락 없이 가져갔어요"</p>
                    <p><span class="abc-bubble bubble-b">B</span> "내 물건을 존중하지 않는다고 생각했어요"</p>
                    <p><span class="abc-bubble bubble-c">C</span> "화가 나고 속상했어요"</p>
                </div>
                <div class="tip-card mt-3">
                    <p class="text-sm"><strong>대화법:</strong> "동생아, 내 물건을 쓸 때는 먼저 물어봐 주면 좋겠어. 그럼 기꺼이 빌려줄게."</p>
                </div>
            </div>
            
            <div class="situation-card">
                <h3 class="font-bold text-lg mb-3">😢 슬플 때</h3>
                <div class="space-y-2">
                    <p><span class="abc-bubble bubble-a">A</span> "친구와 싸웠어요"</p>
                    <p><span class="abc-bubble bubble-b">B</span> "친구를 잃을까 봐 걱정돼요"</p>
                    <p><span class="abc-bubble bubble-c">C</span> "슬프고 불안해요"</p>
                </div>
                <div class="tip-card mt-3">
                    <p class="text-sm"><strong>가족의 반응:</strong> "많이 속상하겠구나. 친구와 화해할 방법을 함께 생각해보자."</p>
                </div>
            </div>
            
            <div class="situation-card">
                <h3 class="font-bold text-lg mb-3">😊 기쁠 때</h3>
                <div class="space-y-2">
                    <p><span class="abc-bubble bubble-a">A</span> "시험에서 100점을 받았어요"</p>
                    <p><span class="abc-bubble bubble-b">B</span> "노력이 결실을 맺었다고 생각해요"</p>
                    <p><span class="abc-bubble bubble-c">C</span> "자랑스럽고 기뻐요"</p>
                </div>
                <div class="tip-card mt-3">
                    <p class="text-sm"><strong>함께 축하하기:</strong> "정말 자랑스러워! 네 노력이 빛을 발했구나."</p>
                </div>
            </div>
        </div>

        <!-- 페이지 5: 우리 가족만의 규칙 -->
        <div id="page5" class="guidebook-page hidden">
            <div class="chapter-header">
                <h2 class="text-2xl font-bold">🏠 Chapter 4. 우리 가족만의 특별한 규칙</h2>
            </div>
            
            <div class="mb-6">
                <h3 class="text-xl font-bold mb-4">✨ 우리 가족 소통 약속</h3>
                <div id="familyRules">
                    <div class="family-rule">
                        <input type="text" placeholder="규칙 1: 예) 매일 저녁 한 번은 서로의 하루를 물어봐요" 
                               class="custom-rule-input" onchange="saveFamilyRule(1, this.value)">
                    </div>
                    <div class="family-rule">
                        <input type="text" placeholder="규칙 2: 예) 화가 나면 10까지 세고 이야기해요" 
                               class="custom-rule-input" onchange="saveFamilyRule(2, this.value)">
                    </div>
                    <div class="family-rule">
                        <input type="text" placeholder="규칙 3: 예) 고마움은 바로 표현해요" 
                               class="custom-rule-input" onchange="saveFamilyRule(3, this.value)">
                    </div>
                    <div class="family-rule">
                        <input type="text" placeholder="규칙 4: 예) 실수는 서로 용서해요" 
                               class="custom-rule-input" onchange="saveFamilyRule(4, this.value)">
                    </div>
                    <div class="family-rule">
                        <input type="text" placeholder="규칙 5: 예) 매주 가족 회의 시간을 가져요" 
                               class="custom-rule-input" onchange="saveFamilyRule(5, this.value)">
                    </div>
                </div>
            </div>
            
            <div class="bg-purple-50 rounded-xl p-6">
                <h3 class="text-xl font-bold mb-4">🎯 우리 가족 미션</h3>
                <div class="space-y-3">
                    <label class="flex items-center gap-3">
                        <input type="checkbox" class="w-5 h-5" onchange="saveMission(1, this.checked)">
                        <span>일주일 동안 매일 ABC 대화법 사용하기</span>
                    </label>
                    <label class="flex items-center gap-3">
                        <input type="checkbox" class="w-5 h-5" onchange="saveMission(2, this.checked)">
                        <span>가족 구성원 모두의 ABC 인터뷰하기</span>
                    </label>
                    <label class="flex items-center gap-3">
                        <input type="checkbox" class="w-5 h-5" onchange="saveMission(3, this.checked)">
                        <span>갈등 상황을 ABC로 해결하기</span>
                    </label>
                    <label class="flex items-center gap-3">
                        <input type="checkbox" class="w-5 h-5" onchange="saveMission(4, this.checked)">
                        <span>가족의 감정 일기 함께 쓰기</span>
                    </label>
                    <label class="flex items-center gap-3">
                        <input type="checkbox" class="w-5 h-5" onchange="saveMission(5, this.checked)">
                        <span>매일 감사 인사 나누기</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- 페이지 6: 연습하기 -->
        <div id="page6" class="guidebook-page hidden">
            <div class="chapter-header">
                <h2 class="text-2xl font-bold">🎯 Chapter 5. ABC 대화법 연습하기</h2>
            </div>
            
            <div class="mb-6">
                <h3 class="text-xl font-bold mb-4">📝 실전 연습</h3>
                
                <div class="bg-gray-50 rounded-xl p-6 mb-4">
                    <h4 class="font-bold mb-3">상황 1: 숙제를 안 했을 때</h4>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-bold mb-1">A (상황):</label>
                            <textarea rows="2" placeholder="무슨 일이 있었나요?" 
                                      class="w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-purple-400 outline-none"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-bold mb-1">B (생각):</label>
                            <textarea rows="2" placeholder="어떤 생각이 들었나요?" 
                                      class="w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-purple-400 outline-none"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-bold mb-1">C (감정):</label>
                            <textarea rows="2" placeholder="어떤 감정을 느꼈나요?" 
                                      class="w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-purple-400 outline-none"></textarea>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gray-50 rounded-xl p-6">
                    <h4 class="font-bold mb-3">상황 2: 가족과 의견이 다를 때</h4>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-bold mb-1">A (상황):</label>
                            <textarea rows="2" placeholder="무슨 일이 있었나요?" 
                                      class="w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-purple-400 outline-none"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-bold mb-1">B (생각):</label>
                            <textarea rows="2" placeholder="어떤 생각이 들었나요?" 
                                      class="w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-purple-400 outline-none"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-bold mb-1">C (감정):</label>
                            <textarea rows="2" placeholder="어떤 감정을 느꼈나요?" 
                                      class="w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-purple-400 outline-none"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tip-card">
                <h4 class="font-bold mb-2">🌟 마무리 메시지</h4>
                <p>ABC 대화법은 연습이 필요해요. 처음엔 어색해도 계속 사용하다 보면 자연스러워질 거예요.</p>
                <p class="mt-2">가족과 함께 행복한 소통을 만들어가세요! 💝</p>
            </div>
        </div>

        <!-- 다운로드 안내 -->
        <div class="glass-effect rounded-3xl p-6 mt-8 text-center no-print">
            <h3 class="text-xl font-bold mb-4">📥 가이드북 보관하기</h3>
            <p class="text-gray-600 mb-4">작성한 가이드북을 PDF로 다운로드하여 보관하세요!</p>
            <div class="flex justify-center gap-4">
                <button onclick="downloadGuidebook()" class="download-btn">
                    📄 PDF 다운로드
                </button>
                <button onclick="printGuidebook()" class="px-6 py-3 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition">
                    🖨️ 인쇄하기
                </button>
            </div>
        </div>
    </div>

    <script>
        // 전역 변수
        let currentPage = 1;
        let guidebookData = {
            ownerName: '',
            familyRules: {},
            missions: {},
            practices: {}
        };

        // 초기화
        document.addEventListener('DOMContentLoaded', function() {
            loadGuidebook();
            updateDate();
        });

        // 가이드북 불러오기
        function loadGuidebook() {
            const saved = localStorage.getItem('familyGuidebook');
            if (saved) {
                guidebookData = JSON.parse(saved);
                
                // 데이터 복원
                if (guidebookData.ownerName) {
                    document.getElementById('ownerName').value = guidebookData.ownerName;
                }
                
                // 가족 규칙 복원
                Object.keys(guidebookData.familyRules).forEach(key => {
                    const input = document.querySelector(`#familyRules .family-rule:nth-child(${key}) input`);
                    if (input) {
                        input.value = guidebookData.familyRules[key];
                    }
                });
                
                // 미션 복원
                Object.keys(guidebookData.missions).forEach(key => {
                    const checkbox = document.querySelector(`input[type="checkbox"]:nth-of-type(${key})`);
                    if (checkbox) {
                        checkbox.checked = guidebookData.missions[key];
                    }
                });
            }
        }

        // 가이드북 저장
        function saveGuidebook() {
            localStorage.setItem('familyGuidebook', JSON.stringify(guidebookData));
        }

        // 소유자 이름 저장
        function saveOwnerName() {
            guidebookData.ownerName = document.getElementById('ownerName').value;
            saveGuidebook();
        }

        // 가족 규칙 저장
        function saveFamilyRule(index, value) {
            guidebookData.familyRules[index] = value;
            saveGuidebook();
        }

        // 미션 저장
        function saveMission(index, checked) {
            guidebookData.missions[index] = checked;
            saveGuidebook();
        }

        // 날짜 업데이트
        function updateDate() {
            const date = new Date();
            const year = date.getFullYear();
            const month = date.getMonth() + 1;
            document.getElementById('createdDate').textContent = `${year}년 ${month}월`;
        }

        // 페이지 전환
        function showPage(pageNum) {
            // 모든 페이지 숨기기
            for (let i = 1; i <= 6; i++) {
                document.getElementById(`page${i}`).classList.add('hidden');
                document.getElementById(`page${i}Btn`).classList.remove('active');
            }
            
            // 선택된 페이지 표시
            document.getElementById(`page${pageNum}`).classList.remove('hidden');
            document.getElementById(`page${pageNum}Btn`).classList.add('active');
            
            currentPage = pageNum;
        }

        // 가이드북 다운로드
        async function downloadGuidebook() {
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF('p', 'mm', 'a4');
            
            // 모든 페이지를 순차적으로 캡처
            for (let i = 1; i <= 6; i++) {
                // 페이지 표시
                showPage(i);
                
                // 잠시 대기 (렌더링 완료)
                await new Promise(resolve => setTimeout(resolve, 500));
                
                // 페이지 캡처
                const element = document.getElementById(`page${i}`);
                const canvas = await html2canvas(element, {
                    scale: 2,
                    useCORS: true,
                    logging: false
                });
                
                const imgData = canvas.toDataURL('image/png');
                const imgWidth = 210; // A4 width in mm
                const pageHeight = 297; // A4 height in mm
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                
                if (i > 1) {
                    pdf.addPage();
                }
                
                pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, Math.min(imgHeight, pageHeight));
            }
            
            // PDF 저장
            const fileName = `우리가족_소통가이드북_${guidebookData.ownerName || '미작성'}.pdf`;
            pdf.save(fileName);
            
            // 첫 페이지로 돌아가기
            showPage(1);
        }

        // 인쇄
        function printGuidebook() {
            // 모든 페이지 표시
            for (let i = 1; i <= 6; i++) {
                document.getElementById(`page${i}`).classList.remove('hidden');
            }
            
            // 인쇄
            window.print();
            
            // 원래 페이지로 복귀
            setTimeout(() => {
                showPage(currentPage);
            }, 100);
        }
    </script>
</body>
</html>