<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“š ë§ˆìŒ ë¸Œë¦¿ì§€ í¬íŠ¸í´ë¦¬ì˜¤ - ë‚˜ì˜ ì„±ì¥ ê¸°ë¡</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .title-font {
            font-family: 'Jua', sans-serif;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .portfolio-card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .portfolio-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        }
        
        .portfolio-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        
        .stage-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin: 2px;
        }
        
        .stage-1 {
            background: linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%);
            color: #4338ca;
        }
        
        .stage-2 {
            background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%);
            color: #be185d;
        }
        
        .stage-3 {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            color: #1e40af;
        }
        
        .achievement-card {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid #f59e0b;
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .achievement-card:hover {
            transform: scale(1.05);
        }
        
        .achievement-locked {
            background: #f3f4f6;
            border-color: #d1d5db;
            opacity: 0.5;
        }
        
        .timeline-item {
            position: relative;
            padding-left: 40px;
            margin-bottom: 30px;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            bottom: -30px;
            width: 2px;
            background: #e5e7eb;
        }
        
        .timeline-item:last-child::before {
            display: none;
        }
        
        .timeline-dot {
            position: absolute;
            left: 0;
            top: 5px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            border: 3px solid #667eea;
        }
        
        .growth-chart {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }
        
        .reflection-card {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 2px solid #0ea5e9;
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .tool-completion {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 8px 15px;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 20px;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .tool-completion.completed {
            background: #d1fae5;
            border-color: #10b981;
        }
        
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }
        
        .portfolio-nav {
            display: flex;
            gap: 10px;
            padding: 10px;
            background: white;
            border-radius: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .nav-btn {
            padding: 10px 20px;
            border-radius: 20px;
            background: white;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .nav-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .certificate {
            background: white;
            border: 5px solid gold;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            position: relative;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
        }
        
        .certificate::before {
            content: 'ğŸ†';
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 60px;
        }
        
        @media print {
            .no-print {
                display: none !important;
            }
            
            body {
                background: white !important;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50">
    <!-- í—¤ë” -->
    <header class="glass-effect shadow-lg sticky top-0 z-40">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <span class="text-4xl float-animation">ğŸ“š</span>
                    <div>
                        <h1 class="title-font text-2xl md:text-3xl text-gray-800">ë§ˆìŒ ë¸Œë¦¿ì§€ í¬íŠ¸í´ë¦¬ì˜¤</h1>
                        <p class="text-sm text-gray-600">ë‚˜ì˜ ê°ì • ì„±ì¥ ê¸°ë¡</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="bg-purple-100 px-4 py-2 rounded-full">
                        <span class="text-purple-700 font-bold">
                            ğŸŒŸ ë ˆë²¨ <span id="userLevel">1</span>
                        </span>
                    </div>
                    <button onclick="window.location.href='../'" class="px-4 py-2 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition">
                        ğŸ  ë©”ì¸ìœ¼ë¡œ
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <!-- í”„ë¡œí•„ ì¹´ë“œ -->
        <div class="portfolio-card p-6 mb-8">
            <div class="flex flex-col md:flex-row items-center gap-6">
                <div class="text-center md:text-left">
                    <div class="text-6xl mb-4">ğŸŒˆ</div>
                    <input type="text" id="userName" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" 
                           class="text-2xl font-bold bg-transparent border-b-2 border-purple-300 focus:border-purple-500 outline-none mb-2"
                           onchange="saveProfile()">
                    <p class="text-gray-600">ê°ì • íƒí—˜ê°€</p>
                </div>
                
                <div class="flex-1">
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="text-center">
                            <div class="text-3xl mb-1">ğŸ“</div>
                            <div class="font-bold text-lg" id="totalActivities">0</div>
                            <div class="text-sm text-gray-600">í™œë™ ìˆ˜</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl mb-1">ğŸ†</div>
                            <div class="font-bold text-lg" id="achievements">0</div>
                            <div class="text-sm text-gray-600">ì„±ì·¨</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl mb-1">ğŸ“…</div>
                            <div class="font-bold text-lg" id="activeDays">0</div>
                            <div class="text-sm text-gray-600">í™œë™ì¼</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl mb-1">ğŸ’ª</div>
                            <div class="font-bold text-lg" id="growthRate">0%</div>
                            <div class="text-sm text-gray-600">ì„±ì¥ë¥ </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="flex justify-center mb-8">
            <div class="portfolio-nav">
                <button onclick="showSection('overview')" class="nav-btn active" id="navOverview">
                    ğŸ“Š ê°œìš”
                </button>
                <button onclick="showSection('activities')" class="nav-btn" id="navActivities">
                    ğŸ“ í™œë™ ê¸°ë¡
                </button>
                <button onclick="showSection('achievements')" class="nav-btn" id="navAchievements">
                    ğŸ† ì„±ì·¨
                </button>
                <button onclick="showSection('reflections')" class="nav-btn" id="navReflections">
                    ğŸ’­ ì„±ì°°
                </button>
                <button onclick="showSection('certificate')" class="nav-btn" id="navCertificate">
                    ğŸ“ ìˆ˜ë£Œì¦
                </button>
            </div>
        </div>

        <!-- ê°œìš” ì„¹ì…˜ -->
        <div id="overviewSection" class="section">
            <!-- í•™ìŠµ ì§„í–‰ ìƒí™© -->
            <div class="portfolio-card p-6 mb-6">
                <h3 class="text-xl font-bold mb-4">ğŸ“ˆ ë‚˜ì˜ í•™ìŠµ ì—¬ì •</h3>
                
                <!-- ë‹¨ê³„ë³„ ì§„í–‰ë„ -->
                <div class="space-y-4">
                    <div>
                        <div class="flex justify-between items-center mb-2">
                            <span class="stage-badge stage-1">1ë‹¨ê³„: ë‚˜</span>
                            <span class="text-sm font-bold">80%</span>
                        </div>
                        <div class="h-3 bg-gray-200 rounded-full overflow-hidden">
                            <div class="h-full bg-gradient-to-r from-purple-400 to-purple-600 rounded-full" style="width: 80%"></div>
                        </div>
                    </div>
                    
                    <div>
                        <div class="flex justify-between items-center mb-2">
                            <span class="stage-badge stage-2">2ë‹¨ê³„: ê°€ì¡±</span>
                            <span class="text-sm font-bold">60%</span>
                        </div>
                        <div class="h-3 bg-gray-200 rounded-full overflow-hidden">
                            <div class="h-full bg-gradient-to-r from-pink-400 to-pink-600 rounded-full" style="width: 60%"></div>
                        </div>
                    </div>
                    
                    <div>
                        <div class="flex justify-between items-center mb-2">
                            <span class="stage-badge stage-3">3ë‹¨ê³„: ê³µê°</span>
                            <span class="text-sm font-bold">40%</span>
                        </div>
                        <div class="h-3 bg-gray-200 rounded-full overflow-hidden">
                            <div class="h-full bg-gradient-to-r from-blue-400 to-blue-600 rounded-full" style="width: 40%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ê°ì • ì„±ì¥ ê·¸ë˜í”„ -->
            <div class="portfolio-card p-6 mb-6">
                <h3 class="text-xl font-bold mb-4">ğŸ“Š ê°ì • ì´í•´ë„ ì„±ì¥ ê·¸ë˜í”„</h3>
                <canvas id="growthChart"></canvas>
            </div>

            <!-- ìµœê·¼ í™œë™ -->
            <div class="portfolio-card p-6">
                <h3 class="text-xl font-bold mb-4">â° ìµœê·¼ í™œë™</h3>
                <div class="space-y-3" id="recentActivities">
                    <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                </div>
            </div>
        </div>

        <!-- í™œë™ ê¸°ë¡ ì„¹ì…˜ -->
        <div id="activitiesSection" class="section hidden">
            <div class="portfolio-card p-6">
                <h3 class="text-xl font-bold mb-6">ğŸ“ ë‚˜ì˜ í™œë™ ê¸°ë¡</h3>
                
                <!-- ë„êµ¬ë³„ ì™„ì„±ë„ -->
                <div class="mb-6">
                    <h4 class="font-bold mb-3">ë„êµ¬ ì‚¬ìš© í˜„í™©</h4>
                    <div class="flex flex-wrap" id="toolsStatus">
                        <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                    </div>
                </div>

                <!-- íƒ€ì„ë¼ì¸ -->
                <div class="mb-6">
                    <h4 class="font-bold mb-4">í™œë™ íƒ€ì„ë¼ì¸</h4>
                    <div id="timeline">
                        <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                    </div>
                </div>

                <!-- í™œë™ ì¶”ê°€ -->
                <div class="bg-purple-50 rounded-xl p-4">
                    <h4 class="font-bold mb-3">ìƒˆ í™œë™ ê¸°ë¡í•˜ê¸°</h4>
                    <div class="space-y-3">
                        <select id="activityTool" class="w-full px-3 py-2 rounded-lg border-2 border-purple-200 focus:border-purple-400 outline-none">
                            <option value="">ë„êµ¬ ì„ íƒ...</option>
                            <option value="emotion-weather">ê°ì • ë‚ ì”¨ ì²´í¬ì¸</option>
                            <option value="emotion-diary">ê°ì • ë‚ ì”¨ ì¼ê¸°</option>
                            <option value="emotion-cards">ë””ì§€í„¸ ê°ì • ì¹´ë“œ</option>
                            <option value="family-happy">ê°€ì¡± í–‰ë³µ ìˆœê°„</option>
                            <option value="abc-analyzer">ABC ê°ì • ë¶„ì„ê¸°</option>
                        </select>
                        <textarea id="activityNote" rows="3" placeholder="í™œë™ ë‚´ìš©ì„ ê°„ë‹¨íˆ ì ì–´ì£¼ì„¸ìš”..."
                                  class="w-full px-3 py-2 rounded-lg border-2 border-purple-200 focus:border-purple-400 outline-none"></textarea>
                        <button onclick="addActivity()" class="px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition">
                            â• í™œë™ ì¶”ê°€
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì„±ì·¨ ì„¹ì…˜ -->
        <div id="achievementsSection" class="section hidden">
            <div class="portfolio-card p-6">
                <h3 class="text-xl font-bold mb-6">ğŸ† ë‚˜ì˜ ì„±ì·¨</h3>
                
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="achievement-card" id="achieve1">
                        <div class="text-4xl mb-2">ğŸŒ±</div>
                        <h4 class="font-bold">ì²« ê±¸ìŒ</h4>
                        <p class="text-xs mt-1">ì²« í™œë™ ì™„ë£Œ</p>
                    </div>
                    
                    <div class="achievement-card" id="achieve2">
                        <div class="text-4xl mb-2">ğŸŒ¤ï¸</div>
                        <h4 class="font-bold">ë‚ ì”¨ ê´€ì°°ì</h4>
                        <p class="text-xs mt-1">ê°ì • ë‚ ì”¨ 5íšŒ ê¸°ë¡</p>
                    </div>
                    
                    <div class="achievement-card" id="achieve3">
                        <div class="text-4xl mb-2">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§</div>
                        <h4 class="font-bold">ê°€ì¡± ì‚¬ë‘</h4>
                        <p class="text-xs mt-1">ê°€ì¡± í™œë™ 3ê°œ ì™„ë£Œ</p>
                    </div>
                    
                    <div class="achievement-card" id="achieve4">
                        <div class="text-4xl mb-2">ğŸ§ </div>
                        <h4 class="font-bold">ABC ë§ˆìŠ¤í„°</h4>
                        <p class="text-xs mt-1">ABC ë¶„ì„ 10íšŒ</p>
                    </div>
                    
                    <div class="achievement-card achievement-locked" id="achieve5">
                        <div class="text-4xl mb-2">ğŸ¯</div>
                        <h4 class="font-bold">ì™„ë²½ì£¼ì˜ì</h4>
                        <p class="text-xs mt-1">ëª¨ë“  ë„êµ¬ ì‚¬ìš©</p>
                    </div>
                    
                    <div class="achievement-card achievement-locked" id="achieve6">
                        <div class="text-4xl mb-2">ğŸ“…</div>
                        <h4 class="font-bold">ê¾¸ì¤€í•¨ì˜ í˜</h4>
                        <p class="text-xs mt-1">7ì¼ ì—°ì† í™œë™</p>
                    </div>
                    
                    <div class="achievement-card achievement-locked" id="achieve7">
                        <div class="text-4xl mb-2">ğŸ’</div>
                        <h4 class="font-bold">ê³µê° ì „ë¬¸ê°€</h4>
                        <p class="text-xs mt-1">3ë‹¨ê³„ ì™„ë£Œ</p>
                    </div>
                    
                    <div class="achievement-card achievement-locked" id="achieve8">
                        <div class="text-4xl mb-2">ğŸŒŸ</div>
                        <h4 class="font-bold">ê°ì • ë§ˆìŠ¤í„°</h4>
                        <p class="text-xs mt-1">ì „ì²´ ê³¼ì • ìˆ˜ë£Œ</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì„±ì°° ì„¹ì…˜ -->
        <div id="reflectionsSection" class="section hidden">
            <div class="portfolio-card p-6">
                <h3 class="text-xl font-bold mb-6">ğŸ’­ ë‚˜ì˜ ì„±ì°° ì¼ì§€</h3>
                
                <!-- ì„±ì°° ì…ë ¥ -->
                <div class="reflection-card mb-6">
                    <h4 class="font-bold mb-3">ì˜¤ëŠ˜ì˜ ì„±ì°°</h4>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-bold mb-1">ì˜¤ëŠ˜ ë°°ìš´ ê²ƒì€?</label>
                            <textarea id="todayLearning" rows="2" class="w-full px-3 py-2 rounded-lg border-2 border-blue-200 focus:border-blue-400 outline-none"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-bold mb-1">ê°€ì¥ ê¸°ì–µì— ë‚¨ëŠ” ìˆœê°„ì€?</label>
                            <textarea id="todayMoment" rows="2" class="w-full px-3 py-2 rounded-lg border-2 border-blue-200 focus:border-blue-400 outline-none"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-bold mb-1">ë‚´ì¼ì˜ ëª©í‘œëŠ”?</label>
                            <textarea id="tomorrowGoal" rows="2" class="w-full px-3 py-2 rounded-lg border-2 border-blue-200 focus:border-blue-400 outline-none"></textarea>
                        </div>
                        <button onclick="saveReflection()" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition">
                            ğŸ’¾ ì„±ì°° ì €ì¥
                        </button>
                    </div>
                </div>

                <!-- ì´ì „ ì„±ì°° ëª©ë¡ -->
                <div>
                    <h4 class="font-bold mb-3">ì´ì „ ì„±ì°° ê¸°ë¡</h4>
                    <div id="reflectionList" class="space-y-3">
                        <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ìˆ˜ë£Œì¦ ì„¹ì…˜ -->
        <div id="certificateSection" class="section hidden">
            <div class="certificate" id="certificateCard">
                <h2 class="title-font text-4xl mb-6">ìˆ˜ë£Œì¦</h2>
                
                <div class="mb-8">
                    <p class="text-lg mb-2">ì´ ì¦ì„œëŠ”</p>
                    <p class="text-3xl font-bold text-purple-600 mb-2" id="certName">í•™ìƒ ì´ë¦„</p>
                    <p class="text-lg">í•™ìƒì´</p>
                </div>
                
                <div class="mb-8">
                    <p class="text-xl font-bold mb-2">ë§ˆìŒìœ¼ë¡œ ì‡ëŠ” ìš°ë¦¬ ê°€ì¡±</p>
                    <p class="text-lg">í”„ë¡œì íŠ¸ë¥¼ ì„±ì‹¤íˆ ìˆ˜í–‰í•˜ê³ </p>
                    <p class="text-lg">ê°ì • ì´í•´ì™€ ê³µê° ëŠ¥ë ¥ì„</p>
                    <p class="text-lg">í¬ê²Œ í–¥ìƒì‹œì¼°ìŒì„ ì¦ëª…í•©ë‹ˆë‹¤.</p>
                </div>
                
                <div class="grid grid-cols-3 gap-4 mb-8">
                    <div>
                        <p class="text-sm text-gray-600">ì™„ë£Œ í™œë™</p>
                        <p class="text-2xl font-bold" id="certActivities">0</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-600">íšë“ ì„±ì·¨</p>
                        <p class="text-2xl font-bold" id="certAchievements">0</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-600">ì„±ì¥ë¥ </p>
                        <p class="text-2xl font-bold" id="certGrowth">0%</p>
                    </div>
                </div>
                
                <div class="border-t-2 border-gray-300 pt-6">
                    <p class="text-sm text-gray-600" id="certDate">2024ë…„ 12ì›”</p>
                    <p class="text-lg font-bold mt-2">í•œê¸°ì˜ ì„ ìƒë‹˜</p>
                </div>
            </div>
            
            <div class="flex justify-center gap-4 mt-6">
                <button onclick="downloadCertificate()" class="px-6 py-3 bg-green-500 text-white rounded-xl hover:bg-green-600 transition">
                    ğŸ“¥ ë‹¤ìš´ë¡œë“œ
                </button>
                <button onclick="printCertificate()" class="px-6 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition">
                    ğŸ–¨ï¸ ì¸ì‡„
                </button>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let portfolioData = {
            userName: '',
            level: 1,
            activities: [],
            achievements: [],
            reflections: [],
            stats: {
                totalActivities: 0,
                achievementsCount: 0,
                activeDays: 0,
                growthRate: 0
            }
        };

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            loadPortfolio();
            setupCharts();
            updateDisplay();
        });

        // í¬íŠ¸í´ë¦¬ì˜¤ ë¶ˆëŸ¬ì˜¤ê¸°
        function loadPortfolio() {
            const saved = localStorage.getItem('portfolioData');
            if (saved) {
                portfolioData = JSON.parse(saved);
                document.getElementById('userName').value = portfolioData.userName || '';
            }
            
            // ë‹¤ë¥¸ ë„êµ¬ë“¤ì˜ ë°ì´í„° í†µí•©
            integrateToolsData();
        }

        // ë„êµ¬ ë°ì´í„° í†µí•©
        function integrateToolsData() {
            // ê°ì • ë‚ ì”¨ ë°ì´í„°
            const weatherData = localStorage.getItem('emotionWeatherHistory');
            if (weatherData) {
                const records = JSON.parse(weatherData);
                records.forEach(record => {
                    if (!portfolioData.activities.find(a => a.id === `weather-${record.timestamp}`)) {
                        portfolioData.activities.push({
                            id: `weather-${record.timestamp}`,
                            tool: 'ê°ì • ë‚ ì”¨ ì²´í¬ì¸',
                            date: new Date(record.timestamp),
                            content: `ê°ì • ë‚ ì”¨: ${record.weather}`
                        });
                    }
                });
            }
            
            // ë‹¤ë¥¸ ë„êµ¬ë“¤ë„ ë¹„ìŠ·í•˜ê²Œ í†µí•©...
            
            savePortfolio();
        }

        // í¬íŠ¸í´ë¦¬ì˜¤ ì €ì¥
        function savePortfolio() {
            localStorage.setItem('portfolioData', JSON.stringify(portfolioData));
            updateDisplay();
        }

        // í”„ë¡œí•„ ì €ì¥
        function saveProfile() {
            portfolioData.userName = document.getElementById('userName').value;
            savePortfolio();
            updateCertificate();
        }

        // í™”ë©´ ì—…ë°ì´íŠ¸
        function updateDisplay() {
            // í†µê³„ ì—…ë°ì´íŠ¸
            document.getElementById('userLevel').textContent = portfolioData.level;
            document.getElementById('totalActivities').textContent = portfolioData.activities.length;
            document.getElementById('achievements').textContent = portfolioData.achievements.length;
            document.getElementById('activeDays').textContent = calculateActiveDays();
            document.getElementById('growthRate').textContent = calculateGrowthRate() + '%';
            
            // ìµœê·¼ í™œë™ í‘œì‹œ
            updateRecentActivities();
            
            // ë„êµ¬ ìƒíƒœ í‘œì‹œ
            updateToolsStatus();
            
            // íƒ€ì„ë¼ì¸ í‘œì‹œ
            updateTimeline();
            
            // ì„±ì°° ëª©ë¡ í‘œì‹œ
            updateReflectionList();
            
            // ì„±ì·¨ ì—…ë°ì´íŠ¸
            checkAchievements();
            
            // ìˆ˜ë£Œì¦ ì—…ë°ì´íŠ¸
            updateCertificate();
        }

        // í™œë™ì¼ ê³„ì‚°
        function calculateActiveDays() {
            const dates = new Set();
            portfolioData.activities.forEach(activity => {
                const date = new Date(activity.date).toDateString();
                dates.add(date);
            });
            return dates.size;
        }

        // ì„±ì¥ë¥  ê³„ì‚°
        function calculateGrowthRate() {
            const totalPossible = 16; // ì´ ë„êµ¬ ìˆ˜
            const completed = portfolioData.activities.length;
            return Math.round((completed / totalPossible) * 100);
        }

        // ì„¹ì…˜ ì „í™˜
        function showSection(section) {
            // ëª¨ë“  ì„¹ì…˜ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.section').forEach(s => {
                s.classList.add('hidden');
            });
            
            // ëª¨ë“  ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ ë¹„í™œì„±í™”
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // ì„ íƒëœ ì„¹ì…˜ í‘œì‹œ
            document.getElementById(section + 'Section').classList.remove('hidden');
            document.getElementById('nav' + section.charAt(0).toUpperCase() + section.slice(1)).classList.add('active');
        }

        // í™œë™ ì¶”ê°€
        function addActivity() {
            const tool = document.getElementById('activityTool').value;
            const note = document.getElementById('activityNote').value;
            
            if (!tool || !note) {
                alert('ë„êµ¬ì™€ í™œë™ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            const activity = {
                id: Date.now(),
                tool: tool,
                date: new Date(),
                content: note
            };
            
            portfolioData.activities.push(activity);
            savePortfolio();
            
            // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            document.getElementById('activityTool').value = '';
            document.getElementById('activityNote').value = '';
            
            alert('í™œë™ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        // ì„±ì°° ì €ì¥
        function saveReflection() {
            const learning = document.getElementById('todayLearning').value;
            const moment = document.getElementById('todayMoment').value;
            const goal = document.getElementById('tomorrowGoal').value;
            
            if (!learning || !moment || !goal) {
                alert('ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            const reflection = {
                id: Date.now(),
                date: new Date(),
                learning: learning,
                moment: moment,
                goal: goal
            };
            
            portfolioData.reflections.push(reflection);
            savePortfolio();
            
            // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            document.getElementById('todayLearning').value = '';
            document.getElementById('todayMoment').value = '';
            document.getElementById('tomorrowGoal').value = '';
            
            alert('ì„±ì°°ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        // ìµœê·¼ í™œë™ ì—…ë°ì´íŠ¸
        function updateRecentActivities() {
            const container = document.getElementById('recentActivities');
            const recent = portfolioData.activities.slice(-5).reverse();
            
            if (recent.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center">ì•„ì§ í™œë™ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
            } else {
                container.innerHTML = recent.map(activity => `
                    <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg">
                        <span class="text-2xl">ğŸ“</span>
                        <div class="flex-1">
                            <p class="font-bold">${activity.tool}</p>
                            <p class="text-sm text-gray-600">${activity.content}</p>
                        </div>
                        <span class="text-xs text-gray-500">${new Date(activity.date).toLocaleDateString()}</span>
                    </div>
                `).join('');
            }
        }

        // ë„êµ¬ ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateToolsStatus() {
            const tools = [
                'ê°ì • ë‚ ì”¨ ì²´í¬ì¸', 'ê°ì • ë‚ ì”¨ ì¼ê¸°', 'ë””ì§€í„¸ ê°ì • ì¹´ë“œ',
                'ê°€ì¡± í–‰ë³µ ìˆœê°„', 'ABC ê°ì • ë¶„ì„ê¸°'
            ];
            
            const container = document.getElementById('toolsStatus');
            container.innerHTML = tools.map(tool => {
                const used = portfolioData.activities.some(a => a.tool === tool);
                return `
                    <div class="tool-completion ${used ? 'completed' : ''}">
                        ${used ? 'âœ…' : 'â­•'} ${tool}
                    </div>
                `;
            }).join('');
        }

        // íƒ€ì„ë¼ì¸ ì—…ë°ì´íŠ¸
        function updateTimeline() {
            const container = document.getElementById('timeline');
            const sorted = [...portfolioData.activities].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            container.innerHTML = sorted.slice(0, 10).map(activity => `
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="bg-white p-3 rounded-lg shadow">
                        <p class="font-bold">${activity.tool}</p>
                        <p class="text-sm text-gray-600">${activity.content}</p>
                        <p class="text-xs text-gray-500 mt-1">${new Date(activity.date).toLocaleString()}</p>
                    </div>
                </div>
            `).join('');
        }

        // ì„±ì°° ëª©ë¡ ì—…ë°ì´íŠ¸
        function updateReflectionList() {
            const container = document.getElementById('reflectionList');
            const sorted = [...portfolioData.reflections].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            if (sorted.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center">ì•„ì§ ì„±ì°° ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
            } else {
                container.innerHTML = sorted.slice(0, 5).map(reflection => `
                    <div class="bg-white p-4 rounded-lg shadow">
                        <p class="text-sm text-gray-500 mb-2">${new Date(reflection.date).toLocaleDateString()}</p>
                        <div class="space-y-2">
                            <div>
                                <span class="font-bold text-sm">ë°°ìš´ ê²ƒ:</span>
                                <p class="text-sm">${reflection.learning}</p>
                            </div>
                            <div>
                                <span class="font-bold text-sm">ê¸°ì–µì— ë‚¨ëŠ” ìˆœê°„:</span>
                                <p class="text-sm">${reflection.moment}</p>
                            </div>
                            <div>
                                <span class="font-bold text-sm">ëª©í‘œ:</span>
                                <p class="text-sm">${reflection.goal}</p>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        }

        // ì„±ì·¨ í™•ì¸
        function checkAchievements() {
            // ì²« ê±¸ìŒ
            if (portfolioData.activities.length >= 1) {
                document.getElementById('achieve1').classList.remove('achievement-locked');
            }
            
            // ë‚ ì”¨ ê´€ì°°ì
            const weatherCount = portfolioData.activities.filter(a => a.tool.includes('ë‚ ì”¨')).length;
            if (weatherCount >= 5) {
                document.getElementById('achieve2').classList.remove('achievement-locked');
            }
            
            // ê°€ì¡± ì‚¬ë‘
            const familyCount = portfolioData.activities.filter(a => a.tool.includes('ê°€ì¡±')).length;
            if (familyCount >= 3) {
                document.getElementById('achieve3').classList.remove('achievement-locked');
            }
            
            // ABC ë§ˆìŠ¤í„°
            const abcCount = portfolioData.activities.filter(a => a.tool.includes('ABC')).length;
            if (abcCount >= 10) {
                document.getElementById('achieve4').classList.remove('achievement-locked');
            }
        }

        // ìˆ˜ë£Œì¦ ì—…ë°ì´íŠ¸
        function updateCertificate() {
            document.getElementById('certName').textContent = portfolioData.userName || 'í•™ìƒ ì´ë¦„';
            document.getElementById('certActivities').textContent = portfolioData.activities.length;
            document.getElementById('certAchievements').textContent = 
                document.querySelectorAll('.achievement-card:not(.achievement-locked)').length;
            document.getElementById('certGrowth').textContent = calculateGrowthRate() + '%';
            document.getElementById('certDate').textContent = new Date().toLocaleDateString('ko-KR');
        }

        // ì°¨íŠ¸ ì„¤ì •
        function setupCharts() {
            const ctx = document.getElementById('growthChart');
            if (ctx) {
                new Chart(ctx.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: ['1ì£¼', '2ì£¼', '3ì£¼', '4ì£¼', '5ì£¼', '6ì£¼'],
                        datasets: [{
                            label: 'ê°ì • ì´í•´ë„',
                            data: [20, 35, 45, 60, 75, 85],
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }
        }

        // ìˆ˜ë£Œì¦ ë‹¤ìš´ë¡œë“œ
        function downloadCertificate() {
            html2canvas(document.getElementById('certificateCard')).then(canvas => {
                const link = document.createElement('a');
                link.download = `ë§ˆìŒë¸Œë¦¿ì§€_ìˆ˜ë£Œì¦_${portfolioData.userName}.png`;
                link.href = canvas.toDataURL();
                link.click();
            });
        }

        // ìˆ˜ë£Œì¦ ì¸ì‡„
        function printCertificate() {
            window.print();
        }
    </script>
</body>
</html>