<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ Í∞êÏ†ï 4Î∂ÑÎ©¥ - Í∞êÏ†ïÏùò ÏóêÎÑàÏßÄÏôÄ Î∞©Ìñ• Ïù¥Ìï¥ÌïòÍ∏∞</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .title-font {
            font-family: 'Jua', sans-serif;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* 4Î∂ÑÎ©¥ Ïª®ÌÖåÏù¥ÎÑà */
        .quadrant-board {
            position: relative;
            width: 500px;
            height: 500px;
            max-width: 90vw;
            max-height: 90vw;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        /* 4Î∂ÑÎ©¥ ÏòÅÏó≠ */
        .quadrant-section {
            position: absolute;
            width: 50%;
            height: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.3;
            transition: opacity 0.3s ease;
        }
        
        .quadrant-section:hover {
            opacity: 0.5;
        }
        
        .q-top-right {
            top: 0;
            right: 0;
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
        }
        
        .q-top-left {
            top: 0;
            left: 0;
            background: linear-gradient(135deg, #ff7675 0%, #fd79a8 100%);
        }
        
        .q-bottom-left {
            bottom: 0;
            left: 0;
            background: linear-gradient(135deg, #74b9ff 0%, #a29bfe 100%);
        }
        
        .q-bottom-right {
            bottom: 0;
            right: 0;
            background: linear-gradient(135deg, #55efc4 0%, #81ecec 100%);
        }
        
        /* Ï∂ï */
        .axis {
            position: absolute;
            background: #4a5568;
            z-index: 5;
        }
        
        .axis-x {
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            transform: translateY(-50%);
        }
        
        .axis-y {
            left: 50%;
            top: 0;
            bottom: 0;
            width: 2px;
            transform: translateX(-50%);
        }
        
        /* Ï∂ï Î†àÏù¥Î∏î */
        .axis-label {
            position: absolute;
            background: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            z-index: 10;
        }
        
        .label-energy-high {
            top: 5px;
            left: 50%;
            transform: translateX(-50%);
            color: #f59e0b;
        }
        
        .label-energy-low {
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
            color: #3b82f6;
        }
        
        .label-mood-negative {
            left: 5px;
            top: 50%;
            transform: translateY(-50%);
            color: #ef4444;
        }
        
        .label-mood-positive {
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            color: #10b981;
        }
        
        /* Í∞êÏ†ï Ï†ê */
        .emotion-point {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: move;
            transition: transform 0.2s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 20;
            user-select: none;
        }
        
        .emotion-point:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
            z-index: 30;
        }
        
        .emotion-point.dragging {
            cursor: grabbing;
            transform: scale(1.15);
            box-shadow: 0 8px 30px rgba(0,0,0,0.3);
            z-index: 100;
        }
        
        /* Í∞êÏ†ï Ïù¥Î¶Ñ ÌëúÏãú */
        .emotion-label {
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 11px;
            white-space: nowrap;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        
        .emotion-point:hover .emotion-label {
            opacity: 1;
        }
        
        /* Í∞êÏ†ï ÏÑ†ÌÉù Î≤ÑÌäº */
        .emotion-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
        }
        
        .emotion-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-color: #667eea;
        }
        
        .emotion-btn.placed {
            background: #f3f4f6;
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .emotion-btn.placed:hover {
            transform: none;
            box-shadow: none;
        }
        
        /* Î∂ÑÎ©¥ Ï†ïÎ≥¥ Ïπ¥Îìú */
        .quadrant-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .quadrant-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .quadrant-card.active {
            border: 2px solid #667eea;
            background: linear-gradient(135deg, rgba(102,126,234,0.05) 0%, rgba(118,75,162,0.05) 100%);
        }
        
        /* Î∂ÑÏÑù Í≤∞Í≥º Ïπ¥Îìú */
        .analysis-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 20px;
            padding: 24px;
            position: relative;
            overflow: hidden;
        }
        
        .analysis-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 3s infinite;
        }
        
        @keyframes shimmer {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }
        
        /* ÌôúÎèô Ïπ¥Îìú */
        .activity-card {
            background: white;
            border-radius: 15px;
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .activity-card:hover {
            border-color: #667eea;
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(102,126,234,0.2);
        }
        
        /* Ï∞®Ìä∏ Ïª®ÌÖåÏù¥ÎÑà */
        .chart-container {
            position: relative;
            width: 100%;
            height: 300px;
        }
        
        /* Ïï†ÎãàÎ©îÏù¥ÏÖò */
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }
        
        /* Î™®Î∞îÏùº ÎåÄÏùë */
        @media (max-width: 640px) {
            .quadrant-board {
                width: 350px;
                height: 350px;
            }
            
            .emotion-point {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }
            
            .axis-label {
                font-size: 10px;
                padding: 2px 8px;
            }
        }
        
        /* Ìà¥ÌåÅ */
        .tooltip {
            position: absolute;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        
        .tooltip.show {
            opacity: 1;
        }
        
        /* Ïä§ÏúÑÏπò Î≤ÑÌäº */
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #667eea;
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50">
    <!-- Ìó§Îçî -->
    <header class="glass-effect shadow-lg sticky top-0 z-40">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <span class="text-4xl float-animation">üéØ</span>
                    <div>
                        <h1 class="title-font text-2xl md:text-3xl text-gray-800">Í∞êÏ†ï 4Î∂ÑÎ©¥</h1>
                        <p class="text-sm text-gray-600">Í∞êÏ†ïÏùò ÏóêÎÑàÏßÄÏôÄ Í∏∞Î∂ÑÏùÑ ÏãúÍ∞ÅÌôîÌï¥Ïöî</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="bg-purple-100 px-4 py-2 rounded-full">
                        <span class="text-purple-700 font-bold">
                            üìç <span id="emotionCount">0</span>Í∞ú Í∞êÏ†ï
                        </span>
                    </div>
                    <button onclick="window.location.href='../'" class="px-4 py-2 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition">
                        üè† Î©îÏù∏ÏúºÎ°ú
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Î©îÏù∏ Ïª®ÌÖêÏ∏† -->
    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <!-- ÏÜåÍ∞ú Î∞∞ÎÑà -->
        <div class="glass-effect rounded-3xl p-6 mb-8">
            <div class="text-center">
                <h2 class="title-font text-3xl text-gray-800 mb-4">Í∞êÏ†ïÏùÑ 2Ï∞®ÏõêÏúºÎ°ú Ïù¥Ìï¥ÌïòÍ∏∞</h2>
                <p class="text-gray-600 mb-6">
                    Î™®Îì† Í∞êÏ†ïÏùÄ <span class="font-bold text-orange-500">ÏóêÎÑàÏßÄ ÏàòÏ§Ä</span>Í≥º 
                    <span class="font-bold text-green-500">Í∏çÏ†ï/Î∂ÄÏ†ï Ï†ïÎèÑ</span>Î°ú Î∂ÑÎ•òÌï† Ïàò ÏûàÏñ¥Ïöî
                </p>
                
                <!-- 4Î∂ÑÎ©¥ ÎØ∏Îãà ÏÑ§Î™Ö -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="quadrant-card" onclick="showQuadrantDetail(1)">
                        <div class="text-3xl mb-2">üòÑ</div>
                        <h3 class="font-bold text-yellow-600">ÌôúÍ∏∞Ï∞¨</h3>
                        <p class="text-xs text-gray-600 mt-1">ÎÜíÏùÄ ÏóêÎÑàÏßÄ + Í∏çÏ†ïÏ†Å</p>
                    </div>
                    <div class="quadrant-card" onclick="showQuadrantDetail(2)">
                        <div class="text-3xl mb-2">üò§</div>
                        <h3 class="font-bold text-red-600">Í≤©Î†¨Ìïú</h3>
                        <p class="text-xs text-gray-600 mt-1">ÎÜíÏùÄ ÏóêÎÑàÏßÄ + Î∂ÄÏ†ïÏ†Å</p>
                    </div>
                    <div class="quadrant-card" onclick="showQuadrantDetail(3)">
                        <div class="text-3xl mb-2">üò¢</div>
                        <h3 class="font-bold text-blue-600">Í∞ÄÎùºÏïâÏùÄ</h3>
                        <p class="text-xs text-gray-600 mt-1">ÎÇÆÏùÄ ÏóêÎÑàÏßÄ + Î∂ÄÏ†ïÏ†Å</p>
                    </div>
                    <div class="quadrant-card" onclick="showQuadrantDetail(4)">
                        <div class="text-3xl mb-2">üòå</div>
                        <h3 class="font-bold text-green-600">ÌèâÏò®Ìïú</h3>
                        <p class="text-xs text-gray-600 mt-1">ÎÇÆÏùÄ ÏóêÎÑàÏßÄ + Í∏çÏ†ïÏ†Å</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÌÉ≠ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
        <div class="flex justify-center mb-8">
            <div class="glass-effect rounded-full p-1 inline-flex">
                <button onclick="showTab('create')" id="createTab" class="tab-btn px-6 py-2 rounded-full bg-purple-500 text-white transition">
                    üé® 4Î∂ÑÎ©¥ ÎßåÎì§Í∏∞
                </button>
                <button onclick="showTab('analyze')" id="analyzeTab" class="tab-btn px-6 py-2 rounded-full hover:bg-purple-100 transition">
                    üìä Í∞êÏ†ï Î∂ÑÏÑù
                </button>
                <button onclick="showTab('recommend')" id="recommendTab" class="tab-btn px-6 py-2 rounded-full hover:bg-purple-100 transition">
                    üí° ÌôúÎèô Ï∂îÏ≤ú
                </button>
                <button onclick="showTab('history')" id="historyTab" class="tab-btn px-6 py-2 rounded-full hover:bg-purple-100 transition">
                    üìö Í∏∞Î°ù Î≥¥Í∏∞
                </button>
            </div>
        </div>

        <!-- 4Î∂ÑÎ©¥ ÎßåÎì§Í∏∞ ÌÉ≠ -->
        <div id="createContent" class="tab-content">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- ÏôºÏ™Ω: 4Î∂ÑÎ©¥ Î≥¥Îìú -->
                <div>
                    <div class="glass-effect rounded-3xl p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="font-bold text-lg text-gray-800">ÎÇòÏùò Í∞êÏ†ï 4Î∂ÑÎ©¥</h3>
                            <div class="flex gap-2">
                                <button onclick="clearBoard()" class="px-3 py-1 bg-red-500 text-white text-sm rounded-full hover:bg-red-600 transition">
                                    üóëÔ∏è Ï¥àÍ∏∞Ìôî
                                </button>
                                <button onclick="saveQuadrant()" class="px-3 py-1 bg-green-500 text-white text-sm rounded-full hover:bg-green-600 transition">
                                    üíæ Ï†ÄÏû•
                                </button>
                            </div>
                        </div>
                        
                        <div class="quadrant-board" id="quadrantBoard">
                            <!-- 4Î∂ÑÎ©¥ Î∞∞Í≤Ω -->
                            <div class="quadrant-section q-top-right"></div>
                            <div class="quadrant-section q-top-left"></div>
                            <div class="quadrant-section q-bottom-left"></div>
                            <div class="quadrant-section q-bottom-right"></div>
                            
                            <!-- Ï∂ï -->
                            <div class="axis axis-x"></div>
                            <div class="axis axis-y"></div>
                            
                            <!-- Ï∂ï Î†àÏù¥Î∏î -->
                            <div class="axis-label label-energy-high">‚¨ÜÔ∏è ÎÜíÏùÄ ÏóêÎÑàÏßÄ</div>
                            <div class="axis-label label-energy-low">‚¨áÔ∏è ÎÇÆÏùÄ ÏóêÎÑàÏßÄ</div>
                            <div class="axis-label label-mood-negative">‚¨ÖÔ∏è Î∂ÄÏ†ïÏ†Å</div>
                            <div class="axis-label label-mood-positive">‚û°Ô∏è Í∏çÏ†ïÏ†Å</div>
                        </div>
                        
                        <!-- Ï¢åÌëú ÌëúÏãú -->
                        <div class="mt-4 text-center">
                            <div class="inline-block bg-white rounded-full px-4 py-2 shadow-md">
                                <span class="text-sm font-bold text-gray-600">Ï¢åÌëú: </span>
                                <span id="coordinateDisplay" class="text-sm font-bold text-purple-600">X: 0, Y: 0</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ïò§Î•∏Ï™Ω: Í∞êÏ†ï ÏÑ†ÌÉù Ìå®ÎÑê -->
                <div>
                    <div class="glass-effect rounded-3xl p-6">
                        <h3 class="font-bold text-lg text-gray-800 mb-4">Í∞êÏ†ï ÏÑ†ÌÉùÌïòÍ∏∞</h3>
                        
                        <!-- Îπ†Î•∏ ÏÑ†ÌÉù -->
                        <div class="mb-6">
                            <h4 class="font-bold text-sm text-gray-600 mb-3">üöÄ Îπ†Î•∏ ÏÑ†ÌÉù</h4>
                            <div class="grid grid-cols-2 gap-2">
                                <button onclick="quickPlace('happy')" class="px-4 py-3 bg-yellow-100 rounded-xl hover:bg-yellow-200 transition">
                                    üòä ÏßÄÍ∏à ÌñâÎ≥µÌï¥Ïöî
                                </button>
                                <button onclick="quickPlace('sad')" class="px-4 py-3 bg-blue-100 rounded-xl hover:bg-blue-200 transition">
                                    üò¢ Ï°∞Í∏à Ïä¨ÌçºÏöî
                                </button>
                                <button onclick="quickPlace('angry')" class="px-4 py-3 bg-red-100 rounded-xl hover:bg-red-200 transition">
                                    üò† ÌôîÍ∞Ä ÎÇòÏöî
                                </button>
                                <button onclick="quickPlace('calm')" class="px-4 py-3 bg-green-100 rounded-xl hover:bg-green-200 transition">
                                    üòå Ï∞®Î∂ÑÌï¥Ïöî
                                </button>
                            </div>
                        </div>
                        
                        <!-- ÏÉÅÏÑ∏ Í∞êÏ†ï Î™©Î°ù -->
                        <div>
                            <h4 class="font-bold text-sm text-gray-600 mb-3">üìù ÏÉÅÏÑ∏ Í∞êÏ†ï</h4>
                            
                            <!-- 1ÏÇ¨Î∂ÑÎ©¥ -->
                            <div class="mb-4">
                                <h5 class="text-xs font-bold text-yellow-600 mb-2">ÌôúÍ∏∞Ï∞¨ Í∞êÏ†ï (1ÏÇ¨Î∂ÑÎ©¥)</h5>
                                <div class="flex flex-wrap gap-2">
                                    <button onclick="addEmotion('üòÑ', 'Í∏∞ÏÅ®', 70, 70)" class="emotion-btn">
                                        <span>üòÑ</span><span>Í∏∞ÏÅ®</span>
                                    </button>
                                    <button onclick="addEmotion('ü§ó', 'Ïã†ÎÇ®', 80, 60)" class="emotion-btn">
                                        <span>ü§ó</span><span>Ïã†ÎÇ®</span>
                                    </button>
                                    <button onclick="addEmotion('ü•≥', 'Ìù•Î∂Ñ', 90, 80)" class="emotion-btn">
                                        <span>ü•≥</span><span>Ìù•Î∂Ñ</span>
                                    </button>
                                    <button onclick="addEmotion('üòç', 'ÏÇ¨Îûë', 60, 85)" class="emotion-btn">
                                        <span>üòç</span><span>ÏÇ¨Îûë</span>
                                    </button>
                                    <button onclick="addEmotion('üí™', 'ÏûêÏã†Í∞ê', 75, 65)" class="emotion-btn">
                                        <span>üí™</span><span>ÏûêÏã†Í∞ê</span>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- 2ÏÇ¨Î∂ÑÎ©¥ -->
                            <div class="mb-4">
                                <h5 class="text-xs font-bold text-red-600 mb-2">Í≤©Î†¨Ìïú Í∞êÏ†ï (2ÏÇ¨Î∂ÑÎ©¥)</h5>
                                <div class="flex flex-wrap gap-2">
                                    <button onclick="addEmotion('üò†', 'ÌôîÎÇ®', -70, 70)" class="emotion-btn">
                                        <span>üò†</span><span>ÌôîÎÇ®</span>
                                    </button>
                                    <button onclick="addEmotion('üò§', 'ÏßúÏ¶ù', -60, 60)" class="emotion-btn">
                                        <span>üò§</span><span>ÏßúÏ¶ù</span>
                                    </button>
                                    <button onclick="addEmotion('üò®', 'ÎëêÎ†§ÏõÄ', -80, 75)" class="emotion-btn">
                                        <span>üò®</span><span>ÎëêÎ†§ÏõÄ</span>
                                    </button>
                                    <button onclick="addEmotion('üò∞', 'Î∂àÏïà', -75, 80)" class="emotion-btn">
                                        <span>üò∞</span><span>Î∂àÏïà</span>
                                    </button>
                                    <button onclick="addEmotion('üò´', 'Ïä§Ìä∏Î†àÏä§', -85, 85)" class="emotion-btn">
                                        <span>üò´</span><span>Ïä§Ìä∏Î†àÏä§</span>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- 3ÏÇ¨Î∂ÑÎ©¥ -->
                            <div class="mb-4">
                                <h5 class="text-xs font-bold text-blue-600 mb-2">Í∞ÄÎùºÏïâÏùÄ Í∞êÏ†ï (3ÏÇ¨Î∂ÑÎ©¥)</h5>
                                <div class="flex flex-wrap gap-2">
                                    <button onclick="addEmotion('üò¢', 'Ïä¨Ìîî', -70, -70)" class="emotion-btn">
                                        <span>üò¢</span><span>Ïä¨Ìîî</span>
                                    </button>
                                    <button onclick="addEmotion('üòî', 'Ïö∞Ïö∏', -80, -80)" class="emotion-btn">
                                        <span>üòî</span><span>Ïö∞Ïö∏</span>
                                    </button>
                                    <button onclick="addEmotion('üòû', 'Ïã§Îßù', -60, -60)" class="emotion-btn">
                                        <span>üòû</span><span>Ïã§Îßù</span>
                                    </button>
                                    <button onclick="addEmotion('üò¥', 'ÌîºÍ≥§', -50, -75)" class="emotion-btn">
                                        <span>üò¥</span><span>ÌîºÍ≥§</span>
                                    </button>
                                    <button onclick="addEmotion('üò™', 'Î¨¥Í∏∞Î†•', -85, -85)" class="emotion-btn">
                                        <span>üò™</span><span>Î¨¥Í∏∞Î†•</span>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- 4ÏÇ¨Î∂ÑÎ©¥ -->
                            <div class="mb-4">
                                <h5 class="text-xs font-bold text-green-600 mb-2">ÌèâÏò®Ìïú Í∞êÏ†ï (4ÏÇ¨Î∂ÑÎ©¥)</h5>
                                <div class="flex flex-wrap gap-2">
                                    <button onclick="addEmotion('üòå', 'ÌèâÏò®', 70, -70)" class="emotion-btn">
                                        <span>üòå</span><span>ÌèâÏò®</span>
                                    </button>
                                    <button onclick="addEmotion('üòä', 'ÎßåÏ°±', 60, -60)" class="emotion-btn">
                                        <span>üòä</span><span>ÎßåÏ°±</span>
                                    </button>
                                    <button onclick="addEmotion('üôè', 'Í∞êÏÇ¨', 75, -50)" class="emotion-btn">
                                        <span>üôè</span><span>Í∞êÏÇ¨</span>
                                    </button>
                                    <button onclick="addEmotion('üòá', 'ÌèâÌôî', 80, -75)" class="emotion-btn">
                                        <span>üòá</span><span>ÌèâÌôî</span>
                                    </button>
                                    <button onclick="addEmotion('‚ò∫Ô∏è', 'ÏïàÎèÑ', 50, -65)" class="emotion-btn">
                                        <span>‚ò∫Ô∏è</span><span>ÏïàÎèÑ</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Ïª§Ïä§ÌÖÄ Í∞êÏ†ï -->
                        <div class="mt-6 bg-purple-50 rounded-xl p-4">
                            <h4 class="font-bold text-sm text-purple-700 mb-3">‚ú® ÎÇòÎßåÏùò Í∞êÏ†ï Ï∂îÍ∞Ä</h4>
                            <div class="flex gap-2">
                                <input type="text" id="customName" placeholder="Í∞êÏ†ï Ïù¥Î¶Ñ" class="flex-1 px-3 py-2 rounded-lg border-2 border-purple-200 focus:border-purple-400 focus:outline-none text-sm">
                                <select id="customEmoji" class="px-3 py-2 rounded-lg border-2 border-purple-200 focus:border-purple-400 focus:outline-none">
                                    <option>üí≠</option>
                                    <option>üíó</option>
                                    <option>üí¢</option>
                                    <option>üíß</option>
                                    <option>‚ú®</option>
                                    <option>üåü</option>
                                    <option>üí´</option>
                                </select>
                                <button onclick="addCustomEmotion()" class="px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition text-sm">
                                    Ï∂îÍ∞Ä
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Í∞êÏ†ï Î∂ÑÏÑù ÌÉ≠ -->
        <div id="analyzeContent" class="tab-content hidden">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Î∂ÑÏÑù Ïπ¥Îìú -->
                <div class="analysis-card">
                    <h3 class="text-xl font-bold mb-4">üìä Í∞êÏ†ï Î∂ÑÌè¨</h3>
                    <div class="space-y-3">
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span>Í∏çÏ†ïÏ†Å Í∞êÏ†ï</span>
                                <span id="positivePercent">0%</span>
                            </div>
                            <div class="w-full bg-white/30 rounded-full h-2">
                                <div id="positiveBar" class="bg-white rounded-full h-2 transition-all duration-500" style="width: 0%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span>ÏóêÎÑàÏßÄ ÏàòÏ§Ä</span>
                                <span id="energyPercent">0%</span>
                            </div>
                            <div class="w-full bg-white/30 rounded-full h-2">
                                <div id="energyBar" class="bg-white rounded-full h-2 transition-all duration-500" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Ï£ºÏöî Í∞êÏ†ï -->
                <div class="glass-effect rounded-3xl p-6">
                    <h3 class="text-xl font-bold mb-4 text-gray-800">üéØ Ï£ºÏöî Í∞êÏ†ï</h3>
                    <div id="dominantEmotions" class="space-y-2">
                        <p class="text-gray-500 text-sm">Í∞êÏ†ïÏùÑ Î∞∞ÏπòÌïòÎ©¥ Î∂ÑÏÑùÏù¥ ÏãúÏûëÎê©ÎãàÎã§</p>
                    </div>
                </div>
                
                <!-- Ï∂îÏ≤ú ÌôúÎèô -->
                <div class="glass-effect rounded-3xl p-6">
                    <h3 class="text-xl font-bold mb-4 text-gray-800">üí° Ï∂îÏ≤ú ÌôúÎèô</h3>
                    <div id="recommendedActivities" class="space-y-2">
                        <p class="text-gray-500 text-sm">Í∞êÏ†ï ÏÉÅÌÉúÏóê ÎßûÎäî ÌôúÎèôÏùÑ Ï∂îÏ≤úÌï¥ÎìúÎ¶¥Í≤åÏöî</p>
                    </div>
                </div>
            </div>
            
            <!-- Ï∞®Ìä∏ ÏòÅÏó≠ -->
            <div class="mt-6 glass-effect rounded-3xl p-6">
                <h3 class="text-xl font-bold mb-4 text-gray-800">üìà Í∞êÏ†ï Ï∞®Ìä∏</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="chart-container">
                        <canvas id="quadrantChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <canvas id="emotionRadar"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÌôúÎèô Ï∂îÏ≤ú ÌÉ≠ -->
        <div id="recommendContent" class="tab-content hidden">
            <div class="glass-effect rounded-3xl p-8">
                <h2 class="title-font text-2xl text-center mb-6 text-gray-800">ÏßÄÍ∏à Í∏∞Î∂ÑÏóê ÎßûÎäî ÌôúÎèô Ï∞æÍ∏∞</h2>
                
                <!-- Í∞êÏ†ï ÏÉÅÌÉú ÏÑ†ÌÉù -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                    <button onclick="showActivities('energetic')" class="quadrant-card bg-yellow-50">
                        <div class="text-4xl mb-2">‚ö°</div>
                        <h3 class="font-bold">ÌôúÍ∏∞Ï∞¨</h3>
                        <p class="text-xs text-gray-600">ÏóêÎÑàÏßÄÍ∞Ä ÎÑòÏπ† Îïå</p>
                    </button>
                    <button onclick="showActivities('stressed')" class="quadrant-card bg-red-50">
                        <div class="text-4xl mb-2">üî•</div>
                        <h3 class="font-bold">Ïä§Ìä∏Î†àÏä§</h3>
                        <p class="text-xs text-gray-600">Í∏¥Ïû•ÎêòÍ≥† Î∂àÏïàÌï† Îïå</p>
                    </button>
                    <button onclick="showActivities('down')" class="quadrant-card bg-blue-50">
                        <div class="text-4xl mb-2">üíß</div>
                        <h3 class="font-bold">Ïö∞Ïö∏Ìïú</h3>
                        <p class="text-xs text-gray-600">Í∏∞Ïö¥Ïù¥ ÏóÜÏùÑ Îïå</p>
                    </button>
                    <button onclick="showActivities('peaceful')" class="quadrant-card bg-green-50">
                        <div class="text-4xl mb-2">üçÉ</div>
                        <h3 class="font-bold">ÌèâÏò®Ìïú</h3>
                        <p class="text-xs text-gray-600">Ï∞®Î∂ÑÌï† Îïå</p>
                    </button>
                </div>
                
                <!-- ÌôúÎèô Î™©Î°ù -->
                <div id="activityList" class="space-y-4">
                    <!-- ÌôúÎèôÏù¥ Ïó¨Í∏∞Ïóê ÌëúÏãúÎê® -->
                </div>
            </div>
        </div>

        <!-- Í∏∞Î°ù Î≥¥Í∏∞ ÌÉ≠ -->
        <div id="historyContent" class="tab-content hidden">
            <div class="glass-effect rounded-3xl p-8">
                <h2 class="title-font text-2xl text-center mb-6 text-gray-800">ÎÇòÏùò Í∞êÏ†ï 4Î∂ÑÎ©¥ Í∏∞Î°ù</h2>
                
                <!-- Í∏∞Î°ù Î™©Î°ù -->
                <div id="historyList" class="space-y-4">
                    <!-- Í∏∞Î°ùÏù¥ Ïó¨Í∏∞Ïóê ÌëúÏãúÎê® -->
                </div>
            </div>
        </div>
    </div>

    <!-- ÏÉÅÏÑ∏ Ï†ïÎ≥¥ Î™®Îã¨ -->
    <div id="detailModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-3xl p-8 max-w-md mx-4">
            <h3 id="modalTitle" class="text-2xl font-bold mb-4">Î∂ÑÎ©¥ Ï†ïÎ≥¥</h3>
            <p id="modalContent" class="text-gray-600 mb-6"></p>
            <button onclick="closeModal()" class="w-full px-6 py-3 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition">
                ÌôïÏù∏
            </button>
        </div>
    </div>

    <script>
        // Ï†ÑÏó≠ Î≥ÄÏàò
        let emotions = [];
        let draggedElement = null;
        let board = null;
        let quadrantChart = null;
        let emotionRadar = null;
        let savedQuadrants = JSON.parse(localStorage.getItem('emotionQuadrants') || '[]');

        // Ï¥àÍ∏∞Ìôî
        document.addEventListener('DOMContentLoaded', function() {
            board = document.getElementById('quadrantBoard');
            setupCharts();
            loadHistory();
            
            // ÎìúÎûòÍ∑∏ Ïù¥Î≤§Ìä∏ ÏÑ§Ï†ï
            board.addEventListener('dragover', handleDragOver);
            board.addEventListener('drop', handleDrop);
        });

        // ÌÉ≠ Ï†ÑÌôò
        function showTab(tab) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('bg-purple-500', 'text-white');
                btn.classList.add('hover:bg-purple-100');
            });
            
            document.getElementById(tab + 'Content').classList.remove('hidden');
            document.getElementById(tab + 'Tab').classList.add('bg-purple-500', 'text-white');
            document.getElementById(tab + 'Tab').classList.remove('hover:bg-purple-100');
            
            if (tab === 'analyze') {
                updateAnalysis();
            }
        }

        // Í∞êÏ†ï Ï∂îÍ∞Ä
        function addEmotion(emoji, name, x, y) {
            // Ï§ëÎ≥µ Ï≤¥ÌÅ¨
            if (emotions.find(e => e.name === name)) {
                alert('Ïù¥ÎØ∏ Ï∂îÍ∞ÄÎêú Í∞êÏ†ïÏûÖÎãàÎã§!');
                return;
            }
            
            // Í∞êÏ†ï Ï†ê ÏÉùÏÑ±
            const point = createEmotionPoint(emoji, name, x, y);
            board.appendChild(point);
            
            // Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
            emotions.push({ emoji, name, x, y });
            
            // Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî
            event.target?.classList.add('placed');
            
            // ÏóÖÎç∞Ïù¥Ìä∏
            updateDisplay();
        }

        // Í∞êÏ†ï Ï†ê ÏÉùÏÑ±
        function createEmotionPoint(emoji, name, x, y) {
            const point = document.createElement('div');
            point.className = 'emotion-point';
            point.draggable = true;
            point.dataset.name = name;
            point.dataset.x = x;
            point.dataset.y = y;
            
            // ÎÇ¥Ïö© Ï∂îÍ∞Ä
            point.innerHTML = `
                ${emoji}
                <span class="emotion-label">${name}</span>
            `;
            
            // ÏúÑÏπò ÏÑ§Ï†ï
            const boardRect = board.getBoundingClientRect();
            const centerX = boardRect.width / 2;
            const centerY = boardRect.height / 2;
            
            const pixelX = centerX + (x / 100) * (centerX - 25);
            const pixelY = centerY - (y / 100) * (centerY - 25);
            
            point.style.left = pixelX - 25 + 'px';
            point.style.top = pixelY - 25 + 'px';
            
            // ÎìúÎûòÍ∑∏ Ïù¥Î≤§Ìä∏
            point.addEventListener('dragstart', handleDragStart);
            point.addEventListener('dragend', handleDragEnd);
            
            // ÎçîÎ∏îÌÅ¥Î¶≠ÏúºÎ°ú Ï†úÍ±∞
            point.addEventListener('dblclick', function() {
                if (confirm(`"${name}" Í∞êÏ†ïÏùÑ Ï†úÍ±∞ÌïòÏãúÍ≤†ÏäµÎãàÍπå?`)) {
                    removeEmotion(name);
                }
            });
            
            return point;
        }

        // ÎìúÎûòÍ∑∏ ÏãúÏûë
        function handleDragStart(e) {
            draggedElement = e.target;
            e.target.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
        }

        // ÎìúÎûòÍ∑∏ Ï¢ÖÎ£å
        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
            draggedElement = null;
        }

        // ÎìúÎûòÍ∑∏ Ïò§Î≤Ñ
        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
            
            // Ï¢åÌëú ÌëúÏãú
            const rect = board.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;
            
            const coordX = Math.round(((x - centerX) / (centerX - 25)) * 100);
            const coordY = Math.round(((centerY - y) / (centerY - 25)) * 100);
            
            updateCoordinate(coordX, coordY);
        }

        // ÎìúÎ°≠
        function handleDrop(e) {
            e.preventDefault();
            
            if (!draggedElement) return;
            
            const rect = board.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            // Í≤ΩÍ≥Ñ Ï≤¥ÌÅ¨
            const newX = Math.max(25, Math.min(rect.width - 25, x));
            const newY = Math.max(25, Math.min(rect.height - 25, y));
            
            draggedElement.style.left = newX - 25 + 'px';
            draggedElement.style.top = newY - 25 + 'px';
            
            // Ï¢åÌëú Í≥ÑÏÇ∞
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;
            const coordX = Math.round(((newX - centerX) / (centerX - 25)) * 100);
            const coordY = Math.round(((centerY - newY) / (centerY - 25)) * 100);
            
            // Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏
            const name = draggedElement.dataset.name;
            const emotion = emotions.find(e => e.name === name);
            if (emotion) {
                emotion.x = coordX;
                emotion.y = coordY;
                draggedElement.dataset.x = coordX;
                draggedElement.dataset.y = coordY;
            }
            
            updateDisplay();
        }

        // Í∞êÏ†ï Ï†úÍ±∞
        function removeEmotion(name) {
            // DOMÏóêÏÑú Ï†úÍ±∞
            const point = board.querySelector(`[data-name="${name}"]`);
            if (point) point.remove();
            
            // Îç∞Ïù¥ÌÑ∞ÏóêÏÑú Ï†úÍ±∞
            emotions = emotions.filter(e => e.name !== name);
            
            // Î≤ÑÌäº ÌôúÏÑ±Ìôî
            document.querySelectorAll('.emotion-btn.placed').forEach(btn => {
                if (btn.textContent.includes(name)) {
                    btn.classList.remove('placed');
                }
            });
            
            updateDisplay();
        }

        // Îπ†Î•∏ Î∞∞Ïπò
        function quickPlace(type) {
            const quickEmotions = {
                happy: { emoji: 'üòä', name: 'ÌñâÎ≥µ', x: 70, y: 70 },
                sad: { emoji: 'üò¢', name: 'Ïä¨Ìîî', x: -70, y: -70 },
                angry: { emoji: 'üò†', name: 'ÌôîÎÇ®', x: -70, y: 70 },
                calm: { emoji: 'üòå', name: 'Ï∞®Î∂Ñ', x: 70, y: -70 }
            };
            
            const emotion = quickEmotions[type];
            addEmotion(emotion.emoji, emotion.name, emotion.x, emotion.y);
        }

        // Ïª§Ïä§ÌÖÄ Í∞êÏ†ï Ï∂îÍ∞Ä
        function addCustomEmotion() {
            const name = document.getElementById('customName').value.trim();
            const emoji = document.getElementById('customEmoji').value;
            
            if (!name) {
                alert('Í∞êÏ†ï Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!');
                return;
            }
            
            // ÎûúÎç§ ÏúÑÏπò
            const x = Math.floor(Math.random() * 160) - 80;
            const y = Math.floor(Math.random() * 160) - 80;
            
            addEmotion(emoji, name, x, y);
            
            // ÏûÖÎ†• Ï¥àÍ∏∞Ìôî
            document.getElementById('customName').value = '';
        }

        // Î≥¥Îìú Ï¥àÍ∏∞Ìôî
        function clearBoard() {
            if (emotions.length === 0) return;
            
            if (confirm('Î™®Îì† Í∞êÏ†ïÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                board.querySelectorAll('.emotion-point').forEach(point => point.remove());
                emotions = [];
                
                document.querySelectorAll('.emotion-btn.placed').forEach(btn => {
                    btn.classList.remove('placed');
                });
                
                updateDisplay();
            }
        }

        // 4Î∂ÑÎ©¥ Ï†ÄÏû•
        function saveQuadrant() {
            if (emotions.length === 0) {
                alert('ÏµúÏÜå ÌïòÎÇòÏùò Í∞êÏ†ïÏùÑ Ï∂îÍ∞ÄÌï¥Ï£ºÏÑ∏Ïöî!');
                return;
            }
            
            const quadrant = {
                id: Date.now(),
                date: new Date().toISOString(),
                emotions: [...emotions]
            };
            
            savedQuadrants.push(quadrant);
            localStorage.setItem('emotionQuadrants', JSON.stringify(savedQuadrants));
            
            alert('Í∞êÏ†ï 4Î∂ÑÎ©¥Ïù¥ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§! üéâ');
            loadHistory();
        }

        // Ï¢åÌëú ÏóÖÎç∞Ïù¥Ìä∏
        function updateCoordinate(x, y) {
            document.getElementById('coordinateDisplay').textContent = `X: ${x}, Y: ${y}`;
        }

        // ÎîîÏä§ÌîåÎ†àÏù¥ ÏóÖÎç∞Ïù¥Ìä∏
        function updateDisplay() {
            document.getElementById('emotionCount').textContent = emotions.length;
            
            if (emotions.length > 0) {
                updateAnalysis();
            }
        }

        // Î∂ÑÏÑù ÏóÖÎç∞Ïù¥Ìä∏
        function updateAnalysis() {
            if (emotions.length === 0) return;
            
            // Î∂ÑÎ©¥Î≥Ñ Ïπ¥Ïö¥Ìä∏
            const quadrants = [0, 0, 0, 0];
            let totalX = 0, totalY = 0;
            
            emotions.forEach(e => {
                totalX += e.x;
                totalY += e.y;
                
                if (e.x > 0 && e.y > 0) quadrants[0]++;
                else if (e.x < 0 && e.y > 0) quadrants[1]++;
                else if (e.x < 0 && e.y < 0) quadrants[2]++;
                else quadrants[3]++;
            });
            
            // ÌèâÍ∑† Í≥ÑÏÇ∞
            const avgX = totalX / emotions.length;
            const avgY = totalY / emotions.length;
            
            // Í∏çÏ†ïÎèÑÏôÄ ÏóêÎÑàÏßÄ Í≥ÑÏÇ∞
            const positivePercent = Math.round((avgX + 100) / 2);
            const energyPercent = Math.round((avgY + 100) / 2);
            
            // UI ÏóÖÎç∞Ïù¥Ìä∏
            document.getElementById('positivePercent').textContent = positivePercent + '%';
            document.getElementById('positiveBar').style.width = positivePercent + '%';
            document.getElementById('energyPercent').textContent = energyPercent + '%';
            document.getElementById('energyBar').style.width = energyPercent + '%';
            
            // Ï£ºÏöî Í∞êÏ†ï ÌëúÏãú
            updateDominantEmotions(quadrants);
            
            // Ï∂îÏ≤ú ÌôúÎèô
            updateRecommendedActivities(avgX, avgY);
            
            // Ï∞®Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏
            updateCharts(quadrants);
        }

        // Ï£ºÏöî Í∞êÏ†ï ÏóÖÎç∞Ïù¥Ìä∏
        function updateDominantEmotions(quadrants) {
            const quadrantNames = ['ÌôúÍ∏∞Ï∞¨', 'Í≤©Î†¨Ìïú', 'Í∞ÄÎùºÏïâÏùÄ', 'ÌèâÏò®Ìïú'];
            const maxIndex = quadrants.indexOf(Math.max(...quadrants));
            
            const html = `
                <div class="p-3 bg-purple-50 rounded-lg">
                    <p class="font-bold text-purple-700">${quadrantNames[maxIndex]} Í∞êÏ†ïÏù¥ Ï£ºÎ•º Ïù¥Î£®Í≥† ÏûàÏñ¥Ïöî</p>
                </div>
                <div class="text-sm text-gray-600">
                    ${emotions.slice(0, 3).map(e => `${e.emoji} ${e.name}`).join(', ')}
                </div>
            `;
            
            document.getElementById('dominantEmotions').innerHTML = html;
        }

        // Ï∂îÏ≤ú ÌôúÎèô ÏóÖÎç∞Ïù¥Ìä∏
        function updateRecommendedActivities(avgX, avgY) {
            let activities = [];
            
            if (avgX > 0 && avgY > 0) {
                activities = ['üèÉ Ïö¥ÎèôÌïòÍ∏∞', 'üéµ ÏùåÏïÖ Îì£Í∏∞', 'üë´ ÏπúÍµ¨ ÎßåÎÇòÍ∏∞'];
            } else if (avgX < 0 && avgY > 0) {
                activities = ['üßò Î™ÖÏÉÅÌïòÍ∏∞', '‚úèÔ∏è ÏùºÍ∏∞ Ïì∞Í∏∞', 'üö∂ ÏÇ∞Ï±ÖÌïòÍ∏∞'];
            } else if (avgX < 0 && avgY < 0) {
                activities = ['üõÅ Îî∞ÎúªÌïú Î™©Ïöï', '‚òï Ï∞® ÎßàÏãúÍ∏∞', 'üì∫ ÏòÅÌôî Î≥¥Í∏∞'];
            } else {
                activities = ['üìö ÎèÖÏÑúÌïòÍ∏∞', 'üé® Í∑∏Î¶º Í∑∏Î¶¨Í∏∞', 'üå± ÏãùÎ¨º ÎèåÎ≥¥Í∏∞'];
            }
            
            const html = activities.map(a => `
                <div class="activity-card">
                    <span>${a}</span>
                </div>
            `).join('');
            
            document.getElementById('recommendedActivities').innerHTML = html;
        }

        // Ï∞®Ìä∏ ÏÑ§Ï†ï
        function setupCharts() {
            // 4Î∂ÑÎ©¥ Ï∞®Ìä∏
            const ctx1 = document.getElementById('quadrantChart');
            if (ctx1) {
                quadrantChart = new Chart(ctx1.getContext('2d'), {
                    type: 'bar',
                    data: {
                        labels: ['ÌôúÍ∏∞Ï∞¨', 'Í≤©Î†¨Ìïú', 'Í∞ÄÎùºÏïâÏùÄ', 'ÌèâÏò®Ìïú'],
                        datasets: [{
                            label: 'Í∞êÏ†ï Ïàò',
                            data: [0, 0, 0, 0],
                            backgroundColor: [
                                'rgba(255, 206, 86, 0.6)',
                                'rgba(255, 99, 132, 0.6)',
                                'rgba(54, 162, 235, 0.6)',
                                'rgba(75, 192, 192, 0.6)'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    stepSize: 1
                                }
                            }
                        }
                    }
                });
            }
            
            // Î†àÏù¥Îçî Ï∞®Ìä∏
            const ctx2 = document.getElementById('emotionRadar');
            if (ctx2) {
                emotionRadar = new Chart(ctx2.getContext('2d'), {
                    type: 'radar',
                    data: {
                        labels: ['Í∏çÏ†ï', 'ÏóêÎÑàÏßÄ', 'ÏïàÏ†ï', 'ÌôúÎ†•'],
                        datasets: [{
                            label: 'Í∞êÏ†ï Í∑†Ìòï',
                            data: [0, 0, 0, 0],
                            backgroundColor: 'rgba(102, 126, 234, 0.2)',
                            borderColor: '#667eea',
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            r: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }
        }

        // Ï∞®Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏
        function updateCharts(quadrants) {
            if (quadrantChart) {
                quadrantChart.data.datasets[0].data = quadrants;
                quadrantChart.update();
            }
            
            if (emotionRadar) {
                const avgX = emotions.reduce((sum, e) => sum + e.x, 0) / emotions.length;
                const avgY = emotions.reduce((sum, e) => sum + e.y, 0) / emotions.length;
                
                emotionRadar.data.datasets[0].data = [
                    Math.max(0, Math.round((avgX + 100) / 2)),
                    Math.max(0, Math.round((avgY + 100) / 2)),
                    Math.max(0, Math.round((100 - Math.abs(avgY)) / 1)),
                    Math.max(0, Math.round(Math.sqrt(avgX * avgX + avgY * avgY) / 1.4))
                ];
                emotionRadar.update();
            }
        }

        // ÌôúÎèô ÌëúÏãú
        function showActivities(type) {
            const activities = {
                energetic: [
                    { icon: 'üèÉ', title: 'Ïö¥ÎèôÌïòÍ∏∞', desc: 'ÏóêÎÑàÏßÄÎ•º Í±¥Í∞ïÌïòÍ≤å Î∞úÏÇ∞Ìï¥Ïöî' },
                    { icon: 'üé®', title: 'Ï∞ΩÏûë ÌôúÎèô', desc: 'ÏÉàÎ°úÏö¥ Í≤ÉÏùÑ ÎßåÎì§Ïñ¥Î≥¥ÏÑ∏Ïöî' },
                    { icon: 'üéÆ', title: 'ÌôúÎèôÏ†ÅÏù∏ Í≤åÏûÑ', desc: 'ÏπúÍµ¨Îì§Í≥º Ìï®Íªò Ï¶êÍ≤®Ïöî' }
                ],
                stressed: [
                    { icon: 'üßò', title: 'Î™ÖÏÉÅÌïòÍ∏∞', desc: 'ÎßàÏùåÏùÑ Ï∞®Î∂ÑÌïòÍ≤å Í∞ÄÎùºÏïâÌòÄÏöî' },
                    { icon: 'üéß', title: 'ÏùåÏïÖ Îì£Í∏∞', desc: 'Ìé∏ÏïàÌïú ÏùåÏïÖÏúºÎ°ú Ìú¥ÏãùÌï¥Ïöî' },
                    { icon: '‚úèÔ∏è', title: 'ÏùºÍ∏∞ Ïì∞Í∏∞', desc: 'Í∞êÏ†ïÏùÑ Í∏ÄÎ°ú ÌëúÌòÑÌï¥Î≥¥ÏÑ∏Ïöî' }
                ],
                down: [
                    { icon: '‚òï', title: 'Îî∞ÎúªÌïú Ï∞®', desc: 'Î™∏Í≥º ÎßàÏùåÏùÑ Îî∞ÎúªÌïòÍ≤å' },
                    { icon: 'ü§ó', title: 'Ìè¨ÏòπÌïòÍ∏∞', desc: 'ÏÇ¨ÎûëÌïòÎäî ÏÇ¨ÎûåÍ≥º Ìï®Íªò' },
                    { icon: 'üì∫', title: 'Ï¢ãÏïÑÌïòÎäî ÏòÅÏÉÅ', desc: 'Í∏∞Î∂Ñ Ï†ÑÌôòÏùÑ Ìï¥Î≥¥ÏÑ∏Ïöî' }
                ],
                peaceful: [
                    { icon: 'üìö', title: 'ÎèÖÏÑúÌïòÍ∏∞', desc: 'Ï°∞Ïö©Ìûà Ï±ÖÏùÑ ÏùΩÏñ¥Ïöî' },
                    { icon: 'üå±', title: 'ÏãùÎ¨º ÎèåÎ≥¥Í∏∞', desc: 'ÏûêÏó∞Í≥º Ìï®ÍªòÌï¥Ïöî' },
                    { icon: 'üß©', title: 'ÌçºÏ¶ê ÎßûÏ∂îÍ∏∞', desc: 'ÏßëÏ§ëÌïòÎ©∞ ÏãúÍ∞ÑÏùÑ Î≥¥ÎÇ¥Ïöî' }
                ]
            };
            
            const list = activities[type];
            const html = list.map(a => `
                <div class="activity-card">
                    <span class="text-3xl">${a.icon}</span>
                    <div>
                        <h4 class="font-bold">${a.title}</h4>
                        <p class="text-sm text-gray-600">${a.desc}</p>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('activityList').innerHTML = html;
        }

        // Í∏∞Î°ù Î°úÎìú
        function loadHistory() {
            const list = document.getElementById('historyList');
            
            if (savedQuadrants.length === 0) {
                list.innerHTML = '<p class="text-center text-gray-500">Ï†ÄÏû•Îêú Í∏∞Î°ùÏù¥ ÏóÜÏäµÎãàÎã§</p>';
            } else {
                const html = savedQuadrants.slice(-5).reverse().map(q => {
                    const date = new Date(q.date).toLocaleDateString();
                    const emotions = q.emotions.map(e => e.emoji).join(' ');
                    
                    return `
                        <div class="glass-effect rounded-xl p-4">
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="font-bold">${date}</p>
                                    <p class="text-sm text-gray-600">${q.emotions.length}Í∞ú Í∞êÏ†ï</p>
                                </div>
                                <div>${emotions}</div>
                            </div>
                        </div>
                    `;
                }).join('');
                
                list.innerHTML = html;
            }
        }

        // Î∂ÑÎ©¥ ÏÉÅÏÑ∏ Ï†ïÎ≥¥
        function showQuadrantDetail(quadrant) {
            const details = {
                1: {
                    title: 'ÌôúÍ∏∞Ï∞¨ Í∞êÏ†ï ÏòÅÏó≠',
                    content: 'ÎÜíÏùÄ ÏóêÎÑàÏßÄÏôÄ Í∏çÏ†ïÏ†ÅÏù∏ Í∏∞Î∂ÑÏù¥ ÎßåÎÇòÎäî ÏòÅÏó≠ÏûÖÎãàÎã§. Ïù¥Îü∞ Í∞êÏ†ïÏùÑ ÎäêÎÇÑ ÎïåÎäî ÏÉàÎ°úÏö¥ ÎèÑÏ†ÑÏùÑ ÌïòÍ±∞ÎÇò Ï∞ΩÏùòÏ†ÅÏù∏ ÌôúÎèôÏùÑ ÌïòÍ∏∞ Ï¢ãÏäµÎãàÎã§.'
                },
                2: {
                    title: 'Í≤©Î†¨Ìïú Í∞êÏ†ï ÏòÅÏó≠',
                    content: 'ÎÜíÏùÄ ÏóêÎÑàÏßÄÏßÄÎßå Î∂ÄÏ†ïÏ†ÅÏù∏ Í∏∞Î∂ÑÏù∏ ÏÉÅÌÉúÏûÖÎãàÎã§. Ïù¥Îü∞ Í∞êÏ†ïÏùÑ ÎäêÎÇÑ ÎïåÎäî ÏïàÏ†ÑÌïòÍ≤å Í∞êÏ†ïÏùÑ Î∞úÏÇ∞ÌïòÍ≥† ÏßÑÏ†ïÏãúÌÇ§Îäî ÌôúÎèôÏù¥ ÌïÑÏöîÌï©ÎãàÎã§.'
                },
                3: {
                    title: 'Í∞ÄÎùºÏïâÏùÄ Í∞êÏ†ï ÏòÅÏó≠',
                    content: 'ÎÇÆÏùÄ ÏóêÎÑàÏßÄÏôÄ Î∂ÄÏ†ïÏ†ÅÏù∏ Í∏∞Î∂ÑÏù¥ ÎßåÎÇòÎäî ÏòÅÏó≠ÏûÖÎãàÎã§. Ï∂©Î∂ÑÌïú Ìú¥ÏãùÍ≥º ÏûêÍ∏∞ ÎèåÎ¥ÑÏù¥ ÌïÑÏöîÌïú ÏãúÍ∏∞ÏûÖÎãàÎã§.'
                },
                4: {
                    title: 'ÌèâÏò®Ìïú Í∞êÏ†ï ÏòÅÏó≠',
                    content: 'ÎÇÆÏùÄ ÏóêÎÑàÏßÄÏßÄÎßå Í∏çÏ†ïÏ†ÅÏù∏ Í∏∞Î∂ÑÏù∏ ÏÉÅÌÉúÏûÖÎãàÎã§. Ï°∞Ïö©Ìïú ÌôúÎèôÏù¥ÎÇò Î™ÖÏÉÅ, Í∞êÏÇ¨ ÏùºÍ∏∞ Ïì∞Í∏∞ Îì±Ïóê Ï†ÅÌï©Ìï©ÎãàÎã§.'
                }
            };
            
            const detail = details[quadrant];
            document.getElementById('modalTitle').textContent = detail.title;
            document.getElementById('modalContent').textContent = detail.content;
            document.getElementById('detailModal').classList.remove('hidden');
        }

        // Î™®Îã¨ Îã´Í∏∞
        function closeModal() {
            document.getElementById('detailModal').classList.add('hidden');
        }
    </script>
</body>
</html>