<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒˆ ë§ˆìŒìœ¼ë¡œ ì‡ëŠ” ìš°ë¦¬ ê°€ì¡± í”„ë¡œì íŠ¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .title-font {
            font-family: 'Jua', sans-serif;
        }
        
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-hover:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        
        .stage-gradient-1 {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .stage-gradient-2 {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .stage-gradient-3 {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .progress-ring {
            transform: rotate(-90deg);
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .tool-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            position: relative;
        }

        .tool-card.completed::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #10b981 0%, #34d399 100%);
        }

        .tool-card.developing::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #f59e0b 0%, #fbbf24 100%);
        }

        .emoji-icon {
            font-size: 2.5rem;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }

        @media print {
            .no-print { display: none !important; }
            body { background: white !important; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50">
    <!-- í—¤ë” -->
    <header class="glass-effect shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center space-x-3 mb-3 md:mb-0">
                    <span class="text-4xl float-animation">ğŸŒˆ</span>
                    <div>
                        <h1 class="title-font text-2xl md:text-3xl text-gray-800">ë§ˆìŒìœ¼ë¡œ ì‡ëŠ” ìš°ë¦¬ ê°€ì¡±</h1>
                        <p class="text-sm text-gray-600">ì´ˆë“±í•™êµ 3í•™ë…„ ë„ë• í”„ë¡œì íŠ¸ ìˆ˜ì—…</p>
                    </div>
                </div>
                <div class="flex space-x-3">
                    <button onclick="toggleMode()" class="px-4 py-2 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition">
                        <span id="modeText">ğŸ‘¨â€ğŸ« êµì‚¬ ëª¨ë“œ</span>
                    </button>
                    <button onclick="showQRCode()" class="px-4 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition no-print">
                        ğŸ“± QR ê³µìœ 
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- ì§„í–‰ ìƒí™© ëŒ€ì‹œë³´ë“œ -->
    <div class="container mx-auto px-4 py-8">
        <div class="glass-effect rounded-3xl p-6 mb-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- ì „ì²´ ì§„í–‰ë¥  -->
                <div class="text-center">
                    <div class="relative inline-block">
                        <svg width="120" height="120" class="progress-ring">
                            <circle cx="60" cy="60" r="50" stroke="#e5e7eb" stroke-width="10" fill="none"/>
                            <circle cx="60" cy="60" r="50" stroke="#10b981" stroke-width="10" fill="none"
                                    stroke-dasharray="314" stroke-dashoffset="40" stroke-linecap="round"/>
                        </svg>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <span class="text-2xl font-bold text-gray-800">87%</span>
                        </div>
                    </div>
                    <p class="mt-2 text-gray-700 font-medium">ì „ì²´ ì§„í–‰ë¥ </p>
                    <p class="text-sm text-gray-500">14/16 ë„êµ¬ ì™„ì„±</p>
                </div>

                <!-- í˜„ì¬ ë‹¨ê³„ -->
                <div class="text-center flex flex-col justify-center">
                    <div class="text-5xl mb-2">ğŸ†</div>
                    <h3 class="text-xl font-bold text-gray-800">ê±°ì˜ ì™„ë£Œ!</h3>
                    <p class="text-gray-600 mt-1">í”„ë¡œì íŠ¸ ë§ˆë¬´ë¦¬ ë‹¨ê³„</p>
                </div>

                <!-- ìµœê·¼ í™œë™ -->
                <div class="text-center flex flex-col justify-center">
                    <div class="text-5xl mb-2">â°</div>
                    <h3 class="text-xl font-bold text-gray-800">ìµœê·¼ í™œë™</h3>
                    <p class="text-gray-600 mt-1" id="lastActivity">ì•„ì§ ì‹œì‘í•˜ì§€ ì•ŠìŒ</p>
                </div>
            </div>
        </div>

        <!-- 3ë‹¨ê³„ í•™ìŠµ ê³¼ì • -->
        <div class="mb-12">
            <h2 class="title-font text-3xl text-center text-gray-800 mb-8">ğŸ“ 3ë‹¨ê³„ í•™ìŠµ ì—¬ì •</h2>
            
            <!-- 1ë‹¨ê³„: ë‚˜ -->
            <div class="mb-8">
                <div class="stage-gradient-1 text-white rounded-2xl p-6 mb-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <span class="text-4xl">1ï¸âƒ£</span>
                            <div>
                                <h3 class="text-2xl font-bold">ë‚˜ - ì†Œì¤‘í•œ ë‚˜ë¥¼ ë°œê²¬í•˜ê¸°</h3>
                                <p class="text-purple-100">1-4ì°¨ì‹œ | ë‚˜ì˜ ê°ì •ì„ ì´í•´í•˜ê³  í‘œí˜„í•˜ê¸°</p>
                            </div>
                        </div>
                        <span class="text-3xl">ğŸŒŸ</span>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4" id="stage1Tools">
                    <!-- ë„êµ¬ ì¹´ë“œë“¤ì´ JavaScriptë¡œ ë™ì  ìƒì„±ë¨ -->
                </div>
            </div>

            <!-- 2ë‹¨ê³„: ê°€ì¡± -->
            <div class="mb-8">
                <div class="stage-gradient-2 text-white rounded-2xl p-6 mb-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <span class="text-4xl">2ï¸âƒ£</span>
                            <div>
                                <h3 class="text-2xl font-bold">ê°€ì¡± - ìš°ë¦¬ ê°€ì¡±ì˜ í–‰ë³µ ë§Œë“¤ê¸°</h3>
                                <p class="text-pink-100">5-8ì°¨ì‹œ | ê°€ì¡±ê³¼ í•¨ê»˜ í–‰ë³µí•œ ìˆœê°„ ë§Œë“¤ê¸°</p>
                            </div>
                        </div>
                        <span class="text-3xl">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4" id="stage2Tools">
                    <!-- ë„êµ¬ ì¹´ë“œë“¤ì´ JavaScriptë¡œ ë™ì  ìƒì„±ë¨ -->
                </div>
            </div>

            <!-- 3ë‹¨ê³„: ê³µê° -->
            <div class="mb-8">
                <div class="stage-gradient-3 text-white rounded-2xl p-6 mb-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <span class="text-4xl">3ï¸âƒ£</span>
                            <div>
                                <h3 class="text-2xl font-bold">ê³µê° - ë§ˆìŒìœ¼ë¡œ ì†Œí†µí•˜ê¸°</h3>
                                <p class="text-blue-100">9-12ì°¨ì‹œ | ABC ëª¨ë¸ë¡œ ì„œë¡œ ì´í•´í•˜ê¸°</p>
                            </div>
                        </div>
                        <span class="text-3xl">ğŸ’</span>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4" id="stage3Tools">
                    <!-- ë„êµ¬ ì¹´ë“œë“¤ì´ JavaScriptë¡œ ë™ì  ìƒì„±ë¨ -->
                </div>
            </div>

            <!-- ë§ˆë¬´ë¦¬ ë‹¨ê³„ -->
            <div class="mb-8">
                <div class="bg-gradient-to-r from-yellow-400 to-orange-400 text-white rounded-2xl p-6 mb-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <span class="text-4xl">ğŸ†</span>
                            <div>
                                <h3 class="text-2xl font-bold">í”„ë¡œì íŠ¸ ë§ˆë¬´ë¦¬</h3>
                                <p class="text-yellow-100">13-15ì°¨ì‹œ | ì„±ì¥ ê¸°ë¡ê³¼ ë°œí‘œ</p>
                            </div>
                        </div>
                        <span class="text-3xl">ğŸ“Š</span>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4" id="finalTools">
                    <!-- ë„êµ¬ ì¹´ë“œë“¤ì´ JavaScriptë¡œ ë™ì  ìƒì„±ë¨ -->
                </div>
            </div>
        </div>

        <!-- ì‚¬ìš© ì•ˆë‚´ -->
        <div class="glass-effect rounded-3xl p-8 mb-8" id="guideSection">
            <h2 class="title-font text-2xl text-center text-gray-800 mb-6">ğŸ“– ì‚¬ìš© ì•ˆë‚´</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-blue-50 rounded-xl p-6">
                    <h3 class="text-xl font-bold text-blue-800 mb-3">ğŸ‘¦ğŸ‘§ í•™ìƒìš©</h3>
                    <ol class="text-gray-700 space-y-2">
                        <li>1. ì›í•˜ëŠ” ë„êµ¬ ì¹´ë“œë¥¼ í´ë¦­í•´ìš”</li>
                        <li>2. í™”ë©´ì˜ ì•ˆë‚´ë¥¼ ë”°ë¼ í™œë™í•´ìš”</li>
                        <li>3. ì™„ì„±í•œ ì‘í’ˆì„ ì €ì¥í•˜ê±°ë‚˜ ì¸ì‡„í•´ìš”</li>
                        <li>4. ê°€ì¡±ê³¼ í•¨ê»˜ ë‚˜ëˆ ìš”!</li>
                    </ol>
                </div>
                <div class="bg-purple-50 rounded-xl p-6">
                    <h3 class="text-xl font-bold text-purple-800 mb-3">ğŸ‘¨â€ğŸ« êµì‚¬ìš©</h3>
                    <ol class="text-gray-700 space-y-2">
                        <li>1. ìˆ˜ì—… ì „ ë„êµ¬ë¥¼ ë¯¸ë¦¬ í™•ì¸í•˜ì„¸ìš”</li>
                        <li>2. QR ì½”ë“œë¡œ í•™ìƒë“¤ê³¼ ê³µìœ í•˜ì„¸ìš”</li>
                        <li>3. í™œë™ ì¤‘ ë„ì›€ì´ í•„ìš”í•œ í•™ìƒì„ ì§€ì›í•˜ì„¸ìš”</li>
                        <li>4. ê²°ê³¼ë¬¼ì„ í•¨ê»˜ ê³µìœ í•˜ê³  ì´ì•¼ê¸° ë‚˜ëˆ„ì„¸ìš”</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>

    <!-- QR ì½”ë“œ ëª¨ë‹¬ -->
    <div id="qrModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-3xl p-8 max-w-sm mx-4">
            <h3 class="text-2xl font-bold text-center mb-4">ğŸ“± QR ì½”ë“œë¡œ ê³µìœ í•˜ê¸°</h3>
            <div id="qrcode" class="flex justify-center mb-4"></div>
            <p class="text-center text-gray-600 mb-4">í•™ìƒë“¤ì´ ìŠ¤ìº”í•˜ë©´ ë°”ë¡œ ì ‘ì†í•  ìˆ˜ ìˆì–´ìš”!</p>
            <button onclick="closeQRCode()" class="w-full px-4 py-2 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition">
                ë‹«ê¸°
            </button>
        </div>
    </div>

    <!-- í‘¸í„° -->
    <footer class="glass-effect mt-12">
        <div class="container mx-auto px-4 py-6">
            <div class="text-center text-gray-600">
                <p class="mb-2">ğŸ’• "ë§ˆìŒì˜ ë‚ ì”¨ë¥¼ ì½ê³ , ìƒê°ì˜ ë Œì¦ˆë¥¼ ë°”ê¾¸ë©°, ì„œë¡œì˜ ê°ì •ì„ ì´í•´í•˜ëŠ” ì•„ì´ë“¤"</p>
                <p class="text-sm">ë§Œë“ ì´: ë£°ë£¨ë„ë¼ í•œê¸°ìŒ¤ | ë¬¸ì˜: yeohanki@gmail.com</p>
                <p class="text-sm mt-2">Â© 2025 Family Heart Bridge Project. êµìœ¡ ëª©ì ìœ¼ë¡œ ììœ ë¡­ê²Œ ì‚¬ìš© ê°€ëŠ¥</p>
            </div>
        </div>
    </footer>

    <script>
        // ë„êµ¬ ë°ì´í„°
        const tools = {
            stage1: [
                { 
                    name: 'ê°ì • ë‚ ì”¨ ì²´í¬ì¸', 
                    icon: 'ğŸŒ¤', 
                    desc: 'ë§¤ì¼ ì•„ì¹¨ ë‚˜ì˜ ë§ˆìŒ ë‚ ì”¨ í™•ì¸í•˜ê¸°',
                    url: './tools/emotion-weather',
                    status: 'completed'
                },
                { 
                    name: 'ê°ì • ë‚ ì”¨ ì¼ê¸°', 
                    icon: 'ğŸ“', 
                    desc: 'í•˜ë£¨ì˜ ê°ì • ë³€í™” ê¸°ë¡í•˜ê¸°',
                    url: 'https://plusiam.github.io/emotion-weather-diary/',
                    status: 'completed'
                },
                { 
                    name: 'ë””ì§€í„¸ ê°ì • ì¹´ë“œ', 
                    icon: 'ğŸ’', 
                    desc: 'ë‹¤ì–‘í•œ ê°ì • ì´ë¦„ ì•Œì•„ë³´ê¸°',
                    url: './tools/emotion-cards',
                    status: 'completed'
                },
                { 
                    name: 'ê°ì • ì˜ˆë³´', 
                    icon: 'ğŸŒˆ', 
                    desc: 'ë‚´ì¼ì˜ ê°ì • ë‚ ì”¨ ì˜ˆì¸¡í•˜ê¸°',
                    url: './tools/emotion-forecast',
                    status: 'completed'
                },
                { 
                    name: 'ê°ì • 4ë¶„ë©´', 
                    icon: 'ğŸ¯', 
                    desc: 'ê°ì •ì˜ ì—ë„ˆì§€ì™€ ë°©í–¥ ì´í•´í•˜ê¸°',
                    url: './tools/emotion-quadrant',
                    status: 'completed'
                }
            ],
            stage2: [
                { 
                    name: 'ê°€ì¡± í–‰ë³µ ìˆœê°„ ê·¸ë¦¬ê¸°', 
                    icon: 'ğŸ¨', 
                    desc: 'ìš°ë¦¬ ê°€ì¡±ì˜ í–‰ë³µí•œ ìˆœê°„ í‘œí˜„í•˜ê¸°',
                    url: 'https://plusiam.github.io/family-happy-moments-v2',
                    status: 'completed'
                },
                { 
                    name: 'íš¨ë„ ì¿ í° ë§Œë“¤ê¸°', 
                    icon: 'ğŸ', 
                    desc: 'ë¶€ëª¨ë‹˜ê»˜ ë“œë¦¬ëŠ” íŠ¹ë³„í•œ ì„ ë¬¼',
                    url: 'https://plusiam.github.io/family-love-coupon-app/',
                    status: 'completed'
                },
                { 
                    name: 'ê°€ì¡± ì‚¬ë‘ ì—½ì„œ', 
                    icon: 'ğŸ’Œ', 
                    desc: 'ê°€ì¡±ì—ê²Œ ì „í•˜ëŠ” ì‚¬ë‘ì˜ ë©”ì‹œì§€',
                    url: 'https://plusiam.github.io/my-family-postcard',
                    status: 'completed'
                }
            ],
            stage3: [
                { 
                    name: 'ABC ê°ì • ë¶„ì„ê¸°', 
                    icon: 'ğŸ”¤', 
                    desc: 'ìƒí™©-ìƒê°-ê°ì • ì—°ê²° ì´í•´í•˜ê¸°',
                    url: './tools/abc-analyzer',
                    status: 'completed'
                },
                { 
                    name: 'ABC ì¹œêµ¬ ìƒë‹´ì‚¬', 
                    icon: 'ğŸ‘¥', 
                    desc: 'ABC ëª¨ë¸ë¡œ ì¹œêµ¬ ë„ì™€ì£¼ê¸°',
                    url: 'https://plusiam.github.io/abc-friend-consultant',
                    status: 'completed'
                },
                { 
                    name: 'ê°€ì¡± ABC ì¸í„°ë·°', 
                    icon: 'ğŸ¤', 
                    desc: 'ê°€ì¡±ì˜ ABC ì•Œì•„ë³´ê¸°',
                    url: './tools/family-abc-interview',
                    status: 'completed'
                }
            ],
            final: [
                { 
                    name: 'ê°ì • ì„±ì¥ ê·¸ë˜í”„', 
                    icon: 'ğŸ“ˆ', 
                    desc: 'ë‚˜ì˜ ê°ì • ì„±ì¥ ê³¼ì • ì‹œê°í™”',
                    url: 'https://plusiam.github.io/family-emotion-graph',
                    status: 'completed'
                },
                { 
                    name: 'ë§ˆìŒ ë¸Œë¦¿ì§€ í¬íŠ¸í´ë¦¬ì˜¤', 
                    icon: 'ğŸ“š', 
                    desc: 'ë‚˜ì˜ ì„±ì¥ ê¸°ë¡ ëª¨ìŒ',
                    url: './tools/heart-bridge-portfolio',
                    status: 'completed'
                },
                { 
                    name: 'ìš°ë¦¬ ê°€ì¡± ì†Œí†µ ê°€ì´ë“œë¶', 
                    icon: 'ğŸ“–', 
                    desc: 'ABC ê¸°ë°˜ ì†Œí†µë²• ì •ë¦¬',
                    url: './tools/family-communication-guide',
                    status: 'completed'
                }
            ]
        };

        // ë„êµ¬ ì¹´ë“œ ìƒì„± í•¨ìˆ˜
        function createToolCard(tool) {
            const isCompleted = tool.status === 'completed';
            const statusBadge = isCompleted 
                ? '<span class="absolute top-3 right-3 bg-green-500 text-white text-xs px-2 py-1 rounded-full">âœ… ì™„ì„±</span>'
                : '<span class="absolute top-3 right-3 bg-orange-500 text-white text-xs px-2 py-1 rounded-full">ğŸ”§ ê°œë°œì¤‘</span>';
            
            const clickAction = isCompleted 
                ? `onclick="openTool('${tool.url}', '${tool.name}')"` 
                : `onclick="showDevelopingMessage('${tool.name}')"`;
            
            return `
                <div class="tool-card ${isCompleted ? 'completed' : 'developing'} card-hover cursor-pointer p-6" ${clickAction}>
                    ${statusBadge}
                    <div class="text-center">
                        <div class="emoji-icon mb-3">${tool.icon}</div>
                        <h4 class="font-bold text-gray-800 mb-2">${tool.name}</h4>
                        <p class="text-sm text-gray-600">${tool.desc}</p>
                    </div>
                </div>
            `;
        }

        // ë„êµ¬ ì¹´ë“œ ë Œë”ë§
        function renderTools() {
            document.getElementById('stage1Tools').innerHTML = tools.stage1.map(createToolCard).join('');
            document.getElementById('stage2Tools').innerHTML = tools.stage2.map(createToolCard).join('');
            document.getElementById('stage3Tools').innerHTML = tools.stage3.map(createToolCard).join('');
            document.getElementById('finalTools').innerHTML = tools.final.map(createToolCard).join('');
        }

        // ë„êµ¬ ì—´ê¸°
        function openTool(url, name) {
            // ìµœê·¼ í™œë™ ì €ì¥
            const activity = {
                name: name,
                timestamp: new Date().toISOString()
            };
            localStorage.setItem('lastActivity', JSON.stringify(activity));
            updateLastActivity();
            
            // ìƒˆ íƒ­ì—ì„œ ì—´ê¸°
            window.open(url, '_blank');
        }

        // ê°œë°œ ì¤‘ ë©”ì‹œì§€
        function showDevelopingMessage(toolName) {
            alert(`ğŸ”§ "${toolName}" ë„êµ¬ëŠ” í˜„ì¬ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤.\n\nê³§ ë§Œë‚˜ì‹¤ ìˆ˜ ìˆì–´ìš”! ë‹¤ë¥¸ ì™„ì„±ëœ ë„êµ¬ë“¤ì„ ë¨¼ì € ì‚¬ìš©í•´ë³´ì„¸ìš”. ğŸ˜Š`);
        }

        // ëª¨ë“œ ì „í™˜
        let isTeacherMode = false;
        function toggleMode() {
            isTeacherMode = !isTeacherMode;
            const modeText = document.getElementById('modeText');
            const guideSection = document.getElementById('guideSection');
            
            if (isTeacherMode) {
                modeText.textContent = 'ğŸ‘¦ í•™ìƒ ëª¨ë“œ';
                // êµì‚¬ ëª¨ë“œ íŠ¹ë³„ ê¸°ëŠ¥ í™œì„±í™”
                document.body.classList.add('teacher-mode');
            } else {
                modeText.textContent = 'ğŸ‘¨â€ğŸ« êµì‚¬ ëª¨ë“œ';
                document.body.classList.remove('teacher-mode');
            }
        }

        // QR ì½”ë“œ í‘œì‹œ
        function showQRCode() {
            const modal = document.getElementById('qrModal');
            modal.classList.remove('hidden');
            
            // QR ì½”ë“œ ìƒì„±
            const qr = qrcode(0, 'M');
            qr.addData(window.location.href);
            qr.make();
            
            document.getElementById('qrcode').innerHTML = qr.createImgTag(5, 10);
        }

        // QR ì½”ë“œ ë‹«ê¸°
        function closeQRCode() {
            document.getElementById('qrModal').classList.add('hidden');
        }

        // ìµœê·¼ í™œë™ ì—…ë°ì´íŠ¸
        function updateLastActivity() {
            const lastActivity = localStorage.getItem('lastActivity');
            if (lastActivity) {
                const activity = JSON.parse(lastActivity);
                const date = new Date(activity.timestamp);
                const timeAgo = getTimeAgo(date);
                document.getElementById('lastActivity').textContent = `${activity.name} (${timeAgo})`;
            }
        }

        // ì‹œê°„ ê³„ì‚°
        function getTimeAgo(date) {
            const now = new Date();
            const diff = now - date;
            const minutes = Math.floor(diff / 60000);
            const hours = Math.floor(minutes / 60);
            const days = Math.floor(hours / 24);
            
            if (days > 0) return `${days}ì¼ ì „`;
            if (hours > 0) return `${hours}ì‹œê°„ ì „`;
            if (minutes > 0) return `${minutes}ë¶„ ì „`;
            return 'ë°©ê¸ˆ ì „';
        }

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            renderTools();
            updateLastActivity();
            
            // ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeQRCode();
                }
            });
            
            // ëª¨ë‹¬ ë°°ê²½ í´ë¦­ìœ¼ë¡œ ë‹«ê¸°
            document.getElementById('qrModal').addEventListener('click', function(e) {
                if (e.target.id === 'qrModal') {
                    closeQRCode();
                }
            });
        });

        // í”„ë¦°íŠ¸ ì¹œí™”ì  ìŠ¤íƒ€ì¼
        window.addEventListener('beforeprint', function() {
            document.body.classList.add('printing');
        });
        
        window.addEventListener('afterprint', function() {
            document.body.classList.remove('printing');
        });
    </script>
</body>
</html>